"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([["47718"],{50851:function(n,e,i){i.r(e),i.d(e,{metadata:()=>s,contentTitle:()=>d,default:()=>h,assets:()=>o,toc:()=>t,frontMatter:()=>l});var s=JSON.parse('{"id":"docsaidkit/advance","title":"\u9AD8\u5EA6\u306A\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB","description":"\u3088\u304F\u4F7F\u308F\u308C\u308B\u53C2\u8003\u8CC7\u6599","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/docsaidkit/advance.md","sourceDirName":"docsaidkit","slug":"/docsaidkit/advance","permalink":"/ja/docs/docsaidkit/advance","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"zephyr-sh","lastUpdatedAt":1732774291000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"\u57FA\u672C\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB","permalink":"/ja/docs/docsaidkit/installation"},"next":{"title":"PIP \u30D1\u30E9\u30E1\u30FC\u30BF\u8A2D\u5B9A","permalink":"/ja/docs/docsaidkit/pipconfig"}}'),r=i("85893"),c=i("50065");let l={sidebar_position:3},d="\u9AD8\u5EA6\u306A\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",o={},t=[{value:"\u3088\u304F\u4F7F\u308F\u308C\u308B\u53C2\u8003\u8CC7\u6599",id:"\u3088\u304F\u4F7F\u308F\u308C\u308B\u53C2\u8003\u8CC7\u6599",level:2},{value:"\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",id:"\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",level:2},{value:"Docker \u3092\u4F7F\u3044\u307E\u3057\u3087\u3046\uFF01",id:"docker-\u3092\u4F7F\u3044\u307E\u3057\u3087\u3046",level:2},{value:"\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",id:"\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",level:3},{value:"\u63A8\u8AD6\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",id:"\u63A8\u8AD6\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",level:3},{value:"\u4F7F\u7528\u65B9\u6CD5",id:"\u4F7F\u7528\u65B9\u6CD5",level:2},{value:"\u65E5\u5E38\u7684\u306A\u4F7F\u7528",id:"\u65E5\u5E38\u7684\u306A\u4F7F\u7528",level:3},{value:"gosu \u8A2D\u5B9A\u306E\u5C0E\u5165",id:"gosu-\u8A2D\u5B9A\u306E\u5C0E\u5165",level:3},{value:"\u5185\u90E8\u30D1\u30C3\u30B1\u30FC\u30B8\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",id:"\u5185\u90E8\u30D1\u30C3\u30B1\u30FC\u30B8\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",level:3},{value:"\u3088\u304F\u3042\u308B\u8CEA\u554F",id:"\u3088\u304F\u3042\u308B\u8CEA\u554F",level:2},{value:"Permission denied",id:"permission-denied",level:3}];function a(n){let e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u9AD8\u5EA6\u306A\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",children:"\u9AD8\u5EA6\u306A\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB"})}),"\n",(0,r.jsx)(e.h2,{id:"\u3088\u304F\u4F7F\u308F\u308C\u308B\u53C2\u8003\u8CC7\u6599",children:"\u3088\u304F\u4F7F\u308F\u308C\u308B\u53C2\u8003\u8CC7\u6599"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["NVIDIA \u306B\u3088\u3063\u3066\u69CB\u7BC9\u3055\u308C\u305F PyTorch \u30A4\u30E1\u30FC\u30B8\u306E\u5404\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001\u4EE5\u4E0B\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A",(0,r.jsx)(e.a,{href:"https://docs.nvidia.com/deeplearning/frameworks/pytorch-release-notes/index.html",children:(0,r.jsx)(e.strong,{children:"PyTorch \u30EA\u30EA\u30FC\u30B9\u30CE\u30FC\u30C8"})})]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["NVIDIA \u30E9\u30F3\u30BF\u30A4\u30E0\u306E\u6E96\u5099\u306B\u3064\u3044\u3066\u306F\u3001\u4EE5\u4E0B\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A",(0,r.jsx)(e.a,{href:"https://github.com/NVIDIA/nvidia-docker/wiki/Installation-(Native-GPU-Support)#usage",children:(0,r.jsx)(e.strong,{children:"\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\uFF08\u30CD\u30A4\u30C6\u30A3\u30D6 GPU \u30B5\u30DD\u30FC\u30C8\uFF09"})})]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["NVIDIA Toolkit \u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u65B9\u6CD5\u306B\u3064\u3044\u3066\u306F\u3001\u4EE5\u4E0B\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A",(0,r.jsx)(e.a,{href:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html",children:(0,r.jsx)(e.strong,{children:"NVIDIA \u30B3\u30F3\u30C6\u30CA\u30C4\u30FC\u30EB\u30AD\u30C3\u30C8\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB"})})]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["ONNXRuntime \u306B\u95A2\u3059\u308B\u5185\u5BB9\u306B\u3064\u3044\u3066\u306F\u3001\u4EE5\u4E0B\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A",(0,r.jsx)(e.a,{href:"https://onnxruntime.ai/docs/execution-providers/CUDA-ExecutionProvider.html#requirements",children:(0,r.jsx)(e.strong,{children:"ONNX Runtime \u30EA\u30EA\u30FC\u30B9\u30CE\u30FC\u30C8"})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",children:"\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB"}),"\n",(0,r.jsx)(e.p,{children:"\u79C1\u305F\u3061\u306E\u4F5C\u696D\u74B0\u5883\u306F\u305D\u308C\u307B\u3069\u8907\u96D1\u3067\u306F\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u3044\u304F\u3064\u304B\u306E\u30D1\u30C3\u30B1\u30FC\u30B8\u4E92\u63DB\u6027\u306E\u554F\u984C\u306B\u906D\u9047\u3059\u308B\u3053\u3068\u3082\u3042\u308A\u307E\u3059\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u7C21\u5358\u306B\u8A00\u3046\u3068\u3001\u901A\u5E38\u306F\u6B21\u306E\u3088\u3046\u306B\u5206\u3051\u3089\u308C\u307E\u3059\uFF1A"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u74B0\u5883"}),"\uFF1APyTorch\u3001OpenCV\u3001CUDA\u3001cuDNN \u304C\u4E92\u3044\u306B\u9023\u643A\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u30C7\u30D7\u30ED\u30A4\u74B0\u5883"}),"\uFF1AONNXRuntime\u3001OpenCV\u3001CUDA \u304C\u4E92\u3044\u306B\u9023\u643A\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u305D\u306E\u4E2D\u3067\u6700\u3082\u3088\u304F\u767A\u751F\u3059\u308B\u885D\u7A81\u306F\u3001PyTorch-CUDA \u3068 ONNXRuntime-CUDA \u306E\u30D0\u30FC\u30B8\u30E7\u30F3\u306E\u554F\u984C\u3067\u3059\u3002"}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsx)(e.p,{children:"\u306A\u305C\u3053\u308C\u3089\u306F\u3044\u3064\u3082\u4E00\u81F4\u3057\u306A\u3044\u306E\u3067\u3057\u3087\u3046\u304B\uFF1F \uD83D\uDCA2 \uD83D\uDCA2 \uD83D\uDCA2"})}),"\n",(0,r.jsx)(e.h2,{id:"docker-\u3092\u4F7F\u3044\u307E\u3057\u3087\u3046",children:"Docker \u3092\u4F7F\u3044\u307E\u3057\u3087\u3046\uFF01"}),"\n",(0,r.jsx)(e.p,{children:"\u79C1\u305F\u3061\u306F\u3059\u3079\u3066 Docker \u3092\u4F7F\u7528\u3057\u3066\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3092\u884C\u3044\u3001\u74B0\u5883\u306E\u4E00\u8CAB\u6027\u3092\u78BA\u4FDD\u3057\u3066\u3044\u307E\u3059\u3001\u4F8B\u5916\u306F\u3042\u308A\u307E\u305B\u3093\u3002"}),"\n",(0,r.jsx)(e.p,{children:"Docker \u3092\u4F7F\u7528\u3059\u308B\u3053\u3068\u3067\u3001\u74B0\u5883\u3092\u8ABF\u6574\u3059\u308B\u6642\u9593\u3092\u5927\u5E45\u306B\u7BC0\u7D04\u3067\u304D\u3001\u4E0D\u8981\u306A\u554F\u984C\u3092\u56DE\u907F\u3067\u304D\u307E\u3059\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u95A2\u9023\u3059\u308B\u74B0\u5883\u306F\u958B\u767A\u4E2D\u306B\u3082\u7D99\u7D9A\u7684\u306B\u30C6\u30B9\u30C8\u3057\u3066\u304A\u308A\u3001\u4EE5\u4E0B\u306E\u30B3\u30DE\u30F3\u30C9\u3092\u4F7F\u7528\u3059\u308B\u3060\u3051\u3067\u3059\uFF1A"}),"\n",(0,r.jsx)(e.h3,{id:"\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",children:"\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"cd DocsaidKit\nbash docker/build.bash\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u300C\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u74B0\u5883\u300D\u3067\u306F\u3001",(0,r.jsx)(e.code,{children:"nvcr.io/nvidia/pytorch:24.05-py3"}),"\u3092\u30D9\u30FC\u30B9\u30A4\u30E1\u30FC\u30B8\u3068\u3057\u3066\u4F7F\u7528\u3057\u3066\u3044\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u30E6\u30FC\u30B6\u30FC\u306F\u81EA\u8EAB\u306E\u30CB\u30FC\u30BA\u306B\u5FDC\u3058\u3066\u5909\u66F4\u3067\u304D\u307E\u3059\u3002\u305D\u306E\u969B\u3001\u5F8C\u308D\u306E\u756A\u53F7\uFF08\u4F8B\u3048\u3070\uFF1A24.05\uFF09\u306F\u6642\u9593\u3068\u3068\u3082\u306B\u66F4\u65B0\u3055\u308C\u307E\u3059\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u30A4\u30E1\u30FC\u30B8\u306E\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001\u4EE5\u4E0B\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A",(0,r.jsx)(e.a,{href:"https://docs.nvidia.com/deeplearning/frameworks/pytorch-release-notes/index.html",children:(0,r.jsx)(e.strong,{children:"PyTorch \u30EA\u30EA\u30FC\u30B9\u30CE\u30FC\u30C8"})})]}),"\n",(0,r.jsxs)(e.p,{children:["\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u30E2\u30B8\u30E5\u30FC\u30EB\u306B\u5408\u308F\u305B\u305F\u3044\u5834\u5408\u306F\u3001\u30B3\u30F3\u30D1\u30A4\u30EB\u304C\u5B8C\u4E86\u3057\u305F\u5F8C\u306B",(0,r.jsx)(e.code,{children:"docsaid_training_base_image"}),"\u3092\u30D9\u30FC\u30B9\u30A4\u30E1\u30FC\u30B8\u3068\u3057\u3066\u4F7F\u7528\u3057\u3066\u4E8C\u6B21\u958B\u767A\u3092\u884C\u3046\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsx)(e.p,{children:"\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u6642\u306B\u306F\u901A\u5E38 ONNXRuntime \u306F\u5FC5\u8981\u3042\u308A\u307E\u305B\u3093\u3002CUDA \u306E\u554F\u984C\u304C\u767A\u751F\u3057\u305F\u5834\u5408\u3067\u3082\u3001ONNXRuntime \u306F\u81EA\u52D5\u7684\u306B CPU \u30E2\u30FC\u30C9\u306B\u5207\u308A\u66FF\u3048\u3066\u5B9F\u884C\u3067\u304D\u307E\u3059\u3002"})}),"\n",(0,r.jsx)(e.h3,{id:"\u63A8\u8AD6\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",children:"\u63A8\u8AD6\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"cd DocsaidKit\nbash docker/build_infer.bash\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u300C\u63A8\u8AD6\u74B0\u5883\u300D\u3067\u306F\u3001",(0,r.jsx)(e.code,{children:"nvcr.io/nvidia/cuda:11.8.0-cudnn8-runtime-ubuntu22.04"}),"\u3092\u30D9\u30FC\u30B9\u30A4\u30E1\u30FC\u30B8\u3068\u3057\u3066\u4F7F\u7528\u3057\u3066\u3044\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u3053\u306E\u30A4\u30E1\u30FC\u30B8\u306F\u30E2\u30C7\u30EB\u3092\u30C7\u30D7\u30ED\u30A4\u3059\u308B\u305F\u3081\u306B\u7279\u5316\u3057\u3066\u3044\u308B\u305F\u3081\u3001\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u74B0\u5883\u306E\u30D1\u30C3\u30B1\u30FC\u30B8\u306F\u542B\u307E\u308C\u3066\u304A\u3089\u305A\u3001PyTorch \u306E\u3088\u3046\u306A\u30D1\u30C3\u30B1\u30FC\u30B8\u306F\u542B\u307E\u308C\u3066\u3044\u307E\u305B\u3093\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u30E6\u30FC\u30B6\u30FC\u306F\u81EA\u8EAB\u306E\u30CB\u30FC\u30BA\u306B\u5FDC\u3058\u3066\u5909\u66F4\u3067\u304D\u307E\u3059\u3002\u95A2\u9023\u3059\u308B\u30D0\u30FC\u30B8\u30E7\u30F3\u306F ONNXRuntime \u306E\u66F4\u65B0\u306B\u4F34\u3044\u5909\u66F4\u3055\u308C\u308B\u3053\u3068\u304C\u3042\u308A\u307E\u3059\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u63A8\u8AD6\u30B7\u30EA\u30FC\u30BA\u7528\u306E\u30A4\u30E1\u30FC\u30B8\u306B\u3064\u3044\u3066\u306F\u3001\u4EE5\u4E0B\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A",(0,r.jsx)(e.a,{href:"https://ngc.nvidia.com/catalog/containers/nvidia:cuda",children:(0,r.jsx)(e.strong,{children:"NVIDIA NGC"})})]}),"\n",(0,r.jsx)(e.h2,{id:"\u4F7F\u7528\u65B9\u6CD5",children:"\u4F7F\u7528\u65B9\u6CD5"}),"\n",(0,r.jsxs)(e.p,{children:["\u4E00\u822C\u7684\u306B\u3001\u79C1\u305F\u3061\u306F\u3053\u306E\u30E2\u30B8\u30E5\u30FC\u30EB\u3092",(0,r.jsx)(e.code,{children:"DocAligner"}),"\u306E\u3088\u3046\u306A\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3068\u7D44\u307F\u5408\u308F\u305B\u3066\u4F7F\u7528\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"\u65E5\u5E38\u7684\u306A\u4F7F\u7528",children:"\u65E5\u5E38\u7684\u306A\u4F7F\u7528"}),"\n",(0,r.jsxs)(e.p,{children:["\u4EE5\u4E0B\u306B\u4F8B\u3092\u793A\u3057\u307E\u3059\u3002\u4EEE\u306B",(0,r.jsx)(e.code,{children:"your_scripts.py"}),"\u3068\u3044\u3046\u30D5\u30A1\u30A4\u30EB\u304C\u3042\u308A\u3001\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3092 Python \u3067\u5B9F\u884C\u3059\u308B\u5FC5\u8981\u304C\u3042\u308B\u3068\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u63A8\u8AD6\u74B0\u5883\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u304C\u5B8C\u4E86\u3057\u3066\u3044\u308B\u3068\u4EEE\u5B9A\u3057\u3001\u6B21\u306B",(0,r.jsx)(e.code,{children:"Dockerfile"}),"\u3092\u4F5C\u6210\u3057\u307E\u3059\uFF1A"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-Dockerfile",metastring:'title="your_Dockerfile"',children:'# syntax=docker/dockerfile:experimental\nFROM docsaid_infer_image:latest\n\n# \u4F5C\u696D\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u3092\u8A2D\u5B9A\u3057\u307E\u3059\u3002\u30E6\u30FC\u30B6\u30FC\u306F\u81EA\u5206\u306E\u30CB\u30FC\u30BA\u306B\u5FDC\u3058\u3066\u5909\u66F4\u3067\u304D\u307E\u3059\u3002\nWORKDIR /code\n\n# \u4F8B\uFF1ADocAligner\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\nRUN git clone https://github.com/DocsaidLab/DocAligner.git && \\\n    cd DocAligner && \\\n    python setup.py bdist_wheel && \\\n    pip install dist/*.whl && \\\n    cd .. && rm -rf DocAligner\n\nENTRYPOINT ["python"]\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u6B21\u306B\u3053\u306E\u30A4\u30E1\u30FC\u30B8\u3092\u4F5C\u6210\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"docker build -f your_Dockerfile -t your_image_name .\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4F5C\u6210\u5F8C\u3001\u4F7F\u7528\u3059\u308B\u969B\u306F\u4EE5\u4E0B\u306E\u3088\u3046\u306B\u30B3\u30DE\u30F3\u30C9\u3092 Docker \u5185\u3067\u5B9F\u884C\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"#!/bin/bash\ndocker run \\\n    --gpus all \\\n    -v ${PWD}:/code \\\n    -it --rm your_image_name your_scripts.py\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u3053\u308C\u3067\u3001\u30E9\u30C3\u30D7\u3055\u308C\u305F Python \u74B0\u5883\u3092\u76F4\u63A5\u547C\u3073\u51FA\u3059\u3053\u3068\u306B\u306A\u308A\u3001\u74B0\u5883\u306E\u4E00\u8CAB\u6027\u3082\u4FDD\u8A3C\u3055\u308C\u307E\u3059\u3002"}),"\n",(0,r.jsxs)(e.admonition,{type:"tip",children:[(0,r.jsxs)(e.p,{children:["\u3082\u3057 Python \u3092\u8D77\u52D5\u305B\u305A\u306B\u30B3\u30F3\u30C6\u30CA\u306B\u5165\u308B\u3053\u3068\u3092\u671B\u3080\u5834\u5408\u306F\u3001\u30A8\u30F3\u30C8\u30EA\u30FC\u30DD\u30A4\u30F3\u30C8\u3092",(0,r.jsx)(e.code,{children:"/bin/bash"}),"\u306B\u5909\u66F4\u3057\u3066\u304F\u3060\u3055\u3044\u3002"]}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-Dockerfile",children:'ENTRYPOINT ["/bin/bash"]\n'})})]}),"\n",(0,r.jsx)(e.h3,{id:"gosu-\u8A2D\u5B9A\u306E\u5C0E\u5165",children:"gosu \u8A2D\u5B9A\u306E\u5C0E\u5165"}),"\n",(0,r.jsx)(e.p,{children:"\u3082\u3057 Docker \u3092\u5B9F\u884C\u3057\u3066\u3044\u308B\u969B\u306B\u6A29\u9650\u306E\u554F\u984C\u304C\u767A\u751F\u3057\u305F\u5834\u5408\uFF1A"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsxs)(e.strong,{children:["\u4F8B\u3048\u3070\u3001\u30B3\u30F3\u30C6\u30CA\u5185\u3067\u30D5\u30A1\u30A4\u30EB\u3084\u753B\u50CF\u3092\u51FA\u529B\u3059\u308B\u3068\u3001\u305D\u306E\u6A29\u9650\u304C root",":root"," \u306B\u306A\u3063\u3066\u304A\u308A\u3001\u5909\u66F4\u3084\u524A\u9664\u304C\u9762\u5012\u306B\u306A\u308B\u3053\u3068\u304C\u3042\u308A\u307E\u3059\uFF01"]})}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u305D\u306E\u5834\u5408\u3001",(0,r.jsx)(e.code,{children:"gosu"}),"\u3068\u3044\u3046\u30C4\u30FC\u30EB\u3092\u4F7F\u3046\u3053\u3068\u3092\u304A\u52E7\u3081\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"gosu"}),"\u3092\u4F7F\u7528\u3059\u308B\u65B9\u6CD5\u306B\u57FA\u3065\u3044\u3066\u3001\u5143\u306E Dockerfile \u3092\u4EE5\u4E0B\u306E\u3088\u3046\u306B\u5909\u66F4\u3057\u307E\u3059\uFF1A"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-Dockerfile",metastring:'title="your_Dockerfile"',children:'# syntax=docker/dockerfile:experimental\nFROM docsaid_infer_image:latest\n\n# \u4F5C\u696D\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u3092\u8A2D\u5B9A\uFF08\u30E6\u30FC\u30B6\u30FC\u306F\u30CB\u30FC\u30BA\u306B\u5FDC\u3058\u3066\u5909\u66F4\u53EF\u80FD\uFF09\nWORKDIR /code\n\n# \u4F8B\uFF1ADocAligner\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\nRUN git clone https://github.com/DocsaidLab/DocAligner.git && \\\n    cd DocAligner && \\\n    python setup.py bdist_wheel && \\\n    pip install dist/*.whl && \\\n    cd .. && rm -rf DocAligner\n\n# \u30A8\u30F3\u30C8\u30EA\u30FC\u30DD\u30A4\u30F3\u30C8\u30B9\u30AF\u30EA\u30D7\u30C8\u306E\u30D1\u30B9\u3092\u8A2D\u5B9A\nENV ENTRYPOINT_SCRIPT=/entrypoint.sh\n\n# gosu\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\nRUN apt-get update && apt-get install -y gosu && rm -rf /var/lib/apt/lists/*\n\n# \u30A8\u30F3\u30C8\u30EA\u30FC\u30DD\u30A4\u30F3\u30C8\u30B9\u30AF\u30EA\u30D7\u30C8\u3092\u4F5C\u6210\nRUN printf \'#!/bin/bash\\n\\\n    if [ ! -z "$USER_ID" ] && [ ! -z "$GROUP_ID" ]; then\\n\\\n    groupadd -g "$GROUP_ID" -o usergroup\\n\\\n    useradd --shell /bin/bash -u "$USER_ID" -g "$GROUP_ID" -o -c "" -m user\\n\\\n    export HOME=/home/user\\n\\\n    chown -R "$USER_ID":"$GROUP_ID" /home/user\\n\\\n    chown -R "$USER_ID":"$GROUP_ID" /code\\n\\\n    fi\\n\\\n    \\n\\\n    # \u5F15\u6570\u304C\u3042\u308B\u304B\u3069\u3046\u304B\u78BA\u8A8D\\n\\\n    if [ $# -gt 0 ]; then\\n\\\n    exec gosu ${USER_ID:-0}:${GROUP_ID:-0} python "$@"\\n\\\n    else\\n\\\n    exec gosu ${USER_ID:-0}:${GROUP_ID:-0} bash\\n\\\n    fi\' > "$ENTRYPOINT_SCRIPT"\n\n# \u6A29\u9650\u3092\u4ED8\u4E0E\nRUN chmod +x "$ENTRYPOINT_SCRIPT"\n\n# \u30A8\u30F3\u30C8\u30EA\u30FC\u30DD\u30A4\u30F3\u30C8\nENTRYPOINT ["/bin/bash", "/entrypoint.sh"]\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u6B21\u306B\u3053\u306E\u30A4\u30E1\u30FC\u30B8\u3092\u4F5C\u6210\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"docker build -f your_Dockerfile -t your_image_name .\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4F5C\u6210\u5F8C\u3001\u4F7F\u7528\u3059\u308B\u969B\u306B\u306F\u4EE5\u4E0B\u306E\u3088\u3046\u306B\u30B3\u30DE\u30F3\u30C9\u3092 Docker \u5185\u3067\u5B9F\u884C\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"#!/bin/bash\ndocker run \\\n    -e USER_ID=$(id -u) \\\n    -e GROUP_ID=$(id -g) \\\n    --gpus all \\\n    -v ${PWD}:/code \\\n    -it --rm your_image_name your_scripts.py\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u5185\u90E8\u30D1\u30C3\u30B1\u30FC\u30B8\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",children:"\u5185\u90E8\u30D1\u30C3\u30B1\u30FC\u30B8\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB"}),"\n",(0,r.jsx)(e.p,{children:"\u3082\u3057\u30A4\u30E1\u30FC\u30B8\u306E\u30D3\u30EB\u30C9\u6642\u306B\u5185\u90E8\u30D1\u30C3\u30B1\u30FC\u30B8\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3059\u308B\u5FC5\u8981\u304C\u3042\u308B\u5834\u5408\u3001\u74B0\u5883\u5909\u6570\u3092\u8FFD\u52A0\u3067\u6E21\u3059\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-Dockerfile",metastring:'title="your_Dockerfile"',children:'# syntax=docker/dockerfile:experimental\nFROM docsaid_infer_image:latest\n\n# \u4F5C\u696D\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u3092\u8A2D\u5B9A\uFF08\u30E6\u30FC\u30B6\u30FC\u306F\u30CB\u30FC\u30BA\u306B\u5FDC\u3058\u3066\u5909\u66F4\u53EF\u80FD\uFF09\nWORKDIR /code\n\n# \u4F8B\uFF1ADocAligner\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\uFF08\u5185\u90E8\u30D1\u30C3\u30B1\u30FC\u30B8\u306E\u4EEE\u5B9A\uFF09\n\n# \u74B0\u5883\u5909\u6570\u3092\u8FFD\u52A0\nARG PYPI_ACCOUNT\nARG PYPI_PASSWORD\n\n# \u5185\u90E8\u30D1\u30C3\u30B1\u30FC\u30B8\u30BD\u30FC\u30B9\u3092\u8A2D\u5B9A\nENV SERVER_IP=192.168.100.100:28080/simple/\n\n# docaligner\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\n# \u30D1\u30C3\u30B1\u30FC\u30B8\u30B5\u30FC\u30D0\u30FC\u306E\u30A2\u30C9\u30EC\u30B9\u3092\u5909\u66F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\nRUN python -m pip install \\\n    --trusted-host 192.168.100.100 \\\n    --index-url http://${PYPI_ACCOUNT}:${PYPI_PASSWORD}@192.168.100.100:16000/simple docaligner\n\nENTRYPOINT ["python"]\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u6B21\u306B\u3053\u306E\u30A4\u30E1\u30FC\u30B8\u3092\u4F5C\u6210\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"docker build \\\n    -f your_Dockerfile \\\n    --build-arg PYPI_ACCOUNT=your_account \\\n    --build-arg PYPI_PASSWORD=your_password \\\n    -t your_image_name .\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u3082\u3057\u30A2\u30AB\u30A6\u30F3\u30C8\u3068\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u5225\u306E\u5834\u6240\u306B\u4FDD\u5B58\u3055\u308C\u3066\u3044\u308B\u5834\u5408\uFF08\u4F8B\u3048\u3070",(0,r.jsx)(e.code,{children:"pip.conf"}),"\u30D5\u30A1\u30A4\u30EB\u306B\uFF09\u3001\u6587\u5B57\u5217\u89E3\u6790\u3092\u7528\u3044\u3066\u74B0\u5883\u5909\u6570\u3092\u6E21\u3059\u3053\u3068\u3082\u3067\u304D\u307E\u3059\uFF1A"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"docker build \\\n    -f your_Dockerfile \\\n    --build-arg PYPI_PASSWORD=$(awk -F '://|@' '/index-url/{print $2}' your/config/path/pip.conf | cut -d: -f2) \\\n    -t your_image_name .\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u4F5C\u6210\u5F8C\u3001\u4F7F\u7528\u3059\u308B\u969B\u306F\u540C\u3058\u65B9\u6CD5\u3067\u30B3\u30DE\u30F3\u30C9\u3092 Docker \u5185\u3067\u5B9F\u884C\u3067\u304D\u307E\u3059\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u3088\u304F\u3042\u308B\u8CEA\u554F",children:"\u3088\u304F\u3042\u308B\u8CEA\u554F"}),"\n",(0,r.jsx)(e.h3,{id:"permission-denied",children:"Permission denied"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"gosu"}),"\u3092\u4F7F\u7528\u3057\u3066\u30E6\u30FC\u30B6\u30FC\u3092\u5207\u308A\u66FF\u3048\u305F\u5F8C\u3001\u6A29\u9650\u304C\u5236\u9650\u3055\u308C\u3066\u3044\u308B\u7BC4\u56F2\u5185\u3067\u3001\u30B3\u30F3\u30C6\u30CA\u5185\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u8AAD\u307F\u66F8\u304D\u3059\u308B\u969B\u306B\u6A29\u9650\u306E\u554F\u984C\u304C\u767A\u751F\u3059\u308B\u3053\u3068\u304C\u3042\u308A\u307E\u3059\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u4F8B\u3048\u3070\u3001",(0,r.jsx)(e.code,{children:"DocAligner"}),"\u30D1\u30C3\u30B1\u30FC\u30B8\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3057\u305F\u5834\u5408\u3001\u3053\u306E\u30D1\u30C3\u30B1\u30FC\u30B8\u306F\u30E2\u30C7\u30EB\u3092\u8D77\u52D5\u3059\u308B\u969B\u306B\u81EA\u52D5\u7684\u306B\u30E2\u30C7\u30EB\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u3001Python \u95A2\u9023\u306E\u30D5\u30A9\u30EB\u30C0\u306B\u683C\u7D0D\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u4E0A\u8A18\u306E\u4F8B\u3067\u306F\u3001\u30E2\u30C7\u30EB\u30D5\u30A1\u30A4\u30EB\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u4FDD\u5B58\u5834\u6240\u306F\u6B21\u306E\u901A\u308A\u3067\u3059\uFF1A"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"/usr/local/lib/python3.10/dist-packages/docaligner/heatmap_reg/ckpt"})}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"\u3053\u306E\u30D1\u30B9\u306F\u660E\u3089\u304B\u306B\u30E6\u30FC\u30B6\u30FC\u306E\u6A29\u9650\u7BC4\u56F2\u5916\u3067\u3059\uFF01"}),"\n",(0,r.jsx)(e.p,{children:"\u3057\u305F\u304C\u3063\u3066\u3001\u30B3\u30F3\u30C6\u30CA\u3092\u8D77\u52D5\u3059\u308B\u969B\u306B\u3001\u3053\u306E\u30D1\u30B9\u3092\u30E6\u30FC\u30B6\u30FC\u306B\u4ED8\u4E0E\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002\u4EE5\u4E0B\u306E\u3088\u3046\u306B Dockerfile \u3092\u5909\u66F4\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-Dockerfile",metastring:'title="your_Dockerfile" {28}',children:'# syntax=docker/dockerfile:experimental\nFROM docsaid_infer_image:latest\n\n# \u4F5C\u696D\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u3092\u8A2D\u5B9A\uFF08\u30E6\u30FC\u30B6\u30FC\u306F\u30CB\u30FC\u30BA\u306B\u5FDC\u3058\u3066\u5909\u66F4\u53EF\u80FD\uFF09\nWORKDIR /code\n\n# \u4F8B\uFF1ADocAligner\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\nRUN git clone https://github.com/DocsaidLab/DocAligner.git && \\\n    cd DocAligner && \\\n    python setup.py bdist_wheel && \\\n    pip install dist/*.whl && \\\n    cd .. && rm -rf DocAligner\n\n# \u30A8\u30F3\u30C8\u30EA\u30FC\u30DD\u30A4\u30F3\u30C8\u30B9\u30AF\u30EA\u30D7\u30C8\u306E\u30D1\u30B9\u3092\u8A2D\u5B9A\nENV ENTRYPOINT_SCRIPT=/entrypoint.sh\n\n# gosu\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\nRUN apt-get update && apt-get install -y gosu && rm -rf /var/lib/apt/lists/*\n\n# \u30A8\u30F3\u30C8\u30EA\u30FC\u30DD\u30A4\u30F3\u30C8\u30B9\u30AF\u30EA\u30D7\u30C8\u3092\u4F5C\u6210\nRUN printf \'#!/bin/bash\\n\\\n    if [ ! -z "$USER_ID" ] && [ ! -z "$GROUP_ID" ]; then\\n\\\n    groupadd -g "$GROUP_ID" -o usergroup\\n\\\n    useradd --shell /bin/bash -u "$USER_ID" -g "$GROUP_ID" -o -c "" -m user\\n\\\n    export HOME=/home/user\\n\\\n    chown -R "$USER_ID":"$GROUP_ID" /home/user\\n\\\n    chown -R "$USER_ID":"$GROUP_ID" /code\\n\\\n    chmod -R 777 /usr/local/lib/python3.10/dist-packages\\n\\\n    fi\\n\\\n    \\n\\\n    # \u5F15\u6570\u304C\u3042\u308B\u304B\u3069\u3046\u304B\u78BA\u8A8D\\n\\\n    if [ $# -gt 0 ]; then\\n\\\n    exec gosu ${USER_ID:-0}:${GROUP_ID:-0} python "$@"\\n\\\n    else\\n\\\n    exec gosu ${USER_ID:-0}:${GROUP_ID:-0} bash\\n\\\n    fi\' > "$ENTRYPOINT_SCRIPT"\n\n# \u6A29\u9650\u3092\u4ED8\u4E0E\nRUN chmod +x "$ENTRYPOINT_SCRIPT"\n\n# \u30A8\u30F3\u30C8\u30EA\u30FC\u30DD\u30A4\u30F3\u30C8\nENTRYPOINT ["/bin/bash", "/entrypoint.sh"]\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u3053\u306E\u65B9\u6CD5\u3067\u3001\u4ED6\u306E\u4F3C\u305F\u3088\u3046\u306A\u554F\u984C\u3082\u89E3\u6C7A\u3067\u304D\u307E\u3059\u3002"})]})}function h(n={}){let{wrapper:e}={...(0,c.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},50065:function(n,e,i){i.d(e,{Z:function(){return d},a:function(){return l}});var s=i(67294);let r={},c=s.createContext(r);function l(n){let e=s.useContext(c);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);