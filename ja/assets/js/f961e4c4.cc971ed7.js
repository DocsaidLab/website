"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["56763"],{91731:function(n,e,o){o.r(e),o.d(e,{assets:()=>a,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var i=o(46681),r=o(85893),t=o(50065);let l={slug:"download-from-google-drive-using-python",title:"Python\u3067Google Drive\u304B\u3089\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3059\u308B",authors:"Z. Yuan",image:"/ja/img/2025/0219.webp",tags:["python","google-drive","download"],description:"\u5C0F\u3055\u306A\u30D5\u30A1\u30A4\u30EB\u3082\u5927\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u3082\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u3059\u3002"},s=void 0,a={authorsImageUrls:[void 0]},d=[{value:"\u306A\u305C HTML \u3060\u3051\u304C\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3055\u308C\u308B\u306E\u304B\uFF1F",id:"\u306A\u305C-html-\u3060\u3051\u304C\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3055\u308C\u308B\u306E\u304B",level:2},{value:"\u89E3\u6C7A\u65B9\u6CD5\uFF1A\u4E8C\u56DE\u76EE\u306E\u30EA\u30AF\u30A8\u30B9\u30C8",id:"\u89E3\u6C7A\u65B9\u6CD5\u4E8C\u56DE\u76EE\u306E\u30EA\u30AF\u30A8\u30B9\u30C8",level:2},{value:"\u30B3\u30FC\u30C9\u5B9F\u88C5",id:"\u30B3\u30FC\u30C9\u5B9F\u88C5",level:2},{value:"\u4F7F\u7528\u65B9\u6CD5",id:"\u4F7F\u7528\u65B9\u6CD5",level:2},{value:"\u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\u30C4\u30FC\u30EB",id:"\u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\u30C4\u30FC\u30EB",level:2}];function c(n){let e={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"\u79C1\u305F\u3061\u306F Google Drive \u304B\u3089\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3059\u308B Python \u30D7\u30ED\u30B0\u30E9\u30E0\u3092\u4F5C\u6210\u3057\u307E\u3057\u305F\u304C\u3001\u6642\u3005\u306F\u3046\u307E\u304F\u3044\u304F\u306E\u306B\u3001\u6642\u3005\u306F\u610F\u5473\u4E0D\u660E\u306A HTML \u3060\u3051\u304C\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3055\u308C\u3066\u3057\u307E\u3046\u3053\u3068\u304C\u3042\u308A\u307E\u3059\u2026\uFF1F"}),"\n",(0,r.jsx)(e.p,{children:"\u3053\u308C\u306F\u78BA\u5B9F\u306B\u30D7\u30ED\u30B0\u30E9\u30E0\u306B\u554F\u984C\u304C\u3042\u308A\u307E\u3059\u306E\u3067\u3001\u4FEE\u6B63\u304C\u5FC5\u8981\u3067\u3059\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u306A\u305C-html-\u3060\u3051\u304C\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3055\u308C\u308B\u306E\u304B",children:"\u306A\u305C HTML \u3060\u3051\u304C\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3055\u308C\u308B\u306E\u304B\uFF1F"}),"\n",(0,r.jsx)(e.p,{children:"Google Drive \u306B GET \u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u9001\u4FE1\u3057\u3066\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u3088\u3046\u3068\u3059\u308B\u3068\u3001\u30D5\u30A1\u30A4\u30EB\u304C\u5C0F\u3055\u3044\uFF08\u901A\u5E38 100MB \u672A\u6E80\uFF09\u5834\u5408\u3001Google \u306F\u76F4\u63A5\u30D5\u30A1\u30A4\u30EB\u5185\u5BB9\u3092\u8FD4\u3057\u3001\u554F\u984C\u306A\u304F\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u3059\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u3057\u304B\u3057\u3001\u30D5\u30A1\u30A4\u30EB\u304C\u5927\u304D\u3044\u5834\u5408\u3001Google \u306F\u300C\u30A6\u30A4\u30EB\u30B9\u30B9\u30AD\u30E3\u30F3\u8B66\u544A\u30DA\u30FC\u30B8\u300D\u3092\u8868\u793A\u3057\u3001\u305D\u306E\u30D5\u30A1\u30A4\u30EB\u304C\u5B8C\u5168\u306B\u30B9\u30AD\u30E3\u30F3\u3055\u308C\u3066\u3044\u306A\u3044\u3053\u3068\u3092\u8B66\u544A\u3057\u3001\u30E6\u30FC\u30B6\u30FC\u306B\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3092\u78BA\u8A8D\u3059\u308B\u30DC\u30BF\u30F3\u3092\u63D0\u4F9B\u3057\u307E\u3059\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u30D6\u30E9\u30A6\u30B6\u3092\u4F7F\u7528\u3057\u3066\u3044\u308B\u5834\u5408\u3001\u624B\u52D5\u3067\u30DC\u30BF\u30F3\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u3059\u304C\u3001Python \u30D7\u30ED\u30B0\u30E9\u30E0\u3092\u4F7F\u7528\u3057\u3066\u3044\u308B\u5834\u5408\u3001\u8FFD\u52A0\u306E\u30E1\u30AB\u30CB\u30BA\u30E0\u3067\u30DC\u30BF\u30F3\u3092\u30AF\u30EA\u30C3\u30AF\u3059\u308B\u30B7\u30DF\u30E5\u30EC\u30FC\u30B7\u30E7\u30F3\u3092\u884C\u3063\u305F\u308A\u3001HTML \u30DA\u30FC\u30B8\u5185\u306E\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u30EA\u30F3\u30AF\u3092\u89E3\u6790\u3057\u306A\u3044\u9650\u308A\u3001\u3053\u306E\u8B66\u544A\u30DA\u30FC\u30B8\u81EA\u4F53\u306E HTML \u304C\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3055\u308C\u3066\u3057\u307E\u3044\u3001\u5B9F\u969B\u306E\u30D5\u30A1\u30A4\u30EB\u306F\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u305B\u3093\u3002"}),"\n",(0,r.jsxs)(e.admonition,{type:"info",children:[(0,r.jsx)(e.p,{children:"\u4E88\u671F\u3057\u306A\u3044 HTML \u30D5\u30A1\u30A4\u30EB\u306F\u3001\u304A\u305D\u3089\u304F\u4EE5\u4E0B\u306E\u5185\u5BB9\u306B\u306A\u308A\u307E\u3059\uFF1A"}),(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n  <head>\n    <title>Google Drive - Virus scan warning</title>\n    <meta http-equiv="content-type" content="text/html; charset=utf-8" />\n   ... \x3c!-- \u305D\u306E\u4ED6\u306EHTML\u5185\u5BB9 --\x3e\n</html>\n'})})]}),"\n",(0,r.jsx)(e.h2,{id:"\u89E3\u6C7A\u65B9\u6CD5\u4E8C\u56DE\u76EE\u306E\u30EA\u30AF\u30A8\u30B9\u30C8",children:"\u89E3\u6C7A\u65B9\u6CD5\uFF1A\u4E8C\u56DE\u76EE\u306E\u30EA\u30AF\u30A8\u30B9\u30C8"}),"\n",(0,r.jsx)(e.p,{children:"\u539F\u56E0\u304C\u308F\u304B\u3063\u305F\u306E\u3067\u3001\u6B21\u306E\u65B9\u6CD5\u3067\u89E3\u6C7A\u3067\u304D\u307E\u3059\uFF1A"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u6700\u521D\u306E\u30EA\u30AF\u30A8\u30B9\u30C8"}),"\uFF1A\u30D5\u30A1\u30A4\u30EB ID \u3092\u4F7F\u3063\u3066",(0,r.jsx)(e.code,{children:"https://docs.google.com/uc?export=download"}),"\u306B GET \u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u9001\u4FE1\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u30EC\u30B9\u30DD\u30F3\u30B9\u306E\u78BA\u8A8D"}),"\uFF1A\u3082\u3057 HTTP \u30D8\u30C3\u30C0\u30FC\u306B",(0,r.jsx)(e.code,{children:"content-disposition"}),"\u304C\u542B\u307E\u308C\u3066\u3044\u308C\u3070\u3001\u30D5\u30A1\u30A4\u30EB\u672C\u4F53\u3092\u53D6\u5F97\u3067\u304D\u305F\u3053\u3068\u306B\u306A\u308A\u307E\u3059\u306E\u3067\u3001\u305D\u306E\u307E\u307E\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u3059\u3002\u542B\u307E\u308C\u3066\u3044\u306A\u3051\u308C\u3070\u3001\u30A6\u30A4\u30EB\u30B9\u30B9\u30AD\u30E3\u30F3\u8B66\u544A\u30DA\u30FC\u30B8\u306B\u6EDE\u5728\u3057\u3066\u3044\u308B\u3053\u3068\u306B\u306A\u308B\u306E\u3067\u3001\u3082\u3046\u4E00\u5EA6\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u9001\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u78BA\u8A8D\u30C8\u30FC\u30AF\u30F3\u306E\u53D6\u5F97"}),"\uFF1A","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u30AF\u30C3\u30AD\u30FC\u304B\u3089\u53D6\u5F97"}),"\uFF1AGoogle \u306F\u30AF\u30C3\u30AD\u30FC\u5185\u306B",(0,r.jsx)(e.code,{children:"download_warning_xxxxx"}),"\u306E\u3088\u3046\u306A\u30AD\u30FC\u3092\u7F6E\u304D\u3001\u305D\u306E\u4E2D\u306B\u30C8\u30FC\u30AF\u30F3\u304C\u542B\u307E\u308C\u3066\u3044\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\u3002\u4F8B\u3048\u3070\u3001",(0,r.jsx)(e.code,{children:"token = session.cookies.get('download_warning_xxxxx')"})]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"HTML \u304B\u3089\u53D6\u5F97"}),"\uFF1A\u5834\u5408\u306B\u3088\u3063\u3066\u306F Google \u304C\u30C8\u30FC\u30AF\u30F3\u3092\u30AF\u30C3\u30AD\u30FC\u3067\u306F\u306A\u304F HTML \u306E\u30D5\u30A9\u30FC\u30E0\u5185\u306B\u7F6E\u304F\u3053\u3068\u304C\u3042\u308A\u307E\u3059\u3002\u4F8B\u3048\u3070\uFF1A","\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-html",children:'<form\n  id="download-form"\n  action="https://drive.usercontent.google.com/download"\n  method="get"\n>\n  <input type="hidden" name="confirm" value="t" />\n  ...\n</form>\n'})}),"\n","\u3053\u306E\u5834\u5408\u3001",(0,r.jsx)(e.a,{href:"https://www.crummy.com/software/BeautifulSoup/",children:(0,r.jsx)(e.strong,{children:"BeautifulSoup"})}),"\u3092\u4F7F\u3063\u3066\u3059\u3079\u3066\u306E hidden \u30D5\u30A3\u30FC\u30EB\u30C9\u3092\u53D6\u5F97\u3057\u3001",(0,r.jsx)(e.code,{children:"confirm"}),"\u3084",(0,r.jsx)(e.code,{children:"uuid"}),"\u306A\u3069\u306E\u30D1\u30E9\u30E1\u30FC\u30BF\u3092\u53D6\u5F97\u3057\u307E\u3059\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u4E8C\u56DE\u76EE\u306E\u30EA\u30AF\u30A8\u30B9\u30C8\u306E\u7D44\u307F\u5408\u308F\u305B"}),"\uFF1A",(0,r.jsx)(e.code,{children:"token"}),"\u3092\u53D6\u5F97\u3057\u305F\u5F8C\u3001\u305D\u308C\u3092\u30EA\u30AF\u30A8\u30B9\u30C8\u306B\u542B\u3081\u308B\u304B\u3001\u30D5\u30A9\u30FC\u30E0\u306E",(0,r.jsx)(e.code,{children:"action"})," URL \u3068\u5BFE\u5FDC\u3059\u308B hidden \u30D1\u30E9\u30E1\u30FC\u30BF\u3092\u5168\u3066\u542B\u3081\u3066\u3001\u518D\u5EA6\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u9001\u4FE1\u3059\u308B\u3053\u3068\u3067\u3001\u5B9F\u969B\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u3059\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u30B3\u30FC\u30C9\u5B9F\u88C5",children:"\u30B3\u30FC\u30C9\u5B9F\u88C5"}),"\n",(0,r.jsx)(e.p,{children:"\u5FC5\u8981\u306A\u30D1\u30C3\u30B1\u30FC\u30B8\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"pip install requests tqdm beautifulsoup4\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u6B21\u306B\u3001\u4EE5\u4E0B\u306E Python \u95A2\u6570\u3092\u4F7F\u7528\u3057\u3066\u3001\u30D5\u30A1\u30A4\u30EB ID\u3001\u4FDD\u5B58\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u540D\u3001\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u5F8C\u306E\u4FDD\u5B58\u5148\u30D5\u30A9\u30EB\u30C0\u3092\u6E21\u3059\u3053\u3068\u3067\u3001\u4E8C\u56DE\u76EE\u306E\u30EA\u30AF\u30A8\u30B9\u30C8\u304C\u5FC5\u8981\u304B\u3069\u3046\u304B\u3092\u81EA\u52D5\u7684\u306B\u5224\u65AD\u3057\u3001\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3092\u6210\u529F\u3055\u305B\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",metastring:'title="download_from_google.py"',children:'import os\nimport re\nimport requests\nfrom tqdm import tqdm\nfrom bs4 import BeautifulSoup\n\ndef download_from_google(file_id: str, file_name: str, target: str = "."):\n    """\n    Google Drive\u304B\u3089\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u3001\u5927\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u306E\u305F\u3081\u306B\u78BA\u8A8D\u30C8\u30FC\u30AF\u30F3\u3092\u51E6\u7406\u3057\u307E\u3059\u3002\n\n    \u5F15\u6570\uFF1A\n        file_id (str):\n            Google Drive\u304B\u3089\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3059\u308B\u30D5\u30A1\u30A4\u30EB\u306EID\u3002\n        file_name (str):\n            \u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u305F\u30D5\u30A1\u30A4\u30EB\u306E\u4FDD\u5B58\u540D\u3002\n        target (str, optional):\n            \u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3059\u308B\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u3002\u30C7\u30D5\u30A9\u30EB\u30C8\u306F\u30AB\u30EC\u30F3\u30C8\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\uFF08"."\uFF09\u3002\n\n    \u4F8B\u5916\uFF1A\n        Exception: \u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u306B\u5931\u6557\u3057\u305F\u5834\u5408\u3084\u3001\u30D5\u30A1\u30A4\u30EB\u3092\u4F5C\u6210\u3067\u304D\u306A\u3044\u5834\u5408\u3002\n\n    \u5099\u8003\uFF1A\n        \u3053\u306E\u95A2\u6570\u306F\u5C0F\u3055\u306A\u30D5\u30A1\u30A4\u30EB\u3068\u5927\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u306E\u4E21\u65B9\u3092\u51E6\u7406\u3057\u307E\u3059\u3002\u5927\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u306E\u5834\u5408\u3001Google\u306E\u78BA\u8A8D\u30C8\u30FC\u30AF\u30F3\u3092\u81EA\u52D5\u7684\u306B\u51E6\u7406\u3057\u3001\u30A6\u30A4\u30EB\u30B9\u30B9\u30AD\u30E3\u30F3\u8B66\u544A\u3084\u30D5\u30A1\u30A4\u30EB\u30B5\u30A4\u30BA\u5236\u9650\u3092\u56DE\u907F\u3057\u307E\u3059\u3002\n\n    \u4F8B\uFF1A\n        \u30AB\u30EC\u30F3\u30C8\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\uFF1A\n            download_from_google(\n                file_id="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n                file_name="example_file.txt"\n            )\n\n        \u7279\u5B9A\u306E\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\uFF1A\n            download_from_google(\n                file_id="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n                file_name="example_file.txt",\n                target="./downloads"\n            )\n    """\n    # \u6700\u521D\u306E\u8A66\u307F\uFF1Adocs.google.com/uc?export=download&id=\u30D5\u30A1\u30A4\u30EBID\n    base_url = "https://docs.google.com/uc"\n    session = requests.Session()\n    params = {\n        "export": "download",\n        "id": file_id\n    }\n    response = session.get(base_url, params=params, stream=True)\n\n    # \u3059\u3067\u306BContent-Disposition\u304C\u542B\u307E\u308C\u3066\u3044\u308C\u3070\u3001\u76F4\u63A5\u30D5\u30A1\u30A4\u30EB\u3092\u53D6\u5F97\u3067\u304D\u305F\u3053\u3068\u3092\u610F\u5473\u3057\u307E\u3059\n    if "content-disposition" not in response.headers:\n        # \u6700\u521D\u306B\u30AF\u30C3\u30AD\u30FC\u304B\u3089\u30C8\u30FC\u30AF\u30F3\u3092\u53D6\u5F97\n        token = None\n        for k, v in response.cookies.items():\n            if k.startswith("download_warning"):\n                token = v\n                break\n\n        # \u30AF\u30C3\u30AD\u30FC\u306B\u30C8\u30FC\u30AF\u30F3\u304C\u306A\u3044\u5834\u5408\u306F\u3001HTML\u304B\u3089\u89E3\u6790\n        if not token:\n            soup = BeautifulSoup(response.text, "html.parser")\n            # \u3088\u304F\u898B\u3089\u308C\u308B\u30B1\u30FC\u30B9\uFF1AHTML\u5185\u306Bform#download-form\u304C\u3042\u308B\n            download_form = soup.find("form", {"id": "download-form"})\n            if download_form and download_form.get("action"):\n                # action\u5185\u306EURL\u3092\u53D6\u5F97\u3001\u901A\u5E38\u306Fdrive.usercontent.google.com/download\n                download_url = download_form["action"]\n                # \u3059\u3079\u3066\u306Ehidden\u30D5\u30A3\u30FC\u30EB\u30C9\u3092\u53CE\u96C6\n                hidden_inputs = download_form.find_all("input", {"type": "hidden"})\n                form_params = {}\n                for inp in hidden_inputs:\n                    if inp.get("name") and inp.get("value") is not None:\n                        form_params[inp["name"]] = inp["value"]\n\n                # \u3053\u308C\u3089\u306E\u30D1\u30E9\u30E1\u30FC\u30BF\u3067\u518D\u5EA6GET\u30EA\u30AF\u30A8\u30B9\u30C8\n                # \u6CE8\u610F\uFF1A\u5143\u306Eaction\u306F\u76F8\u5BFE\u30D1\u30B9\u306E\u53EF\u80FD\u6027\u304C\u3042\u308B\u306E\u3067\u3001\u3053\u3053\u3067\u306F\u5B8C\u5168\u306AURL\u3092\u4F7F\u7528\n                response = session.get(download_url, params=form_params, stream=True)\n            else:\n                # \u3082\u3057\u304F\u306FHTML\u5185\u306B\u76F4\u63A5confirm=xxx\u304C\u542B\u307E\u308C\u3066\u3044\u308B\u3053\u3068\u3082\u3042\u308B\n                match = re.search(r\'confirm=([0-9A-Za-z-_]+)\', response.text)\n                if match:\n                    token = match.group(1)\n                    # confirm\u30C8\u30FC\u30AF\u30F3\u3092\u542B\u3081\u3066\u518D\u5EA6docs.google.com\u306B\u30EA\u30AF\u30A8\u30B9\u30C8\n                    params["confirm"] = token\n                    response = session.get(base_url, params=params, stream=True)\n                else:\n                    raise Exception("\u30EC\u30B9\u30DD\u30F3\u30B9\u5185\u3067\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u30EA\u30F3\u30AF\u307E\u305F\u306F\u78BA\u8A8D\u30D1\u30E9\u30E1\u30FC\u30BF\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u5931\u6557\u3002")\n\n        else:\n            # \u30AF\u30C3\u30AD\u30FC\u304B\u3089\u53D6\u5F97\u3057\u305F\u30C8\u30FC\u30AF\u30F3\u3092\u4F7F\u3063\u3066\u518D\u30EA\u30AF\u30A8\u30B9\u30C8\n            params["confirm"] = token\n            response = session.get(base_url, params=params, stream=True)\n\n    # \u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u5148\u306E\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u304C\u5B58\u5728\u3059\u308B\u304B\u78BA\u8A8D\n    os.makedirs(target, exist_ok=True)\n    file_path = os.path.join(target, file_name)\n\n    # \u30D5\u30A1\u30A4\u30EB\u3092chunk\u3054\u3068\u306B\u30ED\u30FC\u30AB\u30EB\u306B\u66F8\u304D\u8FBC\u307F\u3001\u9032\u884C\u72B6\u6CC1\u30D0\u30FC\u3092\u8868\u793A\n    try:\n        total_size = int(response.headers.get(\'content-length\', 0))\n        with open(file_path, "wb") as f, tqdm(\n            desc=file_name,\n            total=total_size,\n            unit="B",\n            unit_scale=True,\n            unit_divisor=1024,\n        ) as bar:\n            for chunk in response.iter_content(chunk_size=32768):\n                if chunk:\n                    f.write(chunk)\n                    bar.update(len(chunk))\n\n        print(f"\u30D5\u30A1\u30A4\u30EB\u304C\u6B63\u5E38\u306B\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3055\u308C\u307E\u3057\u305F: {file_path}")\n\n    except Exception as e:\n        raise Exception(f"\u30D5\u30A1\u30A4\u30EB\u306E\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u306B\u5931\u6557\u3057\u307E\u3057\u305F: {e}")\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u4F7F\u7528\u65B9\u6CD5",children:"\u4F7F\u7528\u65B9\u6CD5"}),"\n",(0,r.jsxs)(e.p,{children:["\u30D5\u30A1\u30A4\u30EB ID \u304C",(0,r.jsx)(e.code,{children:"YOUR_FILE_ID"}),"\u3067\u3001",(0,r.jsx)(e.code,{children:"big_model.onnx"}),"\u3068\u3044\u3046\u540D\u524D\u3067",(0,r.jsx)(e.code,{children:"./models"}),"\u30D5\u30A9\u30EB\u30C0\u306B\u4FDD\u5B58\u3059\u308B\u5834\u5408\u3001\u4EE5\u4E0B\u306E\u3088\u3046\u306B\u547C\u3073\u51FA\u3057\u307E\u3059\uFF1A"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:'download_from_google(\n    file_id="YOUR_FILE_ID",\n    file_name="big_model.onnx",\n    target="./models"\n)\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u5B8C\u4E86\u5F8C\u3001",(0,r.jsx)(e.code,{children:"./models"}),"\u30D5\u30A9\u30EB\u30C0\u306B",(0,r.jsx)(e.code,{children:"big_model.onnx"}),"\u304C\u6B63\u5E38\u306B\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3055\u308C\u3001\u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\u3067\u9032\u884C\u72B6\u6CC1\u304C\u8868\u793A\u3055\u308C\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(e.h2,{id:"\u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\u30C4\u30FC\u30EB",children:"\u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\u30C4\u30FC\u30EB"}),"\n",(0,r.jsx)(e.p,{children:"\u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\u3067\u64CD\u4F5C\u3057\u305F\u3044\u5834\u5408\u3001\u6B21\u306E\u3088\u3046\u306B\u30B3\u30FC\u30C9\u3092\u8FFD\u52A0\u3057\u3066\u30E9\u30C3\u30D7\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",metastring:'title="download_from_google_cli.py"',children:'from download_from_google import download_from_google\nimport argparse\n\ndef main():\n    parser = argparse.ArgumentParser(description="Google Drive\u304B\u3089\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u307E\u3059\u3002")\n    parser.add_argument("--file-id", required=True, help="Google Drive\u306E\u30D5\u30A1\u30A4\u30EBID\u3002")\n    parser.add_argument("--file-name", required=True, help="\u51FA\u529B\u30D5\u30A1\u30A4\u30EB\u540D\u3002")\n    parser.add_argument("--target", default=".", help="\u51FA\u529B\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u3002\u30C7\u30D5\u30A9\u30EB\u30C8\u306F\u30AB\u30EC\u30F3\u30C8\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u3002")\n    args = parser.parse_args()\n\n    download_from_google(file_id=args.file_id, file_name=args.file_name, target=args.target)\n\nif __name__ == "__main__":\n    main()\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u3053\u306E\u30B3\u30FC\u30C9\u3092",(0,r.jsx)(e.code,{children:"download_from_google_cli.py"}),"\u3068\u3057\u3066\u4FDD\u5B58\u3059\u308C\u3070\u3001\u6B21\u306E\u3088\u3046\u306B\u30B3\u30DE\u30F3\u30C9\u30E9\u30A4\u30F3\u304B\u3089\u5B9F\u884C\u3067\u304D\u307E\u3059\uFF1A"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"python download_from_google_cli.py \\\n --file-id YOUR_FILE_ID \\\n --file-name big_model.onnx \\\n --target ./models\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u7279\u306B\u554F\u984C\u304C\u306A\u3051\u308C\u3070\u3001\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u304C\u958B\u59CB\u3055\u308C\u3001\u9032\u884C\u72B6\u6CC1\u304C\u8868\u793A\u3055\u308C\u307E\u3059\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u79C1\u305F\u3061\u306F 70MB \u304A\u3088\u3073 900MB \u306E\u30D5\u30A1\u30A4\u30EB\u3067\u30C6\u30B9\u30C8\u3057\u307E\u3057\u305F\u304C\u3001\u3069\u3061\u3089\u3082\u6B63\u5E38\u306B\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u3057\u305F\u3002900GB \u306E\u30D5\u30A1\u30A4\u30EB\u306B\u3064\u3044\u3066\u306F\u2026\uFF08\uD83E\uDD14 \uD83E\uDD14 \uD83E\uDD14\uFF09"}),"\n",(0,r.jsx)(e.p,{children:"\u8A66\u3057\u305F\u3053\u3068\u306F\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u305D\u306E\u3088\u3046\u306A\u5927\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u306F\u624B\u5143\u306B\u3042\u308A\u307E\u305B\u3093\u306E\u3067\u3001\u307E\u305F\u5F8C\u65E5\u6A5F\u4F1A\u304C\u3042\u308C\u3070\u66F4\u65B0\u3057\u307E\u3059\uFF01"})]})}function m(n={}){let{wrapper:e}={...(0,t.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}},50065:function(n,e,o){o.d(e,{Z:()=>s,a:()=>l});var i=o(67294);let r={},t=i.createContext(r);function l(n){let e=i.useContext(t);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),i.createElement(t.Provider,{value:e},n.children)}},46681:function(n){n.exports=JSON.parse('{"permalink":"/ja/blog/download-from-google-drive-using-python","source":"@site/i18n/ja/docusaurus-plugin-content-blog/2025/02-19-download-from-google-drive-by-python/index.md","title":"Python\u3067Google Drive\u304B\u3089\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3059\u308B","description":"\u5C0F\u3055\u306A\u30D5\u30A1\u30A4\u30EB\u3082\u5927\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u3082\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u3059\u3002","date":"2025-02-19T00:00:00.000Z","tags":[{"inline":true,"label":"python","permalink":"/ja/blog/tags/python"},{"inline":true,"label":"google-drive","permalink":"/ja/blog/tags/google-drive"},{"inline":true,"label":"download","permalink":"/ja/blog/tags/download"}],"readingTime":6.71,"hasTruncateMarker":true,"authors":[{"name":"Z. Yuan","title":"Dosaid maintainer, Full-Stack AI Engineer","url":"https://github.com/zephyr-sh","socials":{"github":"https://github.com/zephyr-sh","linkedin":"https://www.linkedin.com/in/ze-yuan-sh7/"},"imageURL":"https://github.com/zephyr-sh.png","key":"Z. Yuan","page":null}],"frontMatter":{"slug":"download-from-google-drive-using-python","title":"Python\u3067Google Drive\u304B\u3089\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3059\u308B","authors":"Z. Yuan","image":"/ja/img/2025/0219.webp","tags":["python","google-drive","download"],"description":"\u5C0F\u3055\u306A\u30D5\u30A1\u30A4\u30EB\u3082\u5927\u304D\u306A\u30D5\u30A1\u30A4\u30EB\u3082\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3067\u304D\u307E\u3059\u3002"},"unlisted":false,"prevItem":{"title":"Amazon SES \u306B\u304A\u3051\u308B Namecheap \u306E DNS \u8A2D\u5B9A","permalink":"/ja/blog/amazon-ses-setting-dns-on-namecheap"},"nextItem":{"title":"Ubuntu \u3067\u306E\u5916\u4ED8\u3051\u30CF\u30FC\u30C9\u30C7\u30A3\u30B9\u30AF\u306E\u30DE\u30A6\u30F3\u30C8","permalink":"/ja/blog/mount-disk-on-ubuntu"}}')}}]);