"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["36787"],{36823:function(n,e,i){i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>a,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var t=i(89901),l=i(74848),s=i(84429);let r={slug:"mac-forticlient-vpn-split-routing",title:"FortiClient VPN \u306E\u5206\u5272\u30EB\u30FC\u30C6\u30A3\u30F3\u30B0\u8A2D\u5B9A\u3068\u30EB\u30FC\u30C8\u30C6\u30B9\u30C8",authors:"Z. Yuan",tags:["vpn-routing","macos","forticlient"],image:"/ja/img/2025/0802.jpg",description:"FortiClient \u3092\u4F1A\u793E\u306E\u5185\u90E8\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u307F\u306B\u9650\u5B9A\u3057\u3001\u305D\u308C\u4EE5\u5916\u306E\u901A\u4FE1\u306F\u3059\u3079\u3066\u30ED\u30FC\u30AB\u30EB\u306B\u623B\u3059\u3002"},o,c={authorsImageUrls:[void 0]},d=[{value:"\u306A\u305C\u7121\u52B9\u306B\u306A\u308B\u306E\u304B\uFF1F",id:"\u306A\u305C\u7121\u52B9\u306B\u306A\u308B\u306E\u304B",level:2},{value:"\u3064\u307E\u308A\uFF1F",id:"\u3064\u307E\u308A",level:2},{value:"1. \u30EB\u30FC\u30C8\u306E\u4FEE\u6B63",id:"1-\u30EB\u30FC\u30C8\u306E\u4FEE\u6B63",level:2},{value:"2. \u30ED\u30FC\u30AB\u30EB\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30EB\u30FC\u30C8\u3092\u5FA9\u5143",id:"2-\u30ED\u30FC\u30AB\u30EB\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30EB\u30FC\u30C8\u3092\u5FA9\u5143",level:2},{value:"3. \u793E\u5185\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u5C02\u7528\u30EB\u30FC\u30C8\u3092\u8FFD\u52A0",id:"3-\u793E\u5185\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u5C02\u7528\u30EB\u30FC\u30C8\u3092\u8FFD\u52A0",level:2},{value:"4. \u8A2D\u5B9A\u304C\u6709\u52B9\u304B\u78BA\u8A8D\u3059\u308B",id:"4-\u8A2D\u5B9A\u304C\u6709\u52B9\u304B\u78BA\u8A8D\u3059\u308B",level:2},{value:"\u5B8C\u5168\u7248\u30B9\u30AF\u30EA\u30D7\u30C8",id:"\u5B8C\u5168\u7248\u30B9\u30AF\u30EA\u30D7\u30C8",level:2}];function h(n){let e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:"\u4EE5\u524D\u3001VPN \u306E\u30EB\u30FC\u30C6\u30A3\u30F3\u30B0\u3092\u5909\u66F4\u3059\u308B\u65B9\u6CD5\u3092\u5171\u6709\u3057\u305F\u3053\u3068\u304C\u3042\u308A\u307E\u3059\u3002"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u524D\u63D0\uFF1A",(0,l.jsx)(e.a,{href:"/ja/blog/mac-selective-vpn-routing",children:(0,l.jsx)(e.strong,{children:"VPN \u306B\u9078\u629E\u7684\u306A\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u30EB\u30FC\u30C6\u30A3\u30F3\u30B0\u3092\u8A2D\u5B9A\u3059\u308B"})})]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u5F53\u6642\u4F7F\u7528\u3057\u3066\u3044\u305F VPN \u306F L2TP \u65B9\u5F0F\u3067\u3001",(0,l.jsx)(e.code,{children:"/etc/ppp/ip-up"}),"\u30B9\u30AF\u30EA\u30D7\u30C8\u3092\u4F7F\u3063\u3066\u30EB\u30FC\u30C8\u3092\u5909\u66F4\u3067\u304D\u307E\u3057\u305F\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u3057\u304B\u3057\u3001\u4ED5\u4E8B\u306E\u90FD\u5408\u3067\u65B0\u3057\u3044 VPN \u30C4\u30FC\u30EB\u3067\u3042\u308B",(0,l.jsx)(e.strong,{children:"FortiClient"}),"\u306B\u5207\u308A\u66FF\u3048\u307E\u3057\u305F\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u3059\u308B\u3068\u3001\u5F93\u6765\u306E\u65B9\u6CD5\u306F\u4F7F\u3048\u306A\u304F\u306A\u308A\u307E\u3057\u305F\u3002"}),"\n",(0,l.jsxs)(e.admonition,{type:"info",children:[(0,l.jsx)(e.p,{children:"FortiClient \u306F Fortinet \u793E\u304C\u63D0\u4F9B\u3059\u308B\u30BB\u30AD\u30E5\u30A2\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u30BD\u30EA\u30E5\u30FC\u30B7\u30E7\u30F3\u3067\u3001\u4E3B\u306A\u7528\u9014\u306F\u4EE5\u4E0B\u306E\u901A\u308A\u3067\u3059\uFF1A"}),(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"VPN \u63A5\u7D9A\u30C4\u30FC\u30EB"}),"\nFortiClient \u306F SSL VPN \u3068 IPSec VPN \u306B\u5BFE\u5FDC\u3057\u3066\u304A\u308A\u3001\u30E6\u30FC\u30B6\u30FC\u304C\u5B89\u5168\u306B\u30EA\u30E2\u30FC\u30C8\u304B\u3089\u793E\u5185\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306B\u30A2\u30AF\u30BB\u30B9\u3067\u304D\u307E\u3059\u3002FortiGate \u30D5\u30A1\u30A4\u30A2\u30A6\u30A9\u30FC\u30EB\u306E\u30DD\u30EA\u30B7\u30FC\u3068\u9023\u643A\u3057\u3001\u4F01\u696D\u30EC\u30D9\u30EB\u306E\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u3068\u63A5\u7D9A\u7BA1\u7406\u3092\u63D0\u4F9B\u3057\u307E\u3059\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u4FDD\u8B77"}),"\nVPN \u6A5F\u80FD\u306B\u52A0\u3048\u3001\u30DE\u30EB\u30A6\u30A7\u30A2\u9632\u5FA1\u3001\u30A6\u30A7\u30D6\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0\u3001\u884C\u52D5\u89E3\u6790\u306A\u3069\u306E\u6A5F\u80FD\u3092\u5099\u3048\u3001\u30E6\u30FC\u30B6\u30FC\u7AEF\u672B\u306E\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u3092\u5F37\u5316\u3057\u307E\u3059\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Fortinet \u30A8\u30B3\u30B7\u30B9\u30C6\u30E0\u3068\u306E\u7D71\u5408"}),"\nFortiGate\u3001FortiAnalyzer\u3001EMS \u306A\u3069\u306E Fortinet \u88FD\u54C1\u3068\u9023\u643A\u3057\u3001\u7D71\u4E00\u3055\u308C\u305F\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u76E3\u8996\u30FB\u7BA1\u7406\u3092\u5B9F\u73FE\u3057\u307E\u3059\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u30AF\u30ED\u30B9\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u5BFE\u5FDC"}),"\nWindows\u3001macOS\u3001Linux\u3001iOS\u3001Android \u306A\u3069\u591A\u69D8\u306A\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3001\u4F01\u696D\u5185\u306E\u4E00\u62EC\u5C55\u958B\u3068\u7BA1\u7406\u304C\u5BB9\u6613\u3067\u3059\u3002"]}),"\n"]}),"\n"]}),(0,l.jsx)(e.p,{children:"\u7C21\u5358\u306B\u8A00\u3048\u3070\u3001FortiClient \u306F\u30EA\u30E2\u30FC\u30C8\u63A5\u7D9A\u3068\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u4FDD\u8B77\u3092\u517C\u306D\u5099\u3048\u305F\u4F01\u696D\u5411\u3051\u30AF\u30E9\u30A4\u30A2\u30F3\u30C8\u30C4\u30FC\u30EB\u3067\u3042\u308A\u3001\u7279\u306B\u793E\u5185\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u63A5\u7D9A\u306E\u53B3\u5BC6\u306A\u7BA1\u7406\u304C\u6C42\u3081\u3089\u308C\u308B\u7D44\u7E54\u306B\u9069\u3057\u3066\u3044\u307E\u3059\u3002"})]}),"\n",(0,l.jsx)(e.h2,{id:"\u306A\u305C\u7121\u52B9\u306B\u306A\u308B\u306E\u304B",children:"\u306A\u305C\u7121\u52B9\u306B\u306A\u308B\u306E\u304B\uFF1F"}),"\n",(0,l.jsxs)(e.p,{children:["FortiClient \u306F macOS \u4E0A\u3067 ",(0,l.jsx)(e.code,{children:"utunX"})," \u3068\u3044\u3046\u4EEE\u60F3\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3092\u4F5C\u6210\u3057\u3001\u4EE5\u4E0B\u306E\u3088\u3046\u306A ",(0,l.jsx)(e.strong,{children:"\u30C7\u30D5\u30A9\u30EB\u30C8\u30EB\u30FC\u30C8"})," \u3092\u7A4D\u6975\u7684\u306B\u30D7\u30C3\u30B7\u30E5\u3057\u307E\u3059\u3002\u3088\u304F\u3042\u308B\u7D44\u307F\u5408\u308F\u305B\u306F\uFF1A"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"0.0.0.0/1      \u2192 utunX\n128.0.0.0/1    \u2192 utunX\ndefault        \u2192 utunX\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u3053\u308C\u3089 3 \u3064\u3092\u5408\u308F\u305B\u308B\u3068\u300C\u3059\u3079\u3066\u306E\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u304C VPN \u3092\u7D4C\u7531\u3059\u308B\u300D\u3053\u3068\u306B\u306A\u308A\u307E\u3059\u3002\u307E\u305F\u3001\u63A5\u7D9A\u3059\u308B\u305F\u3073\u306B\u30ED\u30FC\u30AB\u30EB\u8A2D\u5B9A\u304C\u4E0A\u66F8\u304D\u3055\u308C\u308B\u305F\u3081\u3001\u5358\u306B ",(0,l.jsx)(e.code,{children:"/etc/ppp/ip-up"})," \u3060\u3051\u3067\u306F\u5206\u5272\u30EB\u30FC\u30C6\u30A3\u30F3\u30B0\u306E\u5F79\u5272\u3092\u679C\u305F\u305B\u307E\u305B\u3093\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u3067\u306F\u3001\u3069\u3046\u3059\u308C\u3070\u826F\u3044\u306E\u304B\uFF1F\u{1F4A2}"}),"\n",(0,l.jsx)(e.p,{children:"\u305F\u3060\u306E VPN \u30C4\u30FC\u30EB\u306A\u306E\u306B\u3001\u5168\u3066\u306E\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u3092\u596A\u304A\u3046\u3068\u3059\u308B\u306E\u304B\uFF1F"}),"\n",(0,l.jsx)(e.h2,{id:"\u3064\u307E\u308A",children:"\u3064\u307E\u308A\uFF1F"}),"\n",(0,l.jsx)(e.p,{children:"\u4ECA\u56DE\u306E\u79C1\u306E\u76EE\u7684\u306F\u30B7\u30F3\u30D7\u30EB\u3067\u3001\u4EE5\u4E0B\u306E\u6761\u4EF6\u3060\u3051\u6E80\u305F\u305B\u3070\u826F\u3044\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4F1A\u793E\u306E\u5185\u90E8\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF"}),"\uFF08\u4F8B\uFF1A",(0,l.jsx)(e.code,{children:"10.0.0.0/8"}),"\uFF09\u306F VPN \u7D4C\u7531"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u30ED\u30FC\u30AB\u30EB LAN\uFF0F\u4E00\u822C\u7684\u306A\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8"})," \u306F\u7269\u7406\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\uFF08Wi-Fi \u3084\u6709\u7DDA LAN \u306A\u3069\uFF09\u3092\u76F4\u63A5\u901A\u308B"]}),"\n",(0,l.jsx)(e.li,{children:"\u73FE\u5728\u306E VPN \u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3068\u30ED\u30FC\u30AB\u30EB\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\u3092\u81EA\u52D5\u691C\u51FA"}),"\n",(0,l.jsx)(e.li,{children:"\u30EB\u30FC\u30C8\u8A2D\u5B9A\u304C\u6B63\u3057\u304F\u53CD\u6620\u3055\u308C\u3066\u3044\u308B\u304B\u691C\u8A3C\u3067\u304D\u308B\u4ED5\u7D44\u307F\u3092\u63D0\u4F9B"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u4EE5\u4E0B\u3001\u307E\u305A\u306F\u624B\u52D5\u30B3\u30DE\u30F3\u30C9\u3092\u8AAC\u660E\u3057\u3001\u6700\u5F8C\u306B\u81EA\u52D5\u5316\u30B9\u30AF\u30EA\u30D7\u30C8\u3092\u7D39\u4ECB\u3057\u307E\u3059\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"1-\u30EB\u30FC\u30C8\u306E\u4FEE\u6B63",children:"1. \u30EB\u30FC\u30C8\u306E\u4FEE\u6B63"}),"\n",(0,l.jsx)(e.p,{children:"FortiClient \u306F\u63A5\u7D9A\u6642\u306B\u4EE5\u4E0B\u306E 3 \u3064\u306E\u5F37\u5236\u30EB\u30FC\u30C8\u3092\u5BC6\u304B\u306B\u8FFD\u52A0\u3057\u3001\u3059\u3079\u3066\u306E\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u3092 VPN \u306B\u5F15\u304D\u8FBC\u307F\u307E\u3059\uFF1A"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"0.0.0.0/1\n128.0.0.0/1\ndefault\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3053\u308C\u3089 3 \u3064\u306F IPv4 \u5168\u4F53\u306E\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u3092\u30AB\u30D0\u30FC\u3057\u3066\u304A\u308A\u3001\u5168\u3066\u306E\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u8981\u6C42\u3092\u4E38\u3054\u3068\u6355\u6349\u3057\u3066\u3057\u307E\u3044\u307E\u3059\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u306A\u306E\u3067\u6700\u521D\u306B\u3084\u308B\u3053\u3068\u306F\u3001\u3053\u308C\u3089\u306E\u30EB\u30FC\u30C8\u3092\u524A\u9664\u3059\u308B\u3053\u3068\u3067\u3059\uFF1A"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'for cidr in default 0.0.0.0/1 128.0.0.0/1; do\n  sudo route -q -n delete -ifscope "$VPN_IF" "$cidr"\ndone\n'})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"$VPN_IF"})," \u306F\u79C1\u306E\u30B9\u30AF\u30EA\u30D7\u30C8\u3067\u81EA\u52D5\u7684\u306B\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\uFF08\u4F8B\uFF1Autun4\u3001utun6 \u306A\u3069\uFF09\u3092\u898B\u3064\u3051\u308B\u305F\u3081\u306E\u5909\u6570\u3067\u3059\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:'\u3053\u306E\u30B9\u30C6\u30C3\u30D7\u306F\u975E\u5E38\u306B\u91CD\u8981\u3067\u3001\u524A\u9664\u306B\u5931\u6557\u3059\u308B\u3068 VPN \u304C\u5168\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u3092\u596A\u3044\u7D9A\u3051\u307E\u3059\u3002\u524A\u9664\u6642\u306B "not in table" \u3068\u8868\u793A\u3055\u308C\u308B\u3053\u3068\u304C\u3042\u308A\u307E\u3059\u304C\u3001\u305D\u308C\u306F\u8A72\u5F53\u30EB\u30FC\u30C8\u304C\u5B58\u5728\u3057\u306A\u3044\u3060\u3051\u306A\u306E\u3067\u7121\u8996\u3057\u3066\u69CB\u3044\u307E\u305B\u3093\u3002'}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"2-\u30ED\u30FC\u30AB\u30EB\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30EB\u30FC\u30C8\u3092\u5FA9\u5143",children:"2. \u30ED\u30FC\u30AB\u30EB\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30EB\u30FC\u30C8\u3092\u5FA9\u5143"}),"\n",(0,l.jsx)(e.p,{children:"VPN \u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30EB\u30FC\u30C8\u3092\u524A\u9664\u3057\u305F\u3089\u3001\u5143\u3005\u306E\u30ED\u30FC\u30AB\u30EB\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\u3092\u623B\u3059\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u3053\u3046\u3059\u308B\u3053\u3068\u3067 ",(0,l.jsx)(e.code,{children:"google.com"})," \u3084 ",(0,l.jsx)(e.code,{children:"youtube.com"})," \u306E\u3088\u3046\u306A\u4E00\u822C\u7684\u306A\u30A4\u30F3\u30BF\u30FC\u30CD\u30C3\u30C8\u901A\u4FE1\u306F\u7269\u7406\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\uFF08en0\u3001en1 \u306A\u3069\uFF09\u3092\u7D4C\u7531\u3057\u307E\u3059\u3002"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'if ! sudo route -n change default "$LOCAL_GW"; then\n  sudo route -n add default "$LOCAL_GW"\nfi\n'})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"$LOCAL_GW"})," \u306F ",(0,l.jsx)(e.code,{children:"netstat"})," \u30B3\u30DE\u30F3\u30C9\u306A\u3069\u304B\u3089\u81EA\u52D5\u7684\u306B\u53D6\u5F97\u3057\u305F\u5143\u306E\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\uFF08\u4F8B\uFF1A192.168.0.1\uFF09\u3067\u3001\u624B\u52D5\u5165\u529B\u306F\u4E0D\u8981\u3067\u3059\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"3-\u793E\u5185\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u5C02\u7528\u30EB\u30FC\u30C8\u3092\u8FFD\u52A0",children:"3. \u793E\u5185\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u5C02\u7528\u30EB\u30FC\u30C8\u3092\u8FFD\u52A0"}),"\n",(0,l.jsx)(e.p,{children:"\u6B21\u306B VPN \u304C\u793E\u5185\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u306E\u307F\u3092\u6271\u3046\u3088\u3046\u306B\u8A2D\u5B9A\u3057\u307E\u3059\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u4EEE\u306B\u793E\u5185\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u304C ",(0,l.jsx)(e.code,{children:"10.0.0.0/8"})," \u3060\u3068\u3059\u308B\u3068\u3001VPN \u306E\u30D4\u30A2\u5148 IP \u306B\u30EB\u30FC\u30C8\u3092\u5411\u3051\u307E\u3059\uFF1A"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'sudo route -n add -net 10.0.0.0/8 "$VPN_PEER"\n'})}),"\n",(0,l.jsxs)(e.p,{children:["\u65E2\u306B\u30EB\u30FC\u30C8\u304C\u5B58\u5728\u3057\u3066\u3044\u308C\u3070 ",(0,l.jsx)(e.code,{children:"change"})," \u306B\u5207\u308A\u66FF\u3048\u307E\u3059\uFF1A"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'sudo route -n change -net 10.0.0.0/8 "$VPN_PEER"\n'})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"$VPN_PEER"})," \u306F VPN \u306E Point-to-Point \u5BFE\u5411\u5148 IP \u3067\u3001\u30B9\u30AF\u30EA\u30D7\u30C8\u5185\u3067 ",(0,l.jsx)(e.code,{children:"ifconfig utunX"})," \u3092\u89E3\u6790\u3057\u3066\u81EA\u52D5\u53D6\u5F97\u3057\u3066\u3044\u307E\u3059\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.admonition,{type:"warning",children:[(0,l.jsx)(e.p,{children:"\u3082\u3057\u793E\u5185\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u304C 10.0.0.0/8 \u4EE5\u5916\u306E\u5834\u5408\u306F\u3001\u3053\u306E\u90E8\u5206\u3092\u5FC5\u305A\u4FEE\u6B63\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u4F8B\u3048\u3070\u3001\u793E\u5185\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u304C 172.16.0.0/12 \u306E\u5834\u5408\u306F\u3001\u4EE5\u4E0B\u306E\u3088\u3046\u306B\u5BFE\u5FDC\u3055\u305B\u307E\u3059\uFF1A"}),(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'sudo route -n add -net 172.16.0.0/12 "$VPN_PEER"\n'})})]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"4-\u8A2D\u5B9A\u304C\u6709\u52B9\u304B\u78BA\u8A8D\u3059\u308B",children:"4. \u8A2D\u5B9A\u304C\u6709\u52B9\u304B\u78BA\u8A8D\u3059\u308B"}),"\n",(0,l.jsx)(e.p,{children:"\u6700\u5F8C\u306E\u30B9\u30C6\u30C3\u30D7\u306F\u79C1\u304C\u5F37\u5316\u3057\u305F\u90E8\u5206\u3067\u3059\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u3053\u306E\u30B9\u30AF\u30EA\u30D7\u30C8\u3092\u5B9F\u884C\u3057\u3001\u3044\u304F\u3064\u304B\u306E\u30C6\u30B9\u30C8\u30BF\u30FC\u30B2\u30C3\u30C8\u3092\u6307\u5B9A\u3059\u308B\u3068\u3001\u30B9\u30AF\u30EA\u30D7\u30C8\u306F\u81EA\u52D5\u7684\u306B\uFF1A"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u5404 IP \u307E\u305F\u306F\u30DB\u30B9\u30C8\u540D\u304C\u5B9F\u969B\u306B\u3069\u306E\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3092\u901A\u3063\u3066\u3044\u308B\u304B\u3092\u30C1\u30A7\u30C3\u30AF"}),"\n",(0,l.jsx)(e.li,{children:"\u305D\u306E\u30DB\u30B9\u30C8\u306B\u5BFE\u3057\u3066 ping \u3092\u9001\u308A\u3001\u901A\u4FE1\u53EF\u80FD\u304B\u3069\u3046\u304B\u3092\u78BA\u8A8D\u3057\u307E\u3059"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u4F8B\u3048\u3070\uFF1A"}),"\n",(0,l.jsx)(e.p,{children:"\u30B9\u30AF\u30EA\u30D7\u30C8\u3092\u5B9F\u884C\u3057\u3001\u30C6\u30B9\u30C8\u30BF\u30FC\u30B2\u30C3\u30C8\u3068\u3057\u3066\u4EE5\u4E0B\u3092\u6307\u5B9A\u3057\u307E\u3059\uFF1A"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"bash forticlient_split.sh 10.1.1.1 192.168.0.100 google.com\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3059\u308B\u3068\u3001\u6B21\u306E\u3088\u3046\u306A\u51FA\u529B\u304C\u5F97\u3089\u308C\u307E\u3059\uFF1A"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u{1F310} 10.1.1.1      \u279C \u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9 utun4 (\u671F\u5F85\u5024 utun4) \u2705  \u63A5\u7D9A\u6210\u529F \u2705\n\u{1F310} 192.168.0.100 \u279C \u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9 en0   (\u671F\u5F85\u5024 \u30ED\u30FC\u30AB\u30EB) \u2705  \u63A5\u7D9A\u6210\u529F \u2705\n\u{1F310} google.com    \u279C \u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9 en0   (\u671F\u5F85\u5024 \u30ED\u30FC\u30AB\u30EB) \u2705  \u63A5\u7D9A\u6210\u529F \u2705\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u3053\u308C\u306B\u3088\u308A\u300CVPN \u306F\u4F1A\u793E\u306E\u5185\u90E8\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u307F\u3092\u62C5\u5F53\u3059\u308B\u300D\u3068\u3044\u3046\u8A2D\u5B9A\u304C\u6B63\u3057\u304F\u6A5F\u80FD\u3057\u3066\u3044\u308B\u304B\u3001\u7D20\u65E9\u304F\u691C\u8A3C\u3067\u304D\u307E\u3059\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u63A5\u7D9A\u72B6\u6CC1\u3084\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3001\u901A\u4FE1\u53EF\u5426\u304C\u4E00\u76EE\u3067\u308F\u304B\u308B\u306E\u3067\u4FBF\u5229\u3067\u3059\uFF01"}),"\n",(0,l.jsx)(e.p,{children:"\u306A\u304B\u306A\u304B\u826F\u3044\u611F\u3058\u3067\u3057\u3087\u3046\uFF1F"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"\u5B8C\u5168\u7248\u30B9\u30AF\u30EA\u30D7\u30C8",children:"\u5B8C\u5168\u7248\u30B9\u30AF\u30EA\u30D7\u30C8"}),"\n",(0,l.jsx)(e.p,{children:"macOS\u3001FortiClient VPN \u5BFE\u5FDC\u3001\u81EA\u52D5\u691C\u51FA\u3001\u30A8\u30E9\u30FC\u30C1\u30A7\u30C3\u30AF\u3001\u63A5\u7D9A\u30C6\u30B9\u30C8\u3001\u30EB\u30FC\u30C8\u8868\u793A\u3001VPN \u30D4\u30A2 IP \u89E3\u6790\u306A\u3069\u306E\u6A5F\u80FD\u3092\u5099\u3048\u305F\u5B8C\u5168\u7248\u30B9\u30AF\u30EA\u30D7\u30C8\u3092\u4EE5\u4E0B\u306B\u307E\u3068\u3081\u307E\u3057\u305F\u3002"}),"\n",(0,l.jsxs)(e.p,{children:["\u3053\u306E\u30B9\u30AF\u30EA\u30D7\u30C8\u3092 ",(0,l.jsx)(e.code,{children:"forticlient_split.sh"})," \u3068\u3044\u3046\u540D\u524D\u3067\u4FDD\u5B58\u3057\u3001\u5B9F\u884C\u6A29\u9650\u3092\u4ED8\u4E0E\u3057\u3066\u304B\u3089\u5B9F\u884C\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"chmod +x forticlient_split.sh\n./forticlient_split.sh 10.1.1.1 192.168.0.100 google.com\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4EE5\u4E0B\u304C\u30B3\u30FC\u30C9\u306B\u306A\u308A\u307E\u3059\u3002\u3054\u6D3B\u7528\u304F\u3060\u3055\u3044\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",metastring:'title="forticlient_split.sh" showLineNumbers',children:'#!/usr/bin/env bash\n# =============================================================================\n# FortiClient VPN \u5206\u5272\u30EB\u30FC\u30C6\u30A3\u30F3\u30B0\uFF08\u8A73\u7D30\u51FA\u529B\u4ED8\u304D\uFF09\n#\n# \u3053\u306E\u30B9\u30AF\u30EA\u30D7\u30C8\u306F FortiClient \u306B\u3088\u3063\u3066\u633F\u5165\u3055\u308C\u305F\u30EB\u30FC\u30C8\u3092\u30EA\u30BB\u30C3\u30C8\u3057\u3001\n# VPN \u4EE5\u5916\u306E\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u7528\u306B\u30ED\u30FC\u30AB\u30EB\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\u3092\u5FA9\u5143\u3057\u3001\n# 10.0.0.0/8 \u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u3092 VPN \u306B\u30D0\u30A4\u30F3\u30C9\u3057\u3001\n# \u30EB\u30FC\u30C6\u30A3\u30F3\u30B0\u30C6\u30FC\u30D6\u30EB\u3001\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u30DE\u30C3\u30D4\u30F3\u30B0\u3001\u63A5\u7D9A\u30C6\u30B9\u30C8\uFF08ping\uFF09\u3092\u8A73\u7D30\u306B\u8868\u793A\u3057\u307E\u3059\u3002\n#\n# \u4F7F\u3044\u65B9:\n#   forticlient_split.sh [ -h | --help ] host1 [host2 ...]\n#\n# \u30AA\u30D7\u30B7\u30E7\u30F3:\n#   -h, --help    \u30D8\u30EB\u30D7\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3057\u3066\u7D42\u4E86\u3057\u307E\u3059\u3002\n# =============================================================================\n\nset -euo pipefail\nIFS=$\'\\n\\t\'\n\n# -----------------------------------------------------------------------------\n# \u30A8\u30E9\u30FC\u3068\u60C5\u5831\u8868\u793A\u306E\u30D8\u30EB\u30D1\u30FC\u95A2\u6570\n# -----------------------------------------------------------------------------\n\n# die \u306F\u30A8\u30E9\u30FC\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3057\u3001\u30B9\u30C6\u30FC\u30BF\u30B91\u3067\u7D42\u4E86\u3057\u307E\u3059\u3002\n# \u5F15\u6570:\n#   $@: \u8868\u793A\u3059\u308B\u30A8\u30E9\u30FC\u30E1\u30C3\u30BB\u30FC\u30B8\ndie() {\n  printf \'\u274C %s\\n\' "$*" >&2\n  exit 1\n}\n\n# info \u306F\u60C5\u5831\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3057\u307E\u3059\u3002\n# \u5F15\u6570:\n#   $@: \u8868\u793A\u3059\u308B\u30E1\u30C3\u30BB\u30FC\u30B8\ninfo() {\n  printf \'\u2139\uFE0F  %s\\n\' "$*"\n}\n\n# -----------------------------------------------------------------------------\n# \u30E6\u30FC\u30C6\u30A3\u30EA\u30C6\u30A3\u95A2\u6570\n# -----------------------------------------------------------------------------\n\n# get_vpn_interface \u306F\u6700\u521D\u306B\u898B\u3064\u304B\u3063\u305F PtP \u30A2\u30C9\u30EC\u30B9\u3092\u6301\u3064 utun/tun/ppp \u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u540D\u3092\u51FA\u529B\u3057\u307E\u3059\u3002\n# \u623B\u308A\u5024:\n#   \u898B\u3064\u304B\u3063\u305F\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u540D\u3092\u51FA\u529B\u3001\u898B\u3064\u304B\u3089\u306A\u3051\u308C\u3070\u7A7A\u51FA\u529B\nget_vpn_interface() {\n  while read -r iface; do\n    iface=${iface%:}\n    if ifconfig "$iface" | grep -q \'inet .*--\x3e\'; then\n      printf \'%s\\n\' "$iface"\n      return\n    fi\n  done < <(ifconfig | awk \'/^(utun|tun|ppp)[0-9]+:/{print $1}\')\n}\n\n# get_vpn_peer \u306F\u6307\u5B9A\u3055\u308C\u305F VPN \u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u306E PtP \u5BFE\u5411 IP \u3092\u53D6\u5F97\u3057\u307E\u3059\u3002\n# \u5F15\u6570:\n#   $1: \u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u540D\uFF08\u4F8B: utun4\uFF09\n# \u623B\u308A\u5024:\n#   \u5BFE\u5411 IP \u3092\u51FA\u529B\u3001\u898B\u3064\u304B\u3089\u306A\u3051\u308C\u3070\u7A7A\u51FA\u529B\nget_vpn_peer() {\n  local iface="$1"\n  ifconfig "$iface" | awk \'/inet / && /--\x3e/ {\n    for (i = 1; i <= NF; i++) {\n      if ($i == "--\x3e") { print $(i+1); exit }\n    }\n  }\'\n}\n\n# get_local_gateway \u306F VPN \u4EE5\u5916\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\u3092\u53D6\u5F97\u3057\u307E\u3059\u3002\n# \u623B\u308A\u5024:\n#   \u30B2\u30FC\u30C8\u30A6\u30A7\u30A4 IP \u3092\u51FA\u529B\u3001\u898B\u3064\u304B\u3089\u306A\u3051\u308C\u3070\u7A7A\u51FA\u529B\nget_local_gateway() {\n  netstat -rn \\\n    | awk \'$1=="default" && $NF !~ /(utun|tun|ppp)/ { print $2; exit }\'\n}\n\n# iface_of \u306F\u6307\u5B9A\u30DB\u30B9\u30C8\u306B\u30A2\u30AF\u30BB\u30B9\u3059\u308B\u969B\u306B\u4F7F\u308F\u308C\u308B\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u540D\u3092\u8FD4\u3057\u307E\u3059\u3002\n# \u5F15\u6570:\n#   $1: \u30DB\u30B9\u30C8\u540D\u307E\u305F\u306FIP\n# \u623B\u308A\u5024:\n#   \u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u540D\u3092\u51FA\u529B\niface_of() {\n  route get "$1" 2>/dev/null \\\n    | awk \'/interface:/{print $2}\'\n}\n\n# show_route_info \u306F\u73FE\u5728\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30EB\u30FC\u30C8\u306810.0.0.0/8\u306E\u30EB\u30FC\u30C8\u60C5\u5831\u3092\u8868\u793A\u3057\u307E\u3059\u3002\nshow_route_info() {\n  printf \'\\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\'\n  info "\u{1F50E} \u73FE\u5728\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30EB\u30FC\u30C8:"\n  route get default 2>/dev/null | awk \'NR<=5\'\n  info "\u{1F50E} \u73FE\u5728\u306E 10.0.0.0/8 \u30EB\u30FC\u30C8:"\n  route get 10.0.0.1 2>/dev/null | awk \'NR<=5\'\n  printf \'\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\\n\\n\'\n}\n\n# test_connect \u306F\u6307\u5B9A\u30DB\u30B9\u30C8\u3078\u306Eping\u758E\u901A\u78BA\u8A8D\u3092\u884C\u3044\u307E\u3059\u3002\n# \u5F15\u6570:\n#   $1: \u30DB\u30B9\u30C8\u540D\u307E\u305F\u306FIP\ntest_connect() {\n  local host="$1"\n  printf \'   \u21B3 %s \u3078\u306E\u758E\u901A\u30C6\u30B9\u30C8: \' "$host"\n  if ping -c2 -W1 "$host" &>/dev/null; then\n    printf \'\u2705 \u5230\u9054\u53EF\u80FD\\n\'\n  else\n    printf \'\u274C \u5230\u9054\u4E0D\u53EF\\n\'\n  fi\n}\n\n# -----------------------------------------------------------------------------\n# \u4F7F\u7528\u65B9\u6CD5\u8868\u793A\n# -----------------------------------------------------------------------------\n\nusage() {\n  cat <<-EOF\n\u4F7F\u3044\u65B9: $(basename "$0") [ -h | --help ] host1 [host2 ...]\n\u30AA\u30D7\u30B7\u30E7\u30F3:\n  -h, --help    \u30D8\u30EB\u30D7\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3057\u3066\u7D42\u4E86\u3057\u307E\u3059\u3002\nEOF\n  exit 0\n}\n\n# -----------------------------------------------------------------------------\n# \u30E1\u30A4\u30F3\u51E6\u7406\n# -----------------------------------------------------------------------------\n\n# \u30D5\u30E9\u30B0\u89E3\u6790\nif [[ "${1-}" =~ ^-h|--help$ ]]; then\n  usage\nfi\n\n# \u30DB\u30B9\u30C8\u53CE\u96C6\nHOSTS=("$@")\n(( ${#HOSTS[@]} )) || die "\u5C11\u306A\u304F\u3068\u3082\u4E00\u3064\u306E\u30DB\u30B9\u30C8\u3092\u6307\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002"\n\n# 1. VPN\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3068\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\u306E\u691C\u51FA\ninfo "\u{1F50D} VPN\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3068\u30ED\u30FC\u30AB\u30EB\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\u3092\u691C\u51FA\u4E2D"\nVPN_IF=$(get_vpn_interface)                         || die "VPN\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\uFF08utun/tun/ppp\uFF09\u3092\u691C\u51FA\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002"\nVPN_PEER=$(get_vpn_peer "$VPN_IF")                  || die "VPN\u306EPtP\u5BFE\u5411IP\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002"\nLOCAL_GW=$(get_local_gateway)                       || die "\u30ED\u30FC\u30AB\u30EB\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002"\ninfo "   \u2022 VPN\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\uFF1A$VPN_IF"\ninfo "   \u2022 VPN\u30D4\u30A2IP\uFF1A$VPN_PEER"\ninfo "   \u2022 \u30ED\u30FC\u30AB\u30EB\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\uFF1A$LOCAL_GW"\n\n# \u5909\u66F4\u524D\u306E\u30EB\u30FC\u30C8\u3092\u8868\u793A\nshow_route_info\n\n# 2. FortiClient \u306B\u3088\u3063\u3066\u5F37\u5236\u8FFD\u52A0\u3055\u308C\u305F\u30EB\u30FC\u30C8\u3092\u524A\u9664\ninfo "\u{1F9F9} FortiClient\u304C\u633F\u5165\u3057\u305F\u5F37\u5236\u30EB\u30FC\u30C8\u3092\u524A\u9664\u4E2D"\nfor cidr in default 0.0.0.0/1 128.0.0.0/1; do\n  sudo route -q -n delete -ifscope "$VPN_IF" "$cidr" 2>/dev/null || true\ndone\n\n# 3. \u30ED\u30FC\u30AB\u30EB\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30B2\u30FC\u30C8\u30A6\u30A7\u30A4\u3092\u5FA9\u5143\ninfo "\u{1F6A7} \u30ED\u30FC\u30AB\u30EB\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u30EB\u30FC\u30C8\u3092 $LOCAL_GW \u306B\u8A2D\u5B9A\u4E2D"\nif ! sudo route -n change default "$LOCAL_GW" 2>/dev/null; then\n  sudo route -n add default "$LOCAL_GW"\nfi\n\n# 4. 10.0.0.0/8 \u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u3092VPN\u306B\u30D0\u30A4\u30F3\u30C9\ninfo "\u{1F517} 10.0.0.0/8 \u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u3092 $VPN_PEER ($VPN_IF) \u306B\u30D0\u30A4\u30F3\u30C9"\nif ! sudo route -n add -net 10.0.0.0/8 "$VPN_PEER" 2>/dev/null; then\n  sudo route -n change -net 10.0.0.0/8 "$VPN_PEER"\nfi\n\n# \u5909\u66F4\u5F8C\u306E\u30EB\u30FC\u30C8\u3092\u8868\u793A\nshow_route_info\n\n# 5. \u30EB\u30FC\u30C6\u30A3\u30F3\u30B0\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3068\u63A5\u7D9A\u6027\u306E\u30C6\u30B9\u30C8\ninfo "\u{1F310} \u30EB\u30FC\u30C8\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3068\u63A5\u7D9A\u6027\u3092\u30C6\u30B9\u30C8\u4E2D"\nfor host in "${HOSTS[@]}"; do\n  actual_if=$(iface_of "$host" || echo "\u4E0D\u660E")\n  if [[ $host == 10.* ]]; then\n    expected_if="$VPN_IF"\n  else\n    expected_if="\u30ED\u30FC\u30AB\u30EB\uFF08\u975EVPN\uFF09"\n  fi\n  printf \'   \u2022 %-15s \u279C \u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9 %-8s (\u671F\u5F85\u5024 %s)\\n\' \\\n    "$host" "$actual_if" "$expected_if"\n  test_connect "$host"\ndone\n\ninfo "\u{1F389} \u8A2D\u5B9A\u3001\u30EB\u30FC\u30C8\u3001\u63A5\u7D9A\u6027\u30C6\u30B9\u30C8\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F"\n'})})]})}function a(n={}){let{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}},84429:function(n,e,i){i.d(e,{R:()=>r,x:()=>o});var t=i(96540);let l={},s=t.createContext(l);function r(n){let e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),t.createElement(s.Provider,{value:e},n.children)}},89901:function(n){n.exports=JSON.parse('{"permalink":"/ja/blog/mac-forticlient-vpn-split-routing","source":"@site/i18n/ja/docusaurus-plugin-content-blog/2025/08-02-mac-forticlient-vpn-split-routing/index.md","title":"FortiClient VPN \u306E\u5206\u5272\u30EB\u30FC\u30C6\u30A3\u30F3\u30B0\u8A2D\u5B9A\u3068\u30EB\u30FC\u30C8\u30C6\u30B9\u30C8","description":"FortiClient \u3092\u4F1A\u793E\u306E\u5185\u90E8\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u307F\u306B\u9650\u5B9A\u3057\u3001\u305D\u308C\u4EE5\u5916\u306E\u901A\u4FE1\u306F\u3059\u3079\u3066\u30ED\u30FC\u30AB\u30EB\u306B\u623B\u3059\u3002","date":"2025-08-02T00:00:00.000Z","tags":[{"inline":true,"label":"vpn-routing","permalink":"/ja/blog/tags/vpn-routing"},{"inline":true,"label":"macos","permalink":"/ja/blog/tags/macos"},{"inline":true,"label":"forticlient","permalink":"/ja/blog/tags/forticlient"}],"readingTime":9.43,"hasTruncateMarker":true,"authors":[{"name":"Z. Yuan","title":"Dosaid maintainer, Full-Stack AI Engineer","url":"https://github.com/zephyr-sh","socials":{"github":"https://github.com/zephyr-sh","linkedin":"https://www.linkedin.com/in/ze-yuan-sh7/"},"imageURL":"https://github.com/zephyr-sh.png","key":"Z. Yuan","page":null}],"frontMatter":{"slug":"mac-forticlient-vpn-split-routing","title":"FortiClient VPN \u306E\u5206\u5272\u30EB\u30FC\u30C6\u30A3\u30F3\u30B0\u8A2D\u5B9A\u3068\u30EB\u30FC\u30C8\u30C6\u30B9\u30C8","authors":"Z. Yuan","tags":["vpn-routing","macos","forticlient"],"image":"/ja/img/2025/0802.jpg","description":"FortiClient \u3092\u4F1A\u793E\u306E\u5185\u90E8\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u307F\u306B\u9650\u5B9A\u3057\u3001\u305D\u308C\u4EE5\u5916\u306E\u901A\u4FE1\u306F\u3059\u3079\u3066\u30ED\u30FC\u30AB\u30EB\u306B\u623B\u3059\u3002"},"unlisted":false,"nextItem":{"title":"Docusaurus Sidebar \u306E\u30AB\u30A6\u30F3\u30C8\u6A5F\u80FD\u306E\u9AD8\u5EA6\u306A\u5B9F\u88C5\uFF1A\u518D\u5E30\u7684\u96C6\u8A08\u3068\u5B89\u5B9A\u3057\u305F slug","permalink":"/ja/blog/docusaurus-sidebars-enhanced-counting"}}')}}]);