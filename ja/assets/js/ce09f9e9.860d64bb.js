"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["97236"],{5320:function(n,e,t){t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var r=t(4489),i=t(74848),a=t(84429);let o={slug:"pytorch-training-out-of-memory",title:"PyTorch\u306EList\u306B\u3088\u308B\u7F60",authors:"Z. Yuan",tags:["PyTorch","OOM"],image:"/ja/img/2024/0220.webp",description:"PyTorch\u3067\u306EOOM\u554F\u984C\u306E\u767A\u898B\u3068\u89E3\u6C7A\u65B9\u6CD5\u3002"},s,l={authorsImageUrls:[void 0]},c=[{value:"\u554F\u984C\u306E\u8AAC\u660E",id:"\u554F\u984C\u306E\u8AAC\u660E",level:2},{value:"\u3067\u306F\u3001\u79C1\u306F\uFF1F",id:"\u3067\u306F\u79C1\u306F",level:2}];function d(n){let e={admonition:"admonition",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"\u30D7\u30ED\u306EPyTorch\u30E6\u30FC\u30B6\u30FC\u3068\u3057\u3066\u3001\u3042\u306A\u305F\u306F\u3059\u3067\u306B\u30E2\u30C7\u30EB\u306E\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u65B9\u6CD5\u3001\u30CF\u30A4\u30D1\u30FC\u30D1\u30E9\u30E1\u30FC\u30BF\u306E\u8ABF\u6574\u3001\u6700\u9069\u5316\u306E\u6280\u8853\u306B\u3064\u3044\u3066\u719F\u77E5\u3057\u3066\u3044\u308B\u306F\u305A\u3067\u3059\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u305D\u3093\u306A\u3042\u306A\u305F\u304C\u3001OOM\uFF08Out of Memory\uFF09\u306E\u30D7\u30ED\u30B0\u30E9\u30E0\u3092\u66F8\u304F\u308F\u3051\u304C\u3042\u308A\u307E\u305B\u3093\u3088\u306D\uFF1F"}),"\n",(0,i.jsx)(e.admonition,{type:"tip",children:(0,i.jsx)(e.p,{children:"\u3053\u3053\u3067\u8A00\u3046\u306E\u306F\u3001\u30B7\u30B9\u30C6\u30E0\u306E\u30E1\u30E2\u30EA\u306E\u3053\u3068\u3067\u3059\u3002GPU\u30E1\u30E2\u30EA\u306E\u3053\u3068\u3067\u306F\u3042\u308A\u307E\u305B\u3093\u3002"})}),"\n",(0,i.jsx)(e.h2,{id:"\u554F\u984C\u306E\u8AAC\u660E",children:"\u554F\u984C\u306E\u8AAC\u660E"}),"\n",(0,i.jsx)(e.p,{children:"OOM\u306E\u539F\u56E0\u306F\u591A\u5C90\u306B\u6E21\u308A\u307E\u3059\u304C\u3001\u4ECA\u56DE\u306F\u30D7\u30ED\u30D5\u30A7\u30C3\u30B7\u30E7\u30CA\u30EB\u306A\u30E6\u30FC\u30B6\u30FC\u3067\u3082\u3088\u304F\u906D\u9047\u3059\u308B\u554F\u984C\u306E1\u3064\u306B\u3064\u3044\u3066\u8A71\u3057\u307E\u3059\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u3042\u306A\u305F\u304C\u30EA\u30B9\u30C8\uFF08List\uFF09\u3092\u4F7F\u3063\u3066\u3044\u308B\u304B\u3082\u3057\u308C\u307E\u305B\u3093\uFF01"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u79C1\u304C\u6700\u8FD1\u30E2\u30C7\u30EB\u3092\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u3057\u3066\u3044\u305F\u7D4C\u9A13\u304B\u3089\u3001\u30E1\u30E2\u30EA\u30EA\u30FC\u30AF\u304C\u767A\u751F\u3059\u308B\u6B63\u78BA\u306A\u30B7\u30CA\u30EA\u30AA\u3092\u898B\u3064\u3051\u307E\u3057\u305F\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u6B21\u306E\u30B3\u30FC\u30C9\u4F8B\u3092\u898B\u3066\u307F\u307E\u3057\u3087\u3046\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from torch.utils.data import Dataset, DataLoader\nimport numpy as np\nimport torch\n\n\nclass DataIter(Dataset):\n\n    def __init__(self):\n        self.data_np = np.array([x for x in range(10000000)])\n        self.data = [x for x in range(10000000)]\n\n    def __len__(self):\n        return len(self.data)\n\n    def __getitem__(self, idx):\n        data = self.data[idx]\n        data = np.array([data], dtype=np.int64)\n        return torch.tensor(data)\n\n\ntrain_data = DataIter()\ntrain_loader = DataLoader(train_data, batch_size=300, num_workers=18)\n\nfor i, item in enumerate(train_loader):\n    if i % 1000 == 0:\n        print(i)\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:"\u3053\u306E\u4F8B\u3092\u898B\u3066\u3001\u7121\u99C4\u306A\u8A71\u306F\u305B\u305A\u3001\u7D50\u8AD6\u304B\u3089\u8A00\u3044\u307E\u3059\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsxs)(e.strong,{children:[(0,i.jsx)(e.code,{children:"self.data"}),"\u3068\u3044\u3046\u30EA\u30B9\u30C8\u304C\u898B\u3048\u307E\u3057\u305F\u304B\uFF1F\u3053\u306E\u30EA\u30B9\u30C8\u304COOM\u554F\u984C\u3092\u5F15\u304D\u8D77\u3053\u3057\u307E\u3059\u3002"]})}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u95A2\u9023\u3059\u308B\u8CC7\u6599\u3092\u8ABF\u3079\u305F\u7D50\u679C\u3001\u3053\u308C\u306FPyTorch\u306E\u554F\u984C\u3067\u306F\u306A\u304F\u3001Python\u306E\u554F\u984C\u3067\u3042\u308B\u3053\u3068\u304C\u5206\u304B\u308A\u307E\u3057\u305F\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u3068\u306B\u304B\u304F\u3001\u30EA\u30B9\u30C8\u306F\u4F7F\u308F\u305A\u3001Numpy\u3084Tensor\u3092\u4F7F\u3063\u3066\u30C7\u30FC\u30BF\u3092\u4FDD\u5B58\u3059\u308B\u3053\u3068\u3067\u3001OOM\u554F\u984C\u306F\u767A\u751F\u3057\u307E\u305B\u3093\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5C11\u306A\u304F\u3068\u3082\u3001\u3053\u306E\u4F8B\u3067\u306F\u305D\u308C\u304C\u6709\u52B9\u3067\u3057\u305F\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u3067\u306F\u79C1\u306F",children:"\u3067\u306F\u3001\u79C1\u306F\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:"\u3042\u306A\u305F\u304C\u8A00\u3046\u304B\u3082\u3057\u308C\u307E\u305B\u3093\uFF1A\u300C\u79C1\u3082\u3053\u3046\u66F8\u3044\u3066\u3044\u308B\u3051\u3069\u3001\u4F55\u3082\u554F\u984C\u306F\u8D77\u304D\u3066\u3044\u306A\u3044\u3088\uFF1F\u300D"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:"\u4E16\u754C\u306F\u7D20\u6674\u3089\u3057\u3044\u3001\u3057\u304B\u3057\u5927\u898F\u6A21\u306A\u30C7\u30FC\u30BF\u30BB\u30C3\u30C8\u306B\u906D\u9047\u3059\u308B\u3068\u4E8B\u614B\u306F\u4E00\u5909\u3057\u307E\u3059\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u79C1\u306E\u30C6\u30B9\u30C8\u7D50\u679C\u306B\u3088\u308B\u3068\u3001\u30C7\u30FC\u30BF\u91CF\u304C\u5C0F\u3055\u3044\u5834\u5408\u3001\u30EA\u30B9\u30C8\u3092\u4F7F\u3063\u3066\u3082\u30E1\u30E2\u30EA\u30EA\u30FC\u30AF\u306E\u554F\u984C\u306F\u767A\u751F\u3057\u307E\u305B\u3093\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5177\u4F53\u7684\u306B\u8A00\u3046\u3068\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u7D041\u4E07\u4EF6\u306E\u30C7\u30FC\u30BF\u3067\u306F\u554F\u984C\u306A\u3057\uFF01"}),"\n",(0,i.jsx)(e.li,{children:"\u7D04100\u4E07\u4EF6\u306E\u30C7\u30FC\u30BF\u3067\u306F\u3001\u30E1\u30E2\u30EA\u304C\u7206\u767A\u3057\u307E\u3059\uFF01"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u3057\u305F\u304C\u3063\u3066\u3001\u30C7\u30FC\u30BF\u91CF\u304C\u5C11\u306A\u3044\u5834\u5408\u3001\u3042\u306A\u305F\u306F\u304A\u305D\u3089\u304F\u3053\u306E\u554F\u984C\u306B\u76F4\u9762\u3059\u308B\u3053\u3068\u306F\u306A\u3044\u3067\u3057\u3087\u3046\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u30C7\u30FC\u30BF\u91CF\u306E\u5883\u754C\u7DDA\u306B\u3064\u3044\u3066\u306F\u3001\u79C1\u3082\u5206\u304B\u308A\u307E\u305B\u3093\u2026\u2026\u304A\u305D\u3089\u304F\u3001Python\u3068PyTorch\u304C\u76F8\u4E92\u4F5C\u7528\u3059\u308B\u30BF\u30A4\u30DF\u30F3\u30B0\u3067\u7570\u5E38\u304C\u767A\u751F\u3059\u308B\u306E\u3067\u3057\u3087\u3046\u3002"})]})}function h(n={}){let{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},84429:function(n,e,t){t.d(e,{R:()=>o,x:()=>s});var r=t(96540);let i={},a=r.createContext(i);function o(n){let e=r.useContext(a);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),r.createElement(a.Provider,{value:e},n.children)}},4489:function(n){n.exports=JSON.parse('{"permalink":"/ja/blog/pytorch-training-out-of-memory","source":"@site/i18n/ja/docusaurus-plugin-content-blog/2024/02-20-pytorch-training-oom/index.md","title":"PyTorch\u306EList\u306B\u3088\u308B\u7F60","description":"PyTorch\u3067\u306EOOM\u554F\u984C\u306E\u767A\u898B\u3068\u89E3\u6C7A\u65B9\u6CD5\u3002","date":"2024-02-20T00:00:00.000Z","tags":[{"inline":true,"label":"PyTorch","permalink":"/ja/blog/tags/py-torch"},{"inline":true,"label":"OOM","permalink":"/ja/blog/tags/oom"}],"readingTime":2.24,"hasTruncateMarker":true,"authors":[{"name":"Z. Yuan","title":"Dosaid maintainer, Full-Stack AI Engineer","url":"https://github.com/zephyr-sh","socials":{"github":"https://github.com/zephyr-sh","linkedin":"https://www.linkedin.com/in/ze-yuan-sh7/"},"imageURL":"https://github.com/zephyr-sh.png","key":"Z. Yuan","page":null}],"frontMatter":{"slug":"pytorch-training-out-of-memory","title":"PyTorch\u306EList\u306B\u3088\u308B\u7F60","authors":"Z. Yuan","tags":["PyTorch","OOM"],"image":"/ja/img/2024/0220.webp","description":"PyTorch\u3067\u306EOOM\u554F\u984C\u306E\u767A\u898B\u3068\u89E3\u6C7A\u65B9\u6CD5\u3002"},"unlisted":false,"prevItem":{"title":"Nextcloud \u306E\u8A2D\u5B9A\u8A18\u9332","permalink":"/ja/blog/setting-up-nextcloud"},"nextItem":{"title":"Python\u3092\u4F7F\u7528\u3057\u3066PDF\u3092\u753B\u50CF\u306B\u5909\u63DB\u3059\u308B","permalink":"/ja/blog/convert-pdf-to-images"}}')}}]);