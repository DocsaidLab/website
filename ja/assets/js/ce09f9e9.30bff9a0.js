"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([["89355"],{46736:function(n,e,t){t.r(e),t.d(e,{assets:function(){return l},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return a},metadata:function(){return r},toc:function(){return c}});var r=t(45853),i=t(85893),o=t(50065);let a={slug:"pytorch-training-out-of-memory",title:"PyTorch \u306E List \u30C8\u30E9\u30C3\u30D7",authors:"Zephyr",tags:["PyTorch","OOM"],image:"/ja/img/2024/0220.webp",description:"PyTorch OOM \u554F\u984C\u306E\u767A\u898B\u3068\u89E3\u6C7A\u3002"},s=void 0,l={authorsImageUrls:[void 0]},c=[{value:"\u554F\u984C\u306E\u8AAC\u660E",id:"\u554F\u984C\u306E\u8AAC\u660E",level:2},{value:"\u3042\u306A\u305F\u306E\u5834\u5408\u306F\uFF1F",id:"\u3042\u306A\u305F\u306E\u5834\u5408\u306F",level:2}];function d(n){let e={admonition:"admonition",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"\u30D7\u30ED\u30D5\u30A7\u30C3\u30B7\u30E7\u30CA\u30EB\u306A PyTorch \u30E6\u30FC\u30B6\u30FC\u3067\u3042\u308C\u3070\u3001\u30E2\u30C7\u30EB\u306E\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0\u65B9\u6CD5\u3001\u30CF\u30A4\u30D1\u30FC\u30D1\u30E9\u30E1\u30FC\u30BF\u306E\u8ABF\u6574\u65B9\u6CD5\u3001\u6700\u9069\u5316\u306E\u6280\u8853\u306B\u7CBE\u901A\u3057\u3066\u3044\u308B\u306F\u305A\u3067\u3059\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u305D\u308C\u306A\u306E\u306B\u3001\u3069\u3046\u3057\u3066 OOM\uFF08Out of Memory\uFF09\u306E\u30B3\u30FC\u30C9\u3092\u66F8\u3044\u3066\u3057\u307E\u3046\u306E\u3067\u3057\u3087\u3046\u304B\uFF1F"}),"\n",(0,i.jsx)(e.admonition,{type:"tip",children:(0,i.jsx)(e.p,{children:"\u3053\u3053\u3067\u8A00\u3046\u30E1\u30E2\u30EA\u306F\u30B7\u30B9\u30C6\u30E0\u30E1\u30E2\u30EA\u306E\u3053\u3068\u3067\u3059\u3002GPU \u30E1\u30E2\u30EA\u3067\u306F\u3042\u308A\u307E\u305B\u3093\u3002"})}),"\n",(0,i.jsx)(e.h2,{id:"\u554F\u984C\u306E\u8AAC\u660E",children:"\u554F\u984C\u306E\u8AAC\u660E"}),"\n",(0,i.jsx)(e.p,{children:"OOM \u306E\u539F\u56E0\u306F\u591A\u5C90\u306B\u308F\u305F\u308A\u307E\u3059\u304C\u3001\u4ECA\u56DE\u306F\u30D7\u30ED\u30D5\u30A7\u30C3\u30B7\u30E7\u30CA\u30EB\u3067\u3082\u9665\u308A\u3084\u3059\u3044\u554F\u984C\u306B\u7D5E\u3063\u3066\u89E3\u8AAC\u3057\u307E\u3059\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.strong,{children:"List \u69CB\u9020\u3092\u4F7F\u7528\u3057\u3066\u3044\u307E\u305B\u3093\u304B\uFF1F"})}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8ABF\u67FB\u3092\u9032\u3081\u305F\u7D50\u679C\u3001\u30E1\u30E2\u30EA\u30EA\u30FC\u30AF\u304C\u767A\u751F\u3059\u308B\u6B63\u78BA\u306A\u72B6\u6CC1\u3092\u7279\u5B9A\u3057\u307E\u3057\u305F\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u4EE5\u4E0B\u306E\u30B3\u30FC\u30C9\u4F8B\u3092\u8003\u3048\u3066\u307F\u3066\u304F\u3060\u3055\u3044\uFF1A"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from torch.utils.data import Dataset, DataLoader\nimport numpy as np\nimport torch\n\n\nclass DataIter(Dataset):\n\n    def __init__(self):\n        self.data_np = np.array([x for x in range(10000000)])\n        self.data = [x for x in range(10000000)]\n\n    def __len__(self):\n        return len(self.data)\n\n    def __getitem__(self, idx):\n        data = self.data[idx]\n        data = np.array([data], dtype=np.int64)\n        return torch.tensor(data)\n\n\ntrain_data = DataIter()\ntrain_loader = DataLoader(train_data, batch_size=300, num_workers=18)\n\nfor i, item in enumerate(train_loader):\n    if i % 1000 == 0:\n        print(i)\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:"\u3053\u306E\u4F8B\u3092\u898B\u305F\u3089\u3001\u3055\u3063\u305D\u304F\u7D50\u8AD6\u306B\u884C\u304D\u307E\u3057\u3087\u3046\uFF1A"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"self.data"})," \u3068\u3044\u3046 List \u3092\u898B\u3064\u3051\u307E\u3057\u305F\u304B\uFF1F\u3053\u306E List \u304C OOM \u554F\u984C\u3092\u5F15\u304D\u8D77\u3053\u3057\u307E\u3059\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u95A2\u9023\u3059\u308B\u8CC7\u6599\u3092\u8ABF\u3079\u305F\u3068\u3053\u308D\u3001\u3053\u308C\u306F PyTorch \u306E\u554F\u984C\u3067\u306F\u306A\u304F\u3001Python \u81EA\u4F53\u306E\u554F\u984C\u3067\u3042\u308B\u53EF\u80FD\u6027\u304C\u9AD8\u3044\u3053\u3068\u304C\u5206\u304B\u308A\u307E\u3057\u305F\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u7D50\u8AD6\u3068\u3057\u3066\u3001",(0,i.jsx)(e.strong,{children:"List \u3092\u4F7F\u308F\u305A\u306B Numpy \u307E\u305F\u306F Tensor \u3092\u4F7F\u3063\u3066\u30C7\u30FC\u30BF\u3092\u4FDD\u5B58\u3057\u3066\u304F\u3060\u3055\u3044"}),"\u3002\u3053\u308C\u306B\u3088\u308A\u3001OOM \u554F\u984C\u3092\u56DE\u907F\u3067\u304D\u307E\u3059\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u5C11\u306A\u304F\u3068\u3082\u3053\u306E\u4F8B\u3067\u306F\u3001\u3053\u306E\u65B9\u6CD5\u3067\u554F\u984C\u304C\u89E3\u6D88\u3055\u308C\u307E\u3059\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u3042\u306A\u305F\u306E\u5834\u5408\u306F",children:"\u3042\u306A\u305F\u306E\u5834\u5408\u306F\uFF1F"}),"\n",(0,i.jsx)(e.p,{children:"\u300C\u79C1\u3082\u540C\u3058\u3088\u3046\u306B\u66F8\u3044\u3066\u3044\u308B\u3051\u3069\u3001\u554F\u984C\u304C\u8D77\u304D\u306A\u3044\u306E\u306F\u306A\u305C\uFF1F\u300D"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:"\u554F\u984C\u306F\u4E16\u754C\u304C\u5E73\u548C\u3067\u3042\u308B\u9593\u306F\u767A\u751F\u3057\u307E\u305B\u3093\u3002\u3057\u304B\u3057\u3001\u3042\u308B\u65E5\u3001\u5DE8\u5927\u306A\u30C7\u30FC\u30BF\u30BB\u30C3\u30C8\u306B\u51FA\u4F1A\u3063\u305F\u6642\u306B\u554F\u984C\u304C\u9855\u5728\u5316\u3057\u307E\u3059\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u79C1\u81EA\u8EAB\u306E\u30C6\u30B9\u30C8\u7D50\u679C\u306B\u3088\u308B\u3068\u3001\u30C7\u30FC\u30BF\u91CF\u304C\u5C0F\u3055\u3044\u5834\u5408\u306B\u306F List \u3092\u4F7F\u3063\u3066\u3082\u30E1\u30E2\u30EA\u30EA\u30FC\u30AF\u306F\u767A\u751F\u3057\u307E\u305B\u3093\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5177\u4F53\u7684\u306B\u306F\uFF1A"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u30C7\u30FC\u30BF\u91CF\u304C\u6570\u4E07\u4EF6\u306E\u5834\u5408\u3001\u554F\u984C\u3042\u308A\u307E\u305B\u3093\uFF01"}),"\n",(0,i.jsx)(e.li,{children:"\u30C7\u30FC\u30BF\u91CF\u304C\u6570\u767E\u4E07\u4EF6\u306B\u9054\u3059\u308B\u3068\u3001OOM \u304C\u767A\u751F\u3057\u307E\u3059\uFF01"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u3057\u305F\u304C\u3063\u3066\u3001\u3082\u3057\u3042\u306A\u305F\u306E\u30C7\u30FC\u30BF\u91CF\u304C\u5C0F\u898F\u6A21\u3067\u3042\u308C\u3070\u3001\u3053\u306E\u554F\u984C\u306B\u76F4\u9762\u3059\u308B\u3053\u3068\u306F\u306A\u3044\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u30C7\u30FC\u30BF\u91CF\u306E\u5883\u754C\u7DDA\u306B\u3064\u3044\u3066\u306F\u3001\u79C1\u305F\u3061\u3082\u6B63\u78BA\u306B\u306F\u5206\u304B\u308A\u307E\u305B\u3093\u304C\u3001\u304A\u305D\u3089\u304F Python \u3068 PyTorch \u304C\u7279\u5B9A\u306E\u30BF\u30A4\u30DF\u30F3\u30B0\u3067\u4EA4\u4E92\u306B\u51E6\u7406\u3059\u308B\u969B\u306B\u7570\u5E38\u304C\u767A\u751F\u3057\u3066\u3044\u308B\u306E\u3067\u306F\u306A\u3044\u304B\u3068\u63A8\u6E2C\u3055\u308C\u307E\u3059\u3002"})]})}function h(n={}){let{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},50065:function(n,e,t){t.d(e,{Z:function(){return s},a:function(){return a}});var r=t(67294);let i={},o=r.createContext(i);function a(n){let e=r.useContext(o);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),r.createElement(o.Provider,{value:e},n.children)}},45853:function(n){n.exports=JSON.parse('{"permalink":"/ja/blog/pytorch-training-out-of-memory","source":"@site/i18n/ja/docusaurus-plugin-content-blog/2024/02-20-pytorch-training-oom/index.md","title":"PyTorch \u306E List \u30C8\u30E9\u30C3\u30D7","description":"PyTorch OOM \u554F\u984C\u306E\u767A\u898B\u3068\u89E3\u6C7A\u3002","date":"2024-02-20T00:00:00.000Z","tags":[{"inline":true,"label":"PyTorch","permalink":"/ja/blog/tags/py-torch"},{"inline":true,"label":"OOM","permalink":"/ja/blog/tags/oom"}],"readingTime":3.4,"hasTruncateMarker":true,"authors":[{"name":"Zephyr","title":"Engineer","url":"https://github.com/zephyr-sh","imageURL":"https://github.com/zephyr-sh.png","key":"Zephyr","page":null}],"frontMatter":{"slug":"pytorch-training-out-of-memory","title":"PyTorch \u306E List \u30C8\u30E9\u30C3\u30D7","authors":"Zephyr","tags":["PyTorch","OOM"],"image":"/ja/img/2024/0220.webp","description":"PyTorch OOM \u554F\u984C\u306E\u767A\u898B\u3068\u89E3\u6C7A\u3002"},"unlisted":false,"prevItem":{"title":"Nextcloud \u69CB\u7BC9\u8A18\u9332","permalink":"/ja/blog/setting-up-nextcloud"},"nextItem":{"title":"Python \u3067 PDF \u3092\u753B\u50CF\u306B\u5909\u63DB\u3059\u308B","permalink":"/ja/blog/convert-pdf-to-images"}}')}}]);