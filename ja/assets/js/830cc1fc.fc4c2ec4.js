"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["82169"],{17321:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>a,default:()=>u,contentTitle:()=>l,assets:()=>d,toc:()=>o,metadata:()=>s});var s=JSON.parse('{"id":"nginx-notes/static-file-server","title":"Nginx \u306B\u3088\u308B\u9759\u7684\u30EA\u30BD\u30FC\u30B9\u306E\u63D0\u4F9B","description":"\u3053\u306E\u7AE0\u3067\u306F\u3001Docusaurus \u3092\u4F7F\u7528\u3057\u3066\u69CB\u7BC9\u3057\u305F\u9759\u7684\u30B5\u30A4\u30C8\u3092\u4F8B\u306B\u3001Nginx \u3092\u4F7F\u3063\u3066\u30B5\u30A4\u30C8\u3092\u63D0\u4F9B\u3059\u308B\u65B9\u6CD5\u3092\u8AAC\u660E\u3057\u307E\u3059\u3002","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/nginx-notes/static-file-server.md","sourceDirName":"nginx-notes","slug":"/nginx-notes/static-file-server","permalink":"/ja/docs/nginx-notes/static-file-server","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"zephyr-sh","lastUpdatedAt":1740705000000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Nginx \u30ED\u30B0\u3068\u76E3\u8996","permalink":"/ja/docs/nginx-notes/monitoring"},"next":{"title":"\u88DC\u5145\u8CC7\u6599","permalink":"/ja/docs/category/\u88DC\u5145\u8CC7\u6599"}}'),r=i(85893),t=i(50065);let a={sidebar_position:6},l="Nginx \u306B\u3088\u308B\u9759\u7684\u30EA\u30BD\u30FC\u30B9\u306E\u63D0\u4F9B",d={},o=[{value:"\u9759\u7684\u30B5\u30A4\u30C8\u306E\u69CB\u7BC9",id:"\u9759\u7684\u30B5\u30A4\u30C8\u306E\u69CB\u7BC9",level:2},{value:"SSL \u8A3C\u660E\u66F8\u306E\u53D6\u5F97",id:"ssl-\u8A3C\u660E\u66F8\u306E\u53D6\u5F97",level:2},{value:"Nginx \u306E\u8A2D\u5B9A",id:"nginx-\u306E\u8A2D\u5B9A",level:2},{value:"\u9AD8\u5EA6\u306A\u8A2D\u5B9A",id:"\u9AD8\u5EA6\u306A\u8A2D\u5B9A",level:2},{value:"\u7D50\u8AD6",id:"\u7D50\u8AD6",level:2}];function c(n){let e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"nginx-\u306B\u3088\u308B\u9759\u7684\u30EA\u30BD\u30FC\u30B9\u306E\u63D0\u4F9B",children:"Nginx \u306B\u3088\u308B\u9759\u7684\u30EA\u30BD\u30FC\u30B9\u306E\u63D0\u4F9B"})}),"\n",(0,r.jsx)(e.p,{children:"\u3053\u306E\u7AE0\u3067\u306F\u3001Docusaurus \u3092\u4F7F\u7528\u3057\u3066\u69CB\u7BC9\u3057\u305F\u9759\u7684\u30B5\u30A4\u30C8\u3092\u4F8B\u306B\u3001Nginx \u3092\u4F7F\u3063\u3066\u30B5\u30A4\u30C8\u3092\u63D0\u4F9B\u3059\u308B\u65B9\u6CD5\u3092\u8AAC\u660E\u3057\u307E\u3059\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u4EE5\u4E0B\u306E\u3088\u3046\u306B\u3001\u3059\u3067\u306B\u30C9\u30E1\u30A4\u30F3\u540D\u3092\u6E96\u5099\u3057\u3001\u30B5\u30FC\u30D0\u30FC\u306B\u30DD\u30A4\u30F3\u30C8\u3057\u3066\u3044\u308B\u3068\u4EEE\u5B9A\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"your.domain"})}),"\n"]}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:["\u4EE5\u4E0B\u306E\u30B3\u30DE\u30F3\u30C9\u304A\u3088\u3073\u8A2D\u5B9A\u4F8B\u306E",(0,r.jsx)(e.code,{children:"your.domain"}),"\u306F\u3001\u5FC5\u305A\u5B9F\u969B\u306B\u4F7F\u7528\u3059\u308B\u30C9\u30E1\u30A4\u30F3\u540D\u306B\u7F6E\u304D\u63DB\u3048\u3066\u304F\u3060\u3055\u3044\u3002"]})}),"\n",(0,r.jsx)(e.h2,{id:"\u9759\u7684\u30B5\u30A4\u30C8\u306E\u69CB\u7BC9",children:"\u9759\u7684\u30B5\u30A4\u30C8\u306E\u69CB\u7BC9"}),"\n",(0,r.jsxs)(e.p,{children:["\u69CB\u7BC9\u524D\u306B\u3001",(0,r.jsx)(e.code,{children:"docusaurus.config.js"}),"\u30D5\u30A1\u30A4\u30EB\u306E",(0,r.jsx)(e.code,{children:"url"}),"\u304C\u6B63\u3057\u304F\u3042\u306A\u305F\u306E\u30C9\u30E1\u30A4\u30F3\u306B\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u308B\u3053\u3068\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\uFF1A"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",children:'module.exports = {\n  url: "https://your.domain",\n  // ...\u4ED6\u306E\u8A2D\u5B9A\n};\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u78BA\u8A8D\u304C\u5B8C\u4E86\u3057\u305F\u3089\u3001\u4EE5\u4E0B\u306E\u30B3\u30DE\u30F3\u30C9\u3092\u5B9F\u884C\u3057\u3066\u9759\u7684\u30D5\u30A1\u30A4\u30EB\u3092\u751F\u6210\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"DOCUSAURUS_IGNORE_SSG_WARNINGS=true yarn build\n"})}),"\n",(0,r.jsx)(e.admonition,{type:"tip",children:(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"DOCUSAURUS_IGNORE_SSG_WARNINGS"}),"\u74B0\u5883\u5909\u6570\u3092\u4F7F\u7528\u3057\u306A\u3044\u5834\u5408\u3001\u5947\u5999\u306A\u8B66\u544A\u30E1\u30C3\u30BB\u30FC\u30B8\u304C\u5927\u91CF\u306B\u8868\u793A\u3055\u308C\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u304C\u3001\u30D3\u30EB\u30C9\u7D50\u679C\u306B\u306F\u5F71\u97FF\u3057\u307E\u305B\u3093\u3002"]})}),"\n",(0,r.jsxs)(e.p,{children:["\u3053\u306E\u30B3\u30DE\u30F3\u30C9\u306F\u3001",(0,r.jsx)(e.code,{children:"build/"}),"\u30D5\u30A9\u30EB\u30C0\u5185\u306B\u9759\u7684\u306A HTML\u3001CSS\u3001JS \u30D5\u30A1\u30A4\u30EB\u3092\u751F\u6210\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u6B21\u306B\u3001\u30D3\u30EB\u30C9\u3057\u305F\u30D5\u30A1\u30A4\u30EB\u3092\u30B5\u30FC\u30D0\u30FC\u306E\u6307\u5B9A\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3001\u30D5\u30A1\u30A4\u30EB\u6A29\u9650\u3092\u8A2D\u5B9A\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo mkdir -p /var/www/your.domain\nsudo rsync -av build/ /var/www/your.domain/\nsudo chown -R www-data:www-data /var/www/your.domain\n"})}),"\n",(0,r.jsx)(e.h2,{id:"ssl-\u8A3C\u660E\u66F8\u306E\u53D6\u5F97",children:"SSL \u8A3C\u660E\u66F8\u306E\u53D6\u5F97"}),"\n",(0,r.jsx)(e.p,{children:"Let's Encrypt \u3092\u4F7F\u7528\u3057\u3066 SSL \u8A3C\u660E\u66F8\u3092\u767A\u884C\u3057\u3001HTTPS \u7D4C\u7531\u3067\u5B89\u5168\u306B\u30B5\u30FC\u30D3\u30B9\u3092\u63D0\u4F9B\u3059\u308B\u3053\u3068\u3092\u304A\u52E7\u3081\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo apt install certbot python3-certbot-nginx -y\nsudo certbot --nginx -d your.domain\n"})}),"\n",(0,r.jsx)(e.h2,{id:"nginx-\u306E\u8A2D\u5B9A",children:"Nginx \u306E\u8A2D\u5B9A"}),"\n",(0,r.jsx)(e.p,{children:"\u5C02\u7528\u306E Nginx \u8A2D\u5B9A\u30D5\u30A1\u30A4\u30EB\u3092\u4F5C\u6210\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo vim /etc/nginx/sites-available/your.domain\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u8A2D\u5B9A\u5185\u5BB9\u306E\u4F8B\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-nginx",children:"server {\n    listen 80;\n    server_name your.domain;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name your.domain;\n\n    # SSL\u8A3C\u660E\u66F8\uFF08Certbot\u3067\u767A\u884C\u3055\u308C\u305F\u3082\u306E\u3092\u4F7F\u7528\uFF09\n    ssl_certificate /etc/letsencrypt/live/your.domain/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/your.domain/privkey.pem;\n\n    # \u9759\u7684\u30D5\u30A1\u30A4\u30EB\u63D0\u4F9B\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u306E\u8A2D\u5B9A\n    root /var/www/your.domain;\n    index index.html;\n\n    # MIME\u30BF\u30A4\u30D7\u306E\u8A2D\u5B9A\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    location / {\n        try_files $uri $uri/ /index.html;\n    }\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u8A2D\u5B9A\u304C\u5B8C\u4E86\u3057\u305F\u3089\u3001\u8A2D\u5B9A\u30D5\u30A1\u30A4\u30EB\u3092\u6709\u52B9\u306B\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo ln -s /etc/nginx/sites-available/your.domain /etc/nginx/sites-enabled/\n"})}),"\n",(0,r.jsx)(e.p,{children:"Nginx \u8A2D\u5B9A\u3092\u30C6\u30B9\u30C8\u3057\u3066\u518D\u8AAD\u307F\u8FBC\u307F\u3057\u307E\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo nginx -t\nsudo systemctl reload nginx\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u9AD8\u5EA6\u306A\u8A2D\u5B9A",children:"\u9AD8\u5EA6\u306A\u8A2D\u5B9A"}),"\n",(0,r.jsx)(e.p,{children:"\u672C\u756A\u74B0\u5883\u3067\u306F\u3001\u3088\u308A\u591A\u304F\u306E\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u3068\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u8A2D\u5B9A\u3092\u8FFD\u52A0\u3059\u308B\u3053\u3068\u3092\u304A\u52E7\u3081\u3057\u307E\u3059\u3002\u4EE5\u4E0B\u306F\u3001\u5B8C\u5168\u306A\u9AD8\u5EA6\u306A\u8A2D\u5B9A\u4F8B\u3067\u3059\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-nginx",children:'server {\n    listen 80;\n    listen [::]:80;\n    server_name your.domain;\n\n    # \uD83D\uDD12 HTTP\u3092HTTPS\u306B\u81EA\u52D5\u3067\u30EA\u30C0\u30A4\u30EC\u30AF\u30C8\n    return 301 https://$host$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name your.domain;\n\n    ssl_certificate /etc/letsencrypt/live/your.domain/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/your.domain/privkey.pem;\n\n    # \uD83D\uDD12 \u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u30D8\u30C3\u30C0\u30FC\n    add_header Strict-Transport-Security "max-age=63072000; includeSubdomains; preload" always;\n\n    # \uD83D\uDD27 DDoS\u5BFE\u7B56\u3068\u3057\u3066\u30D5\u30A1\u30A4\u30EB\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u30B5\u30A4\u30BA\u306E\u5236\u9650\n    client_max_body_size 10M;\n\n    # \uD83D\uDCC1 build\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\n    root /var/www/your.domain;\n    index index.html;\n\n    # \uD83D\uDDC3\uFE0F \u9759\u7684\u30EA\u30BD\u30FC\u30B9\u306E\u30AD\u30E3\u30C3\u30B7\u30E5\n    location ~* \\.(jpg|jpeg|png|gif|ico|svg|woff2?|ttf|css|js)$ {\n        expires 7d;\n        add_header Cache-Control "public, must-revalidate";\n    }\n\n    # \uD83D\uDD27 \u30E1\u30A4\u30F3\u306E\u30EB\u30FC\u30C6\u30A3\u30F3\u30B0\u898F\u5247\n    location / {\n        try_files $uri $uri/ /index.html;\n    }\n\n    # MIME\u30BF\u30A4\u30D7\u306E\u8A2D\u5B9A\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    # \uD83D\uDD0D \u30AB\u30B9\u30BF\u30E0\u30ED\u30B0\u30D5\u30A1\u30A4\u30EB\u306E\u4F4D\u7F6E\n    access_log /var/log/nginx/your.domain.access.log main;\n    error_log /var/log/nginx/your.domain.error.log warn;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u7D50\u8AD6",children:"\u7D50\u8AD6"}),"\n",(0,r.jsxs)(e.p,{children:["\u4E0A\u8A18\u306E\u624B\u9806\u3068\u9AD8\u5EA6\u306A\u8A2D\u5B9A\u3092\u4F7F\u7528\u3059\u308B\u3053\u3068\u3067\u3001Nginx \u3092\u7528\u3044\u3066\u9759\u7684\u30EA\u30BD\u30FC\u30B9\u3092\u5B89\u5168\u304B\u3064\u52B9\u7387\u7684\u306B\u63D0\u4F9B\u3067\u304D\u307E\u3059\u3002\u8A2D\u5B9A\u304C\u5B8C\u4E86\u3057\u305F\u3089\u3001",(0,r.jsx)(e.code,{children:"https://your.domain"}),"\u3067\u30A6\u30A7\u30D6\u30B5\u30A4\u30C8\u306B\u30A2\u30AF\u30BB\u30B9\u3067\u304D\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u6700\u5F8C\u306B\u3001SSL \u8A3C\u660E\u66F8\u306E\u6709\u52B9\u671F\u9650\u3092\u5B9A\u671F\u7684\u306B\u78BA\u8A8D\u3057\u3001Nginx \u306E\u30D0\u30FC\u30B8\u30E7\u30F3\u3084\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u30EB\u30FC\u30EB\u3092\u66F4\u65B0\u3059\u308B\u3053\u3068\u3092\u5FD8\u308C\u306A\u3044\u3067\u304F\u3060\u3055\u3044\u3002\u3053\u308C\u3089\u306E\u63AA\u7F6E\u306F\u3001\u6F5C\u5728\u7684\u306A\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u30EA\u30B9\u30AF\u304B\u3089\u4FDD\u8B77\u3057\u3001\u30B5\u30A4\u30C8\u306E\u5B89\u5B9A\u3057\u305F\u904B\u7528\u3092\u9577\u671F\u306B\u308F\u305F\u3063\u3066\u78BA\u4FDD\u3059\u308B\u306E\u306B\u5F79\u7ACB\u3061\u307E\u3059\u3002"})]})}function u(n={}){let{wrapper:e}={...(0,t.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}},50065:function(n,e,i){i.d(e,{Z:()=>l,a:()=>a});var s=i(67294);let r={},t=s.createContext(r);function a(n){let e=s.useContext(t);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),s.createElement(t.Provider,{value:e},n.children)}}}]);