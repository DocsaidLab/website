"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["91681"],{53190:function(e,s,r){r.r(s),r.d(s,{default:()=>p});var o=r(74848),t=r(5851),a=r(96540),n=r(13341),d=r(40836),i=r(19393),l=r(75974),w=r(23184),c=r(24638),h=r(91262);let{Text:m}=d.A,u={"zh-hant":{newPasswordLabel:"\u65B0\u5BC6\u78BC",newPasswordRequired:"\u8ACB\u8F38\u5165\u65B0\u5BC6\u78BC",confirmPasswordLabel:"\u78BA\u8A8D\u65B0\u5BC6\u78BC",confirmPasswordRequired:"\u8ACB\u518D\u6B21\u8F38\u5165\u65B0\u5BC6\u78BC",passwordMismatch:"\u5169\u6B21\u8F38\u5165\u7684\u5BC6\u78BC\u4E0D\u4E00\u81F4",passwordTooShort:"\u5BC6\u78BC\u9577\u5EA6\u9700\u81F3\u5C11 8 \u78BC",resetBtn:"\u91CD\u8A2D\u5BC6\u78BC",successMsg:"\u5BC6\u78BC\u91CD\u8A2D\u6210\u529F\uFF01",errorMsg:"\u5BC6\u78BC\u91CD\u8A2D\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66",missingToken:"\u7121\u6548\u6216\u7F3A\u5C11\u91CD\u8A2D\u5BC6\u78BC token",errorModalTitle:"\u5BC6\u78BC\u91CD\u8A2D\u5931\u6557",errorModalOk:"\u78BA\u5B9A",passwordStrengthLabel:"\u5BC6\u78BC\u5F37\u5EA6\uFF1A",strengthTexts:["\u975E\u5E38\u5F31","\u5F31","\u4E2D\u7B49","\u5F37","\u975E\u5E38\u5F37"]},en:{newPasswordLabel:"New Password",newPasswordRequired:"Please enter your new password",confirmPasswordLabel:"Confirm New Password",confirmPasswordRequired:"Please confirm your new password",passwordMismatch:"The two passwords do not match",passwordTooShort:"Password must be at least 8 characters",resetBtn:"Reset Password",successMsg:"Password reset successfully!",errorMsg:"Failed to reset password, please try again later",missingToken:"Missing or invalid reset token",errorModalTitle:"Reset Password Failed",errorModalOk:"OK",passwordStrengthLabel:"Password Strength: ",strengthTexts:["Very Weak","Weak","Medium","Strong","Very Strong"]},ja:{newPasswordLabel:"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9",newPasswordRequired:"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",confirmPasswordLabel:"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u78BA\u8A8D",confirmPasswordRequired:"\u3082\u3046\u4E00\u5EA6\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",passwordMismatch:"\u5165\u529B\u3055\u308C\u305F\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u4E00\u81F4\u3057\u307E\u305B\u3093",passwordTooShort:"\u30D1\u30B9\u30EF\u30FC\u30C9\u306F8\u6587\u5B57\u4EE5\u4E0A\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059",resetBtn:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8",successMsg:"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u30EA\u30BB\u30C3\u30C8\u306B\u6210\u529F\u3057\u307E\u3057\u305F\uFF01",errorMsg:"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u30EA\u30BB\u30C3\u30C8\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\u5F8C\u3067\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044",missingToken:"\u30EA\u30BB\u30C3\u30C8\u30C8\u30FC\u30AF\u30F3\u304C\u7121\u52B9\u304B\u4E0D\u8DB3\u3057\u3066\u3044\u307E\u3059",errorModalTitle:"\u30D1\u30B9\u30EF\u30FC\u30C9\u30EA\u30BB\u30C3\u30C8\u5931\u6557",errorModalOk:"\u78BA\u5B9A",passwordStrengthLabel:"Password Strength: ",strengthTexts:["Very Weak","Weak","Medium","Strong","Very Strong"]}};function g({onSuccess:e}){let{i18n:{currentLocale:s}}=(0,n.A)(),r=u[s]||u.en,[t]=i.A.useForm(),[d,g]=(0,a.useState)(!1),[p,P]=(0,a.useState)(""),[y,f]=(0,a.useState)(!1),[j,k]=(0,a.useState)(""),[b,M]=(0,a.useState)(null),[S,x]=(0,a.useState)(0);(0,a.useEffect)(()=>{M(new URLSearchParams(window.location.search).get("token"))},[]);let T=[{required:!0,message:r.newPasswordRequired},{validator:async(e,s)=>s&&s.length<8?Promise.reject(Error(r.passwordTooShort)):Promise.resolve()}],A=async o=>{if(P(""),k(""),!b){k(r.missingToken),f(!0);return}g(!0);try{let a=await fetch("https://api.docsaid.org/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":s},body:JSON.stringify({token:b,new_password:o.newPassword})});if(!a.ok){let e=await a.json();console.log("Error response:",e);let s=e.error||(e.detail&&"object"==typeof e.detail?e.detail.error:e.detail)||r.errorMsg;throw Error(s)}await a.json(),P(r.successMsg),t.resetFields(),e&&e();let n="/";"en"===s?n="/en":"ja"===s&&(n="/ja"),setTimeout(()=>{window.location.href=n},1500)}catch(e){console.error("Reset password error:",e),k(e.message||r.errorMsg),f(!0)}finally{g(!1)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.A,{form:t,onFinish:A,layout:"vertical",style:{maxWidth:400,margin:"0 auto"},children:[p&&(0,o.jsx)(l.A,{style:{marginBottom:10},message:p,type:"success",showIcon:!0}),(0,o.jsx)(i.A.Item,{label:r.newPasswordLabel,name:"newPassword",rules:T,children:(0,o.jsx)(h.A,{onChange:e=>{let s=e.target.value;s?s.length<6?x(1):s.length<10?x(2):s.length<14?x(3):x(4):x(0)}})}),S>0&&(0,o.jsxs)(m,{type:"secondary",style:{marginBottom:16,display:"block"},children:[r.passwordStrengthLabel,r.strengthTexts[S]]}),(0,o.jsx)(i.A.Item,{label:r.confirmPasswordLabel,name:"confirmPassword",dependencies:["newPassword"],rules:[{required:!0,message:r.confirmPasswordRequired},({getFieldValue:e})=>({validator:(s,o)=>o&&e("newPassword")!==o?Promise.reject(Error(r.passwordMismatch)):Promise.resolve()})],children:(0,o.jsx)(h.A,{hideStrength:!0})}),(0,o.jsx)(i.A.Item,{children:(0,o.jsx)(w.Ay,{type:"primary",htmlType:"submit",block:!0,loading:d,children:r.resetBtn})})]}),(0,o.jsx)(c.A,{open:y,title:r.errorModalTitle,onCancel:()=>f(!1),footer:[(0,o.jsx)(w.Ay,{type:"primary",onClick:()=>f(!1),children:r.errorModalOk},"ok")],children:(0,o.jsx)("p",{children:j})})]})}function p(){return(0,o.jsx)(t.A,{title:"Reset Password",description:"Reset your account password",children:(0,o.jsx)("div",{style:{padding:"2rem"},children:(0,o.jsx)(g,{})})})}}}]);