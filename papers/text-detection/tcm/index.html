<!doctype html><html lang=zh-hant dir=ltr class="docs-wrapper plugin-docs plugin-id-papers docs-version-current docs-doc-page docs-doc-id-text-detection/tcm/index" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>[23.02] TCM | DOCSAID</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://docsaid.org/img/docsaid-social-card.jpg><meta data-rh=true name=twitter:image content=https://docsaid.org/img/docsaid-social-card.jpg><meta data-rh=true property=og:url content=https://docsaid.org/papers/text-detection/tcm/><meta data-rh=true property=og:locale content=zh_hant><meta data-rh=true property=og:locale:alternate content=en><meta data-rh=true property=og:locale:alternate content=ja><meta data-rh=true name=docusaurus_locale content=zh-hant><meta data-rh=true name=docsearch:language content=zh-hant><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-papers-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-papers-current><meta data-rh=true property=og:title content="[23.02] TCM | DOCSAID"><meta data-rh=true name=description content=幾家歡樂幾家愁><meta data-rh=true property=og:description content=幾家歡樂幾家愁><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://docsaid.org/papers/text-detection/tcm/><link data-rh=true rel=alternate href=https://docsaid.org/papers/text-detection/tcm/ hreflang=zh-hant><link data-rh=true rel=alternate href=https://docsaid.org/en/papers/text-detection/tcm/ hreflang=en><link data-rh=true rel=alternate href=https://docsaid.org/ja/papers/text-detection/tcm/ hreflang=ja><link data-rh=true rel=alternate href=https://docsaid.org/papers/text-detection/tcm/ hreflang=x-default><link data-rh=true rel=preconnect href=https://S9NC0RYCHF-dsn.algolia.net crossorigin><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="DOCSAID RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="DOCSAID Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-RDF83L9R4M"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-RDF83L9R4M",{anonymize_ip:!0})</script><link rel=search type=application/opensearchdescription+xml title=DOCSAID href=/opensearch.xml><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css integrity=sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM crossorigin><link rel=stylesheet href=/assets/css/styles.857e8899.css><script src=/assets/js/main.6cd2601f.js defer></script><script src=/assets/js/runtime~main.c8f232ec.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label=跳至主要内容><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>跳至主要内容</a></div><nav aria-label=主導航 class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class=navbar__inner><div class=navbar__items><button aria-label=切換導覽列 aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/docsaid_logo.png alt="Docsaid Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/docsaid_logo_white.png alt="Docsaid Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href=/docs/>開源專案</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/papers/intro>論文筆記</a><a class="navbar__item navbar__link" href=/blog>部落格</a><a class="navbar__item navbar__link" href=/playground/intro>遊樂場</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>繁體中文</a><ul class=dropdown__menu><li><a href=/papers/text-detection/tcm/ rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=zh-hant>繁體中文</a><li><a href=/en/papers/text-detection/tcm/ rel="noopener noreferrer" class=dropdown__link lang=en>English</a><li><a href=/ja/papers/text-detection/tcm/ rel="noopener noreferrer" class=dropdown__link lang=ja>日本語</a></ul></div><a href=https://buymeacoffee.com/zephyr_docsaid target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">支持我們<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><a href=https://github.com/DocsaidLab target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title=切換淺色/深色模式（當前為淺色模式） aria-label=切換淺色/深色模式（當前為淺色模式） aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="搜尋 (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>搜尋</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label=回到頂部 class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex=-1 class=sidebarLogo_isFc href=/><img src=/img/docsaid_logo.png alt="Docsaid Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/img/docsaid_logo_white.png alt="Docsaid Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b></b></a><nav aria-label=文件側邊欄 class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/papers/intro>論文筆記</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/classic-cnns-11>Classic CNNs (11)</a><button aria-label="展開側邊欄分類 'Classic CNNs (11)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/face-anti-spoofing-1>Face Anti-Spoofing (1)</a><button aria-label="展開側邊欄分類 'Face Anti-Spoofing (1)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/face-recognition-4>Face Recognition (4)</a><button aria-label="展開側邊欄分類 'Face Recognition (4)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/feature-fusion-7>Feature Fusion (7)</a><button aria-label="展開側邊欄分類 'Feature Fusion (7)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/lightweight-10>Lightweight (10)</a><button aria-label="展開側邊欄分類 'Lightweight (10)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/mamba-1>Mamba (1)</a><button aria-label="展開側邊欄分類 'Mamba (1)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/model-tuning-8>Model Tuning (8)</a><button aria-label="展開側邊欄分類 'Model Tuning (8)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/multimodality-22>Multimodality (22)</a><button aria-label="展開側邊欄分類 'Multimodality (22)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/normalization-1>Normalization (1)</a><button aria-label="展開側邊欄分類 'Normalization (1)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/object-detection-8>Object Detection (8)</a><button aria-label="展開側邊欄分類 'Object Detection (8)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/reparameterization-7>Reparameterization (7)</a><button aria-label="展開側邊欄分類 'Reparameterization (7)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/segmentation-1>Segmentation (1)</a><button aria-label="展開側邊欄分類 'Segmentation (1)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/papers/category/text-detection-11>Text Detection (11)</a><button aria-label="收起側邊欄分類 'Text Detection (11)'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/papers/text-detection/east/>[17.04] EAST</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/papers/text-detection/textsnake/>[18.07] TextSnake</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/papers/text-detection/psenet/>[19.03] PSENet</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/papers/text-detection/craft/>[19.04] CRAFT</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/papers/text-detection/pan/>[19.08] PAN</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/papers/text-detection/dbnet/>[19.11] DBNet</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/papers/text-detection/textfusenet/>[20.09] TextFuseNet</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/papers/text-detection/textbpn/>[21.07] TextBPN</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/papers/text-detection/fast/>[21.11] FAST</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/papers/text-detection/dbnet_puls_puls/>[22.02] DBNet++</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/papers/text-detection/tcm/>[23.02] TCM</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/text-recognition-20>Text Recognition (20)</a><button aria-label="展開側邊欄分類 'Text Recognition (20)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/text-spotting-4>Text Spotting (4)</a><button aria-label="展開側邊欄分類 'Text Spotting (4)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/transformers-15>Transformers (15)</a><button aria-label="展開側邊欄分類 'Transformers (15)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/papers/category/vision-transformers-11>Vision Transformers (11)</a><button aria-label="展開側邊欄分類 'Vision Transformers (11)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/papers/intro>All Notes: 142 entries</a></ul></nav><button type=button title=收起側邊欄 aria-label=收起側邊欄 class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width=20 height=20 aria-hidden=true class=collapseSidebarButtonIcon_kv0_><g fill=#7a7a7a><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"/><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"/></g></svg></button></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=頁面路徑><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label=主頁面 class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/papers/category/text-detection-11><span itemprop=name>Text Detection (11)</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>[23.02] TCM</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">本頁導覽</button></div><div class="theme-doc-markdown markdown"><header><h1>[23.02] TCM</h1></header>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=幾家歡樂幾家愁>幾家歡樂幾家愁<a href=#幾家歡樂幾家愁 class=hash-link aria-label=幾家歡樂幾家愁的直接連結 title=幾家歡樂幾家愁的直接連結>​</a></h2>
<p><a href=https://arxiv.org/abs/2302.14338 target=_blank rel="noopener noreferrer"><strong>Turning a CLIP Model into a Scene Text Detector</strong></a></p>
<hr>
<p>對比學習的足跡，已經在許多領域中留下了深刻的印象。</p>
<p>文字偵測的研究者們，也理所當然地想來共襄盛舉。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=定義問題>定義問題<a href=#定義問題 class=hash-link aria-label=定義問題的直接連結 title=定義問題的直接連結>​</a></h2>
<p>多模態的應用非常熱門，尤其在 CLIP 模型開源之後，那個簡單的概念讓研究者們趨之若鶩。</p>
<p>大家都想方設法地要把預訓練的模型應用在自己的領域上，好搭上最新的潮流。</p>
<p>等一下！你說你還不知道什麼是 CLIP？</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>提示</div><div class=admonitionContent_BuS1><p>我們已經讀過了 CLIP，還沒接觸過的讀者可以參考我們之前的文章：<ul>
<li><a href=/papers/multimodality/clip/><strong>[21.03] CLIP: 打碎次元的屏障</strong></a></li>
</ul></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=clip>CLIP<a href=#clip class=hash-link aria-label=CLIP的直接連結 title=CLIP的直接連結>​</a></h3>
<p>這一章節已經重複好幾次了，我們再次簡單介紹一下 CLIP。</p>
<p>下圖就是 CLIP 架構：</p>
<p><img decoding=async loading=lazy alt="clip arch" src=/assets/images/arch_clip-ef4a34c3ec1c19ee45e598ca12ff5459.jpg width=1726 height=622 class=img_ev3q></p>
<p>假設我們有一組圖像-文字對，其中一對可能是一張狗的圖片和文字「一隻可愛的小狗」。</p>
<p>在一個訓練批次中，CLIP 會接收到多個這樣的對。圖像編碼器可能透過 ResNet 或 ViT 來處理圖像，獲取圖像特徵，而文本編碼器可能透過 Transformer 來處理文本，獲取文字特徵。</p>
<p>然後，模型會比較這些特徵，以確保正確配對的圖像和文字（例如：狗的圖像和「一隻可愛的小狗」的文字）之間的餘弦相似度最大，而錯誤配對的圖像和文字（ 例如：狗的圖像和「一個蘋果」的文字）之間的餘弦相似度最小。</p>
<p>最後，使用 4 億組圖像文本對，進行訓練。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=多模態神經元>多模態神經元<a href=#多模態神經元 class=hash-link aria-label=多模態神經元的直接連結 title=多模態神經元的直接連結>​</a></h3>
<p>在 CLIP 發表後不久，OpenAI 針對 CLIP 模型進行了一些研究，發現了一些有趣的現象。</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>資訊</div><div class=admonitionContent_BuS1><p>論文原文在這裡：<ul>
<li><a href=https://distill.pub/2021/multimodal-neurons/ target=_blank rel="noopener noreferrer"><strong>[21.03] Multimodal Neurons in Artificial Neural Networks</strong></a></li>
</ul><p>這篇文章主要讓人們更了解多模態模型的內心世界，並激發研究者的思考，我們非常推薦讀者閱讀！</div></div>
<p>在這篇論文中指出 CLIP 的神經元有著專業的分工模式，像是有負責處理情緒的神經元或是處理地理位置的神經元。</p>
<p>跟文字比較相關的是下面這張圖，我們一起來看看：</p>
<div align=center><figure style=width:90%><p><img decoding=async loading=lazy alt="text attack" src=/assets/images/img2-b4607c90bbcf523c080eb1fa2dba7620.jpg width=1712 height=914 class=img_ev3q></figure></div>
<p>最左邊的是原始的圖像輸入，模型對此沒有表現出什麼差錯，都可以正確的認出圖片所對應的內容。</p>
<p>但從第二張圖開始，就有趣了。</p>
<p>後續的輸入中，上面疊加了文字干擾，例如一張「ipad」或「pizza」的文字區塊，然後我們驚訝的發現：</p>
<ul>
<li><strong>模型居然就這樣被帶偏了！</strong></li>
</ul>
<p>當有文字出現在圖片中的時候，模型會優先去辨識文字，而不是圖片，這非常反直覺！</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>提示</div><div class=admonitionContent_BuS1><p>直覺上，我們認為文字的區塊非常少，僅僅占了圖像的「一點點」像素值，模型應該不會被這麼少的區域影響吧？</div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=所以我們應該要>所以我們應該要？<a href=#所以我們應該要 class=hash-link aria-label=所以我們應該要？的直接連結 title=所以我們應該要？的直接連結>​</a></h3>
<p>OpenAI 的研究者們認為這個一個嚴重的問題，因為這表示 CLIP 模型對於文字的敏感度過高，在終端應用中可能會受到有心人的攻擊。</p>
<p>惡意行為可以透過文字的干擾，來影響模型的辨識結果，最後導向錯誤（但對攻擊者有利）的結果。因此對於 OpenAI 來說，他們要克服的問題就是文字攻擊，避免讓文字輕易地影響到最終的圖像辨識結果。</p>
<p>但對於文字偵測的研究者來說：</p>
<ul>
<li><strong>這個不是 Bug 啊，這是 Feature 啊！</strong></li>
</ul>
<p>原來 CLIP 是個天生親和文字的模型，這不論是對文字偵測和辨識領域都是天大的好消息！</p>
<p>所以我們不只要用，還要狠狠地用！</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=解決問題>解決問題<a href=#解決問題 class=hash-link aria-label=解決問題的直接連結 title=解決問題的直接連結>​</a></h2>
<p>要有效地使用 CLIP 的預訓練知識，在過去的文獻中已經有許多研究，比較著名的是 CoOp。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>提示</div><div class=admonitionContent_BuS1><p>這裡有兩篇連續的論文，不知道 CoOp 的讀者可以參考：<ul>
<li><a href=/papers/model-tuning/coop/><strong>[21.09] CoOp: 搖曳的呢喃</strong></a></li>
<li><a href=/papers/model-tuning/cocoop/><strong>[22.03] CoCoOp: 先看過影像再說</strong></a></li>
</ul></div></div>
<p>簡單來說，就是把影像輸入 CLIP 的影像分支，得到影像特徵；接著把提示文字輸入 CLIP 的文字分支，得到文字特徵。透過這種方式來轉移 CLIP 的知識，進而應用在文字偵測的任務上。</p>
<p>影像分支沒什麼好動手腳的，因為影像就是影像，不太能做什麼改變；但文字分支就可以大作文章了，剛才提到的知識轉移的任務，就是透過文字分支來完成的。</p>
<p>在剛才提到的 CoCoOp 的研究中，研究者將影像特徵用來產出文字分支的提示，透過自適應的 Prompt learning 的方式來提升文字分支的表現，這個技巧在後續研究中得到廣泛的應用。</p>
<p>在這篇文章中，作者也是基於這個技巧，提出了一個提取 CLIP 知識的模型架構。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=模型架構>模型架構<a href=#模型架構 class=hash-link aria-label=模型架構的直接連結 title=模型架構的直接連結>​</a></h3>
<div align=center><figure style=width:90%><p><img decoding=async loading=lazy alt="model arch" src=/assets/images/img1-c5605697713415f086eb6722f9074a4c.jpg width=1224 height=712 class=img_ev3q></figure></div>
<p>這個模型的架構作者將其命名為 TCM，看起來有點複雜，我們一步一步來看看：</p>
<p>首先作者使用 CLIP 的預訓練 ResNet50 作為影像編碼器，將輸入影像 <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>I</mi><mn>0</mn></msub><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mrow><mi>H</mi><mo>×</mo><mi>W</mi><mo>×</mo><mn>3</mn></mrow></msup></mrow><annotation encoding=application/x-tex>I_0 \in \mathbb{R}^{H \times W \times 3}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.8333em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.07847em>I</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:-0.0785em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.8413em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8413em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:0.08125em>H</span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style=margin-right:0.13889em>W</span><span class="mbin mtight">×</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span> 映射為嵌入向量 <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>I</mi><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mrow><mover accent=true><mi>H</mi><mo>~</mo></mover><mo>×</mo><mover accent=true><mi>W</mi><mo>~</mo></mover><mo>×</mo><mi>C</mi></mrow></msup></mrow><annotation encoding=application/x-tex>I \in \mathbb{R}^{\tilde{H} \times \tilde{W} \times C}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.7224em;vertical-align:-0.0391em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1.0071em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:1.0071em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-2.7em><span class=pstrut style=height:2.7em></span><span class="mord mathnormal mtight" style=margin-right:0.08125em>H</span></span><span style=top:-3.3023em><span class=pstrut style=height:2.7em></span><span class=accent-body style=left:-0.1944em><span class="mord mtight">~</span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord accent mtight"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-2.7em><span class=pstrut style=height:2.7em></span><span class="mord mathnormal mtight" style=margin-right:0.13889em>W</span></span><span style=top:-3.3023em><span class=pstrut style=height:2.7em></span><span class=accent-body style=left:-0.25em><span class="mord mtight">~</span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style=margin-right:0.07153em>C</span></span></span></span></span></span></span></span></span></span></span></span>，其中：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><mover accent=true><mi>H</mi><mo>~</mo></mover><mo>=</mo><mfrac><mi>H</mi><mi>s</mi></mfrac><mo separator=true>,</mo><mspace width=1em /><mover accent=true><mi>W</mi><mo>~</mo></mover><mo>=</mo><mfrac><mi>W</mi><mi>s</mi></mfrac><mo separator=true>,</mo><mspace width=1em /><mi>C</mi><mo>=</mo><mn>1024</mn><mo separator=true>,</mo><mspace width=1em /><mi>s</mi><mo>=</mo><mn>32</mn></mrow><annotation encoding=application/x-tex>\tilde{H} = \frac{H}{s}, \quad \tilde{W} = \frac{W}{s}, \quad C = 1024, \quad s = 32</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.9202em></span><span class="mord accent"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-3em><span class=pstrut style=height:3em></span><span class="mord mathnormal" style=margin-right:0.08125em>H</span></span><span style=top:-3.6023em><span class=pstrut style=height:3em></span><span class=accent-body style=left:-0.1944em><span class=mord>~</span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:2.0463em;vertical-align:-0.686em></span><span class=mord><span class="mopen nulldelimiter"></span><span class=mfrac><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:1.3603em><span style=top:-2.314em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal">s</span></span></span><span style=top:-3.23em><span class=pstrut style=height:3em></span><span class=frac-line style=border-bottom-width:0.04em></span></span><span style=top:-3.677em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.08125em>H</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.686em><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:1em></span><span class=mspace style=margin-right:0.1667em></span><span class="mord accent"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-3em><span class=pstrut style=height:3em></span><span class="mord mathnormal" style=margin-right:0.13889em>W</span></span><span style=top:-3.6023em><span class=pstrut style=height:3em></span><span class=accent-body style=left:-0.25em><span class=mord>~</span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:2.0463em;vertical-align:-0.686em></span><span class=mord><span class="mopen nulldelimiter"></span><span class=mfrac><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:1.3603em><span style=top:-2.314em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal">s</span></span></span><span style=top:-3.23em><span class=pstrut style=height:3em></span><span class=frac-line style=border-bottom-width:0.04em></span></span><span style=top:-3.677em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.13889em>W</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.686em><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:1em></span><span class=mspace style=margin-right:0.1667em></span><span class="mord mathnormal" style=margin-right:0.07153em>C</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.8389em;vertical-align:-0.1944em></span><span class=mord>1024</span><span class=mpunct>,</span><span class=mspace style=margin-right:1em></span><span class=mspace style=margin-right:0.1667em></span><span class="mord mathnormal">s</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.6444em></span><span class=mord>32</span></span></span></span></span>
<p>公式表示如下：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><mi>I</mi><mo>=</mo><mtext>ImageEncoder</mtext><mo stretchy=false>(</mo><msub><mi>I</mi><mn>0</mn></msub><mo stretchy=false>)</mo></mrow><annotation encoding=application/x-tex>I = \text{ImageEncoder}(I_0)</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.6833em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-0.25em></span><span class="mord text"><span class=mord>ImageEncoder</span></span><span class=mopen>(</span><span class=mord><span class="mord mathnormal" style=margin-right:0.07847em>I</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:-0.0785em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mclose>)</span></span></span></span></span>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>提示</div><div class=admonitionContent_BuS1><p>上述公式只是在描述影像輸入 ResNet 之後，經過五次降採樣的過程，如果這裡的數學描述對你來說有困難，那可能得先了解一下 CNN 的基礎知識。</div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=語言提示生成器>語言提示生成器<a href=#語言提示生成器 class=hash-link aria-label=語言提示生成器的直接連結 title=語言提示生成器的直接連結>​</a></h3>
<p>就是上圖中的 <code>Language Prompt Generator</code>。</p>
<p>在上一步驟中，我們已經得到影像特徵。</p>
<p>接著就是要調動文字分支的知識，這裡基於 CoOp 的啟發，在文字編碼器的輸入中加入可學習提示 <span class=katex><span class=katex-mathml><math><semantics><mrow><mo stretchy=false>{</mo><msub><mi>c</mi><mn>1</mn></msub><mo separator=true>,</mo><mo>…</mo><mo separator=true>,</mo><msub><mi>c</mi><mi>n</mi></msub><mo stretchy=false>}</mo></mrow><annotation encoding=application/x-tex>\{c_1, \dots, c_n\}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1em;vertical-align:-0.25em></span><span class=mopen>{</span><span class=mord><span class="mord mathnormal">c</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:0.1667em></span><span class=minner>…</span><span class=mspace style=margin-right:0.1667em></span><span class=mpunct>,</span><span class=mspace style=margin-right:0.1667em></span><span class=mord><span class="mord mathnormal">c</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.1514em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mclose>}</span></span></span></span>，用於增強文字嵌入的遷移能力，公式如下：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><msub><mi>t</mi><mtext>in</mtext></msub><mo>=</mo><mo stretchy=false>[</mo><msub><mi>c</mi><mn>1</mn></msub><mo separator=true>,</mo><mo>…</mo><mo separator=true>,</mo><msub><mi>c</mi><mi>n</mi></msub><mo separator=true>,</mo><msubsup><mi>t</mi><mtext>in</mtext><mn>0</mn></msubsup><mo stretchy=false>]</mo><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mrow><mo stretchy=false>(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=false>)</mo><mo>×</mo><mi>D</mi></mrow></msup></mrow><annotation encoding=application/x-tex>t_\text{in} = [c_1, \dots, c_n, t_\text{in}^0] \in \mathbb{R}^{(n+1) \times D}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.7651em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3175em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">in</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1.1141em;vertical-align:-0.25em></span><span class=mopen>[</span><span class=mord><span class="mord mathnormal">c</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:0.1667em></span><span class=minner>…</span><span class=mspace style=margin-right:0.1667em></span><span class=mpunct>,</span><span class=mspace style=margin-right:0.1667em></span><span class=mord><span class="mord mathnormal">c</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.1514em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:0.1667em></span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.8641em><span style=top:-2.453em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">in</span></span></span></span><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.247em><span></span></span></span></span></span></span><span class=mclose>]</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.938em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.938em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style=margin-right:0.02778em>D</span></span></span></span></span></span></span></span></span></span></span></span></span>
<p>語言提示生成器基於剛才得到的影像特徵 <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>I</mi></mrow><annotation encoding=application/x-tex>I</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.6833em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span></span></span></span>，生成提示 <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>c</mi><mi>c</mi></mrow><annotation encoding=application/x-tex>cc</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.4306em></span><span class="mord mathnormal">cc</span></span></span></span>，公式如下：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><mi>c</mi><mi>c</mi><mo>=</mo><mtext>LN</mtext><mo stretchy=false>(</mo><mi>σ</mi><mo stretchy=false>(</mo><mtext>LN</mtext><mo stretchy=false>(</mo><mover accent=true><mi>I</mi><mo>ˉ</mo></mover><mo stretchy=false>)</mo><msub><mi>W</mi><mn>1</mn></msub><mo>+</mo><msub><mi>b</mi><mn>1</mn></msub><mo stretchy=false>)</mo><mo stretchy=false>)</mo><msub><mi>W</mi><mn>2</mn></msub><mo>+</mo><msub><mi>b</mi><mn>2</mn></msub><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mi>D</mi></msup></mrow><annotation encoding=application/x-tex>cc = \text{LN}(\sigma(\text{LN}(\bar{I})W_1 + b_1))W_2 + b_2 \in \mathbb{R}^D</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.4306em></span><span class="mord mathnormal">cc</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1.0701em;vertical-align:-0.25em></span><span class="mord text"><span class=mord>LN</span></span><span class=mopen>(</span><span class="mord mathnormal" style=margin-right:0.03588em>σ</span><span class=mopen>(</span><span class="mord text"><span class=mord>LN</span></span><span class=mopen>(</span><span class="mord accent"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8201em><span style=top:-3em><span class=pstrut style=height:3em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span></span><span style=top:-3.2523em><span class=pstrut style=height:3em></span><span class=accent-body style=left:-0.1389em><span class=mord>ˉ</span></span></span></span></span></span></span><span class=mclose>)</span><span class=mord><span class="mord mathnormal" style=margin-right:0.13889em>W</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:-0.1389em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2222em></span><span class=mbin>+</span><span class=mspace style=margin-right:0.2222em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-0.25em></span><span class=mord><span class="mord mathnormal">b</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mclose>))</span><span class=mord><span class="mord mathnormal" style=margin-right:0.13889em>W</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:-0.1389em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2222em></span><span class=mbin>+</span><span class=mspace style=margin-right:0.2222em></span></span><span class=base><span class=strut style=height:0.8444em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">b</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.8913em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8913em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style=margin-right:0.02778em>D</span></span></span></span></span></span></span></span></span></span></span></span>
<p>其中 <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>W</mi><mn>1</mn></msub><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mrow><mi>C</mi><mo>×</mo><mi>C</mi></mrow></msup><mo separator=true>,</mo><msub><mi>W</mi><mn>2</mn></msub><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mrow><mi>C</mi><mo>×</mo><mi>D</mi></mrow></msup><mo separator=true>,</mo><msub><mi>b</mi><mn>1</mn></msub><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mi>C</mi></msup><mo separator=true>,</mo><msub><mi>b</mi><mn>2</mn></msub><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mi>D</mi></msup></mrow><annotation encoding=application/x-tex>W_1 \in \mathbb{R}^{C \times C}, W_2 \in \mathbb{R}^{C \times D}, b_1 \in \mathbb{R}^C, b_2 \in \mathbb{R}^D</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.8333em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.13889em>W</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:-0.1389em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1.0358em;vertical-align:-0.1944em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8413em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:0.07153em>C</span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style=margin-right:0.07153em>C</span></span></span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:0.1667em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.13889em>W</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:-0.1389em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1.0358em;vertical-align:-0.1944em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8413em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:0.07153em>C</span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style=margin-right:0.02778em>D</span></span></span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:0.1667em></span><span class=mord><span class="mord mathnormal">b</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1.0358em;vertical-align:-0.1944em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8413em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style=margin-right:0.07153em>C</span></span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:0.1667em></span><span class=mord><span class="mord mathnormal">b</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.8413em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8413em><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style=margin-right:0.02778em>D</span></span></span></span></span></span></span></span></span></span></span>。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>提示</div><div class=admonitionContent_BuS1><p>這個數學式的閱讀方式是：<ol>
<li>將 <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>I</mi></mrow><annotation encoding=application/x-tex>I</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.6833em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span></span></span></span> 通過一個線性變換 <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>W</mi><mn>1</mn></msub></mrow><annotation encoding=application/x-tex>W_1</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.8333em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.13889em>W</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:-0.1389em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span></span></span></span>，然後加上偏置 <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>b</mi><mn>1</mn></msub></mrow><annotation encoding=application/x-tex>b_1</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.8444em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">b</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span></span></span></span>，再通過 LN 和 Sigmoid 函數；</li>
<li>再將結果通過另一個線性變換 <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>W</mi><mn>2</mn></msub></mrow><annotation encoding=application/x-tex>W_2</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.8333em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.13889em>W</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:-0.1389em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span></span></span></span>，再加上偏置 <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>b</mi><mn>2</mn></msub></mrow><annotation encoding=application/x-tex>b_2</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.8444em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">b</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3011em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span></span></span></span>，最後得到提示 <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>c</mi><mi>c</mi></mrow><annotation encoding=application/x-tex>cc</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.4306em></span><span class="mord mathnormal">cc</span></span></span></span>。</li>
</ol></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=文字編碼器>文字編碼器<a href=#文字編碼器 class=hash-link aria-label=文字編碼器的直接連結 title=文字編碼器的直接連結>​</a></h3>
<p>論文中使用凍結的 CLIP 預訓練文字編碼器，並設置預定義提示為「Text」。</p>
<p>文字編碼器將預設的單類別提示嵌入到連續向量空間，公式如下：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><msubsup><mi>t</mi><mtext>in</mtext><mn>0</mn></msubsup><mo>=</mo><mtext>WordEmbedding</mtext><mo stretchy=false>(</mo><mtext>Text</mtext><mo stretchy=false>)</mo><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mi>D</mi></msup></mrow><annotation encoding=application/x-tex>t_\text{in}^0 = \text{WordEmbedding}(\text{Text}) \in \mathbb{R}^D</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:1.1111em;vertical-align:-0.247em></span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.8641em><span style=top:-2.453em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">in</span></span></span></span><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.247em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-0.25em></span><span class="mord text"><span class=mord>WordEmbedding</span></span><span class=mopen>(</span><span class="mord text"><span class=mord>Text</span></span><span class=mclose>)</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.8913em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8913em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style=margin-right:0.02778em>D</span></span></span></span></span></span></span></span></span></span></span></span>
<p>其中 <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>D</mi><mo>=</mo><mn>512</mn></mrow><annotation encoding=application/x-tex>D = 512</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.6833em></span><span class="mord mathnormal" style=margin-right:0.02778em>D</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.6444em></span><span class=mord>512</span></span></span></span>。</p>
<p>最終結合提示和文字嵌入，得到最終的文字嵌入 <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>t</mi><mtext>out</mtext></msub></mrow><annotation encoding=application/x-tex>t_\text{out}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.7651em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.2806em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span></span></span></span>：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><msub><mi>t</mi><mtext>out</mtext></msub><mo>=</mo><mtext>TextEncoder</mtext><mo stretchy=false>(</mo><msub><mi>t</mi><mtext>in</mtext></msub><mo stretchy=false>)</mo><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mi>C</mi></msup></mrow><annotation encoding=application/x-tex>t_\text{out} = \text{TextEncoder}(t_\text{in}) \in \mathbb{R}^C</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.7651em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.2806em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-0.25em></span><span class="mord text"><span class=mord>TextEncoder</span></span><span class=mopen>(</span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3175em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">in</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mclose>)</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.8913em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.8913em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style=margin-right:0.07153em>C</span></span></span></span></span></span></span></span></span></span></span></span>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=視覺提示生成器>視覺提示生成器<a href=#視覺提示生成器 class=hash-link aria-label=視覺提示生成器的直接連結 title=視覺提示生成器的直接連結>​</a></h3>
<p>要看上圖中的 <code>Visual Prompt</code> 部分。</p>
<p>這裡使用 Transformer 的交叉注意力機制，學習視覺提示 <span class=katex><span class=katex-mathml><math><semantics><mrow><mover accent=true><mi>I</mi><mo>~</mo></mover></mrow><annotation encoding=application/x-tex>\tilde{I}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.9202em></span><span class="mord accent"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-3em><span class=pstrut style=height:3em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span></span><span style=top:-3.6023em><span class=pstrut style=height:3em></span><span class=accent-body style=left:-0.1389em><span class=mord>~</span></span></span></span></span></span></span></span></span></span>，傳遞從影像層級到文字實例層級的信息，公式如下：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><mover accent=true><mi>I</mi><mo>~</mo></mover><mo>=</mo><mtext>TDec</mtext><mo stretchy=false>(</mo><mi>Q</mi><mo>=</mo><mi>I</mi><mo separator=true>,</mo><mi>K</mi><mo>=</mo><msub><mi>t</mi><mtext>out</mtext></msub><mo separator=true>,</mo><mi>V</mi><mo>=</mo><msub><mi>t</mi><mtext>out</mtext></msub><mo stretchy=false>)</mo><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mrow><mover accent=true><mi>H</mi><mo>~</mo></mover><mo>×</mo><mover accent=true><mi>W</mi><mo>~</mo></mover><mo>×</mo><mi>C</mi></mrow></msup></mrow><annotation encoding=application/x-tex>\tilde{I} = \text{TDec}(Q = I, K = t_\text{out}, V = t_\text{out}) \in \mathbb{R}^{\tilde{H} \times \tilde{W} \times C}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.9202em></span><span class="mord accent"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-3em><span class=pstrut style=height:3em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span></span><span style=top:-3.6023em><span class=pstrut style=height:3em></span><span class=accent-body style=left:-0.1389em><span class=mord>~</span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-0.25em></span><span class="mord text"><span class=mord>TDec</span></span><span class=mopen>(</span><span class="mord mathnormal">Q</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.8778em;vertical-align:-0.1944em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span><span class=mpunct>,</span><span class=mspace style=margin-right:0.1667em></span><span class="mord mathnormal" style=margin-right:0.07153em>K</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.8778em;vertical-align:-0.1944em></span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.2806em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mpunct>,</span><span class=mspace style=margin-right:0.1667em></span><span class="mord mathnormal" style=margin-right:0.22222em>V</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1em;vertical-align:-0.25em></span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.2806em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mclose>)</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1.0571em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:1.0571em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-2.7em><span class=pstrut style=height:2.7em></span><span class="mord mathnormal mtight" style=margin-right:0.08125em>H</span></span><span style=top:-3.3023em><span class=pstrut style=height:2.7em></span><span class=accent-body style=left:-0.1944em><span class="mord mtight">~</span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord accent mtight"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-2.7em><span class=pstrut style=height:2.7em></span><span class="mord mathnormal mtight" style=margin-right:0.13889em>W</span></span><span style=top:-3.3023em><span class=pstrut style=height:2.7em></span><span class=accent-body style=left:-0.25em><span class="mord mtight">~</span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord mathnormal mtight" style=margin-right:0.07153em>C</span></span></span></span></span></span></span></span></span></span></span></span></span>
<p>影像嵌入經提示調整為：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><mover accent=true><mi>I</mi><mo>^</mo></mover><mo>=</mo><mi>I</mi><mo>+</mo><mover accent=true><mi>I</mi><mo>~</mo></mover></mrow><annotation encoding=application/x-tex>\hat{I} = I + \tilde{I}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.9468em></span><span class="mord accent"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9468em><span style=top:-3em><span class=pstrut style=height:3em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span></span><span style=top:-3.2523em><span class=pstrut style=height:3em></span><span class=accent-body style=left:-0.1389em><span class=mord>^</span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.7667em;vertical-align:-0.0833em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span><span class=mspace style=margin-right:0.2222em></span><span class=mbin>+</span><span class=mspace style=margin-right:0.2222em></span></span><span class=base><span class=strut style=height:0.9202em></span><span class="mord accent"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-3em><span class=pstrut style=height:3em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span></span><span style=top:-3.6023em><span class=pstrut style=height:3em></span><span class=accent-body style=left:-0.1389em><span class=mord>~</span></span></span></span></span></span></span></span></span></span></span>
<p>這個步驟完成後，會得到上圖中的 <code>Locality Embeddings</code>。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>提示</div><div class=admonitionContent_BuS1><p>查詢主體是影像特徵 <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>I</mi></mrow><annotation encoding=application/x-tex>I</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.6833em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span></span></span></span>，而鍵和值都是文字特徵 <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>t</mi><mtext>out</mtext></msub></mrow><annotation encoding=application/x-tex>t_\text{out}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.7651em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.2806em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span></span></span></span>，這樣的設計是為了讓影像特徵能夠「感知」並「融合」到文字的提示。</div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=實例-語言匹配>實例-語言匹配<a href=#實例-語言匹配 class=hash-link aria-label=實例-語言匹配的直接連結 title=實例-語言匹配的直接連結>​</a></h3>
<p>將文字嵌入 <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>t</mi><mtext>out</mtext></msub></mrow><annotation encoding=application/x-tex>t_\text{out}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.7651em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.2806em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span></span></span></span> 與調整後的影像嵌入 <span class=katex><span class=katex-mathml><math><semantics><mrow><mover accent=true><mi>I</mi><mo>^</mo></mover></mrow><annotation encoding=application/x-tex>\hat{I}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.9468em></span><span class="mord accent"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9468em><span style=top:-3em><span class=pstrut style=height:3em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span></span><span style=top:-3.2523em><span class=pstrut style=height:3em></span><span class=accent-body style=left:-0.1389em><span class=mord>^</span></span></span></span></span></span></span></span></span></span> 進行點積並經 Sigmoid 激活，生成二元分割圖 <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>P</mi></mrow><annotation encoding=application/x-tex>P</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.6833em></span><span class="mord mathnormal" style=margin-right:0.13889em>P</span></span></span></span>：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><mi>P</mi><mo>=</mo><mtext>sigmoid</mtext><mrow><mo fence=true>(</mo><mfrac><mrow><mover accent=true><mi>I</mi><mo>^</mo></mover><msubsup><mi>t</mi><mtext>out</mtext><mi mathvariant=normal>⊤</mi></msubsup></mrow><mi>τ</mi></mfrac><mo fence=true>)</mo></mrow><mo>∈</mo><msup><mi mathvariant=double-struck>R</mi><mrow><mover accent=true><mi>H</mi><mo>~</mo></mover><mo>×</mo><mover accent=true><mi>W</mi><mo>~</mo></mover><mo>×</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=application/x-tex>P = \text{sigmoid}\left(\frac{\hat{I} t_\text{out}^\top}{\tau}\right) \in \mathbb{R}^{\tilde{H} \times \tilde{W} \times 1}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.6833em></span><span class="mord mathnormal" style=margin-right:0.13889em>P</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:3em;vertical-align:-1.25em></span><span class="mord text"><span class=mord>sigmoid</span></span><span class=mspace style=margin-right:0.1667em></span><span class=minner><span class="mopen delimcenter" style=top:0em><span class="delimsizing size4">(</span></span><span class=mord><span class="mopen nulldelimiter"></span><span class=mfrac><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:1.6238em><span style=top:-2.314em><span class=pstrut style=height:3em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.1132em>τ</span></span></span><span style=top:-3.23em><span class=pstrut style=height:3em></span><span class=frac-line style=border-bottom-width:0.04em></span></span><span style=top:-3.677em><span class=pstrut style=height:3em></span><span class=mord><span class="mord accent"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9468em><span style=top:-3em><span class=pstrut style=height:3em></span><span class="mord mathnormal" style=margin-right:0.07847em>I</span></span><span style=top:-3.2523em><span class=pstrut style=height:3em></span><span class=accent-body style=left:-0.1389em><span class=mord>^</span></span></span></span></span></span></span><span class=mord><span class="mord mathnormal">t</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.8491em><span style=top:-2.453em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span><span style=top:-3.063em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">⊤</span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.247em><span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.686em><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style=top:0em><span class="delimsizing size4">)</span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>∈</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:1.0571em></span><span class=mord><span class="mord mathbb">R</span><span class=msupsub><span class=vlist-t><span class=vlist-r><span class=vlist style=height:1.0571em><span style=top:-3.113em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-2.7em><span class=pstrut style=height:2.7em></span><span class="mord mathnormal mtight" style=margin-right:0.08125em>H</span></span><span style=top:-3.3023em><span class=pstrut style=height:2.7em></span><span class=accent-body style=left:-0.1944em><span class="mord mtight">~</span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord accent mtight"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-2.7em><span class=pstrut style=height:2.7em></span><span class="mord mathnormal mtight" style=margin-right:0.13889em>W</span></span><span style=top:-3.3023em><span class=pstrut style=height:2.7em></span><span class=accent-body style=left:-0.25em><span class="mord mtight">~</span></span></span></span></span></span></span><span class="mbin mtight">×</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span>
<p>分割圖與真值 <span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>y</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding=application/x-tex>y_{ij}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.7167em;vertical-align:-0.2861em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.03588em>y</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3117em><span style=top:-2.55em;margin-left:-0.0359em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:0.05724em>ij</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.2861em><span></span></span></span></span></span></span></span></span></span> 的二元交叉熵損失（BCE Loss）為：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><msub><mi>L</mi><mtext>aux</mtext></msub><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mover accent=true><mi>H</mi><mo>~</mo></mover></munderover><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mover accent=true><mi>W</mi><mo>~</mo></mover></munderover><mrow><mo fence=true>[</mo><msub><mi>y</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mi>log</mi><mo>⁡</mo><mo stretchy=false>(</mo><msub><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=false>)</mo><mo>+</mo><mo stretchy=false>(</mo><mn>1</mn><mo>−</mo><msub><mi>y</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=false>)</mo><mi>log</mi><mo>⁡</mo><mo stretchy=false>(</mo><mn>1</mn><mo>−</mo><msub><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=false>)</mo><mo fence=true>]</mo></mrow></mrow><annotation encoding=application/x-tex>L_\text{aux} = \sum_{i=1}^{\tilde{H}} \sum_{j=1}^{\tilde{W}} \left[y_{ij} \log(P_{ij}) + (1-y_{ij}) \log(1-P_{ij})\right]</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.8333em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">L</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.1514em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">aux</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:3.4079em;vertical-align:-1.4138em></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:1.9941em><span style=top:-1.8723em;margin-left:0em><span class=pstrut style=height:3.05em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style=top:-3.05em><span class=pstrut style=height:3.05em></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style=top:-4.3em;margin-left:0em><span class=pstrut style=height:3.05em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-2.7em><span class=pstrut style=height:2.7em></span><span class="mord mathnormal mtight" style=margin-right:0.08125em>H</span></span><span style=top:-3.3023em><span class=pstrut style=height:2.7em></span><span class=accent-body style=left:-0.1944em><span class="mord mtight">~</span></span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.2777em><span></span></span></span></span></span><span class=mspace style=margin-right:0.1667em></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:1.9941em><span style=top:-1.8723em;margin-left:0em><span class=pstrut style=height:3.05em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:0.05724em>j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style=top:-3.05em><span class=pstrut style=height:3.05em></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style=top:-4.3em;margin-left:0em><span class=pstrut style=height:3.05em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord accent mtight"><span class=vlist-t><span class=vlist-r><span class=vlist style=height:0.9202em><span style=top:-2.7em><span class=pstrut style=height:2.7em></span><span class="mord mathnormal mtight" style=margin-right:0.13889em>W</span></span><span style=top:-3.3023em><span class=pstrut style=height:2.7em></span><span class=accent-body style=left:-0.25em><span class="mord mtight">~</span></span></span></span></span></span></span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:1.4138em><span></span></span></span></span></span><span class=mspace style=margin-right:0.1667em></span><span class=minner><span class="mopen delimcenter" style=top:0em>[</span><span class=mord><span class="mord mathnormal" style=margin-right:0.03588em>y</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3117em><span style=top:-2.55em;margin-left:-0.0359em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:0.05724em>ij</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.2861em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.1667em></span><span class=mop>lo<span style=margin-right:0.01389em>g</span></span><span class=mopen>(</span><span class=mord><span class="mord mathnormal" style=margin-right:0.13889em>P</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3117em><span style=top:-2.55em;margin-left:-0.1389em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:0.05724em>ij</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.2861em><span></span></span></span></span></span></span><span class=mclose>)</span><span class=mspace style=margin-right:0.2222em></span><span class=mbin>+</span><span class=mspace style=margin-right:0.2222em></span><span class=mopen>(</span><span class=mord>1</span><span class=mspace style=margin-right:0.2222em></span><span class=mbin>−</span><span class=mspace style=margin-right:0.2222em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.03588em>y</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3117em><span style=top:-2.55em;margin-left:-0.0359em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:0.05724em>ij</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.2861em><span></span></span></span></span></span></span><span class=mclose>)</span><span class=mspace style=margin-right:0.1667em></span><span class=mop>lo<span style=margin-right:0.01389em>g</span></span><span class=mopen>(</span><span class=mord>1</span><span class=mspace style=margin-right:0.2222em></span><span class=mbin>−</span><span class=mspace style=margin-right:0.2222em></span><span class=mord><span class="mord mathnormal" style=margin-right:0.13889em>P</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3117em><span style=top:-2.55em;margin-left:-0.1389em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style=margin-right:0.05724em>ij</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.2861em><span></span></span></span></span></span></span><span class=mclose>)</span><span class="mclose delimcenter" style=top:0em>]</span></span></span></span></span></span>
<p>總損失函數為：</p>
<span class=katex-display><span class=katex><span class=katex-mathml><math display=block><semantics><mrow><msub><mi>L</mi><mtext>total</mtext></msub><mo>=</mo><msub><mi>L</mi><mtext>det</mtext></msub><mo>+</mo><mi>λ</mi><msub><mi>L</mi><mtext>aux</mtext></msub></mrow><annotation encoding=application/x-tex>L_\text{total} = L_\text{det} + \lambda L_\text{aux}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.8333em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">L</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3361em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">total</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.8333em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">L</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3361em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">det</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span><span class=mspace style=margin-right:0.2222em></span><span class=mbin>+</span><span class=mspace style=margin-right:0.2222em></span></span><span class=base><span class=strut style=height:0.8444em;vertical-align:-0.15em></span><span class="mord mathnormal">λ</span><span class=mord><span class="mord mathnormal">L</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.1514em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">aux</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span></span></span></span></span>
<p>其中 <span class=katex><span class=katex-mathml><math><semantics><mrow><mi>λ</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=application/x-tex>\lambda = 1</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.6944em></span><span class="mord mathnormal">λ</span><span class=mspace style=margin-right:0.2778em></span><span class=mrel>=</span><span class=mspace style=margin-right:0.2778em></span></span><span class=base><span class=strut style=height:0.6444em></span><span class=mord>1</span></span></span></span>，<span class=katex><span class=katex-mathml><math><semantics><mrow><msub><mi>L</mi><mtext>det</mtext></msub></mrow><annotation encoding=application/x-tex>L_\text{det}</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:0.8333em;vertical-align:-0.15em></span><span class=mord><span class="mord mathnormal">L</span><span class=msupsub><span class="vlist-t vlist-t2"><span class=vlist-r><span class=vlist style=height:0.3361em><span style=top:-2.55em;margin-left:0em;margin-right:0.05em><span class=pstrut style=height:2.7em></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">det</span></span></span></span></span><span class=vlist-s>​</span></span><span class=vlist-r><span class=vlist style=height:0.15em><span></span></span></span></span></span></span></span></span></span> 為依據檢測方法的損失。</p>
<p>在推理階段，檢測頭的輸出即為最終結果。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=訓練策略>訓練策略<a href=#訓練策略 class=hash-link aria-label=訓練策略的直接連結 title=訓練策略的直接連結>​</a></h3>
<p>使用流行的文字檢測方法進行實驗，包括 <strong>DBNet (DB)</strong>、<strong>PAN</strong> 和 <strong>FCENet (FCE)</strong>。為保持設置一致性，檢測器在 <strong>SynthText</strong> 和真實數據集上進行訓練。除非另有說明，骨幹使用 CLIP 的預訓練影像編碼器 ResNet50。</p>
<p>視覺提示生成器包含 3 層 Transformer 解碼器，使用 4 個注意力頭，Transformer 寬度為 256，前饋隱藏層維度設為 1024。檢測頭使用 DBNet、PAN 和 FCENet 的相應檢測頭來預測最終結果。</p>
<p>評估指標使用交集比聯集（IoU）來判斷模型是否正確檢測出文字區域，並計算精度、召回率和 F 值進行比較。為確保公平比較，訓練和測試時，所有數據集中標記為「do not care」或「###」的區域將被忽略。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=討論>討論<a href=#討論 class=hash-link aria-label=討論的直接連結 title=討論的直接連結>​</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=與現有方法結合>與現有方法結合<a href=#與現有方法結合 class=hash-link aria-label=與現有方法結合的直接連結 title=與現有方法結合的直接連結>​</a></h3>
<div align=center><figure style=width:80%><p><img decoding=async loading=lazy alt="combine with other" src=/assets/images/img11-c28759008715feae4bfd70ca66e57a9c.jpg width=980 height=504 class=img_ev3q></figure></div>
<p>作者在一開始就將 TCM 定義為一個插件式的模型，可以與現有的文字檢測方法結合使用。上表是在 IC15、TD 和 CTW 數據集上報告了將 TCM 與三種文字檢測方法結合的結果：</p>
<ul>
<li><strong>F 值提升</strong>：TCM 分別比原始 FCENet、PAN 和 DBNet 在 IC15 數據集上的 F 值高出 +0.9%、+1.7% 和 +1.9%。TD 和 CTW 數據集也有類似的穩定性能提升。</li>
<li><strong>推理速度</strong>：在 IC15、TD 和 CTW 數據集上，結合 PAN、FCENet 和 DBNet 的 TCM 分別達到 18 FPS、8.4 FPS 和 10 FPS，保持了檢測器的高效率。</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>提示</div><div class=admonitionContent_BuS1><p>我們認為這個推理速度的影響還是影響很大，論文中說「保持」了高效率，可能有點過於樂觀了。</div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=預訓練-clip-backbone>預訓練 CLIP Backbone<a href=#預訓練-clip-backbone class=hash-link aria-label="預訓練 CLIP Backbone的直接連結" title="預訓練 CLIP Backbone的直接連結">​</a></h3>
<div align=center><figure style=width:80%><p><img decoding=async loading=lazy alt="pretrain clip" src=/assets/images/img3-40e1d5b83272704ab4a23d8321e066a5.jpg width=956 height=216 class=img_ev3q></figure></div>
<p>首先測試僅將 DBNet 的原始骨幹網絡替換為 CLIP 的預訓練影像編碼器 ResNet50，以量化骨幹網絡對性能的影響。上表中，<code>CR50</code> 表示使用 CLIP 的影像分支，而 <code>R50</code> 表示使用 DBNet 的原始骨幹網絡。</p>
<p>結果顯示，僅使用 CLIP 的原始預訓練模型並不足以充分利用 CLIP 的視覺-語言知識，效果和原本的 DBNet 骨幹網絡差異不大。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>提示</div><div class=admonitionContent_BuS1><p>不能無腦用 CLIP。</div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=模型組件的有效性>模型組件的有效性<a href=#模型組件的有效性 class=hash-link aria-label=模型組件的有效性的直接連結 title=模型組件的有效性的直接連結>​</a></h3>
<div align=center><figure style=width:70%><p><img decoding=async loading=lazy alt="predefined prompt" src=/assets/images/img4-7bec541c9aa3fc284e6ef7714de35399.jpg width=968 height=728 class=img_ev3q></figure></div>
<p>我們先理解一下上表的各種縮寫意義：</p>
<ul>
<li><strong>BSL</strong>: DBNet Baseline，DBNet 基線。</li>
<li><strong>PP</strong>: Predefined Prompt，預定義提示。</li>
<li><strong>LP</strong>: Learnable Prompt，可學習提示。</li>
<li><strong>LG</strong>: Language Prompt Generator，語言提示生成器。</li>
<li><strong>VG</strong>: Visual Prompt Generator，視覺提示生成器。</li>
<li><strong>TCM</strong>: 完整的模型配置。</li>
</ul>
<hr>
<p>使用預定義提示時（上表第二行），性能在四個數據集（IC15、TD、TT、CTW）上均有小幅提升，分別比基線方法高出 0.05%、0.2%、0.04% 和 0.1%。</p>
<p>將可學習提示與預定義提示結合使用時（上表第三行），顯示可學習提示可以帶來一致的性能提升。</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>提示</div><div class=admonitionContent_BuS1><p>可學習提示的數量是可以自由設置的，這裡測試了 4, 18, 32 等不同數量的提示，結果顯示提示數量越多，性能越好。</div></div>
<p>與數量設置為 4 相比，當數量為 32 時，各數據集上的性能顯著提高。這可能是因為更多的可學習提示可以更好地引導預訓練文字編碼器的知識，對文字檢測更有幫助。為了簡化後續實驗，默認可學習提示數量設置為 4。</p>
<hr>
<p>作者也評估了語言提示生成器的性能（上表第七行）。</p>
<p>在語言提示生成器的幫助下，TCM 在四個數據集上的性能進一步提高，尤其是在 ICDAR2015 上的表現，表明語言提示生成器生成的條件線索能夠確保在不同數據集類型上的更好泛化能力。</p>
<hr>
<p>結合視覺提示生成器與其他組件時，F 值在四個數據集上均比基線更高，其中在 IC15 和 TD 數據集上的提升尤為顯著，分別為 1.7% 和 2.0%。</p>
<p>這一明顯的互補現象是由於視覺提示生成器可以從文本特徵中傳播細粒度的視覺語義信息。</p>
<p>此外，視覺提示生成器生成的提示局部影像嵌入能引導模型獲得更準確的文字實例級別視覺表徵，增強了實例-語言匹配能力，並生成有助於下游檢測頭的精確分割圖。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=vg-和-lg-對泛化性能的消融實驗>VG 和 LG 對泛化性能的消融實驗<a href=#vg-和-lg-對泛化性能的消融實驗 class=hash-link aria-label="VG 和 LG 對泛化性能的消融實驗的直接連結" title="VG 和 LG 對泛化性能的消融實驗的直接連結">​</a></h3>
<p><img decoding=async loading=lazy alt="vg lg" src=/assets/images/img5-cd0380e7e2d306bcf1c37188be0f83f7.jpg width=1224 height=222 class=img_ev3q></p>
<p>如果將 TCM 中的視覺提示生成器（VG）和語言提示生成器（LG）移除，會導致泛化性能顯著下降，進一步證明了 VG 和 LG 的有效性。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=凍結編碼器實驗>凍結編碼器實驗<a href=#凍結編碼器實驗 class=hash-link aria-label=凍結編碼器實驗的直接連結 title=凍結編碼器實驗的直接連結>​</a></h3>
<div align=center><figure style=width:70%><p><img decoding=async loading=lazy alt="freeze encoder" src=/assets/images/img6-0bc7976ad06fc301dfe8839f31041da7.jpg width=904 height=324 class=img_ev3q></figure></div>
<p>一般來說，使用 CLIP 時，為了保持原本模型的知識，我們會凍結文字編碼器，只訓練影像編碼器。這裡作者對影像編碼器和文字編碼器的學習率因子進行了調整，研究了凍結編碼器質量對性能的影響。</p>
<p>結果顯示，使用較低學習率並凍結文字編碼器可以獲得最佳模型性能。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=增加訓練數據>增加訓練數據<a href=#增加訓練數據 class=hash-link aria-label=增加訓練數據的直接連結 title=增加訓練數據的直接連結>​</a></h3>
<p>為了進一步探討 TCM 是否能學習到僅通過增加數據難以獲得的額外知識，作者進行了以下實驗：</p>
<ul>
<li><strong>訓練數據</strong>：使用包含 IC13、IC15、TD、CTW、TT 和 MLT17 在內的大規模公共數據集（共計 13,784 張影像）訓練模型。</li>
<li><strong>測試數據</strong>：在從 ArT 精心收集的夜間數據（326 張影像）上測試模型。夜間樣本示例如下圖所示。
<img decoding=async loading=lazy alt="night data" src=/assets/images/img10-23c3a5cc7c7dc35f5e2cf421e5bdd962.jpg width=952 height=208 class=img_ev3q></li>
</ul>
<p>實驗結果如下表：</p>
<div align=center><figure style=width:70%><p><img decoding=async loading=lazy alt="night data result" src=/assets/images/img7-a65557211a15f4bb9febf6c38e29822c.jpg width=996 height=300 class=img_ev3q></figure></div>
<p>即使增加了大量訓練數據，現有方法在應對與訓練集分佈明顯不同的夜間數據時仍顯示出局限性。TCM 在此情況下仍表現穩健，展現出不可替代的泛化能力。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=增加參數量>增加參數量<a href=#增加參數量 class=hash-link aria-label=增加參數量的直接連結 title=增加參數量的直接連結>​</a></h3>
<div align=center><figure style=width:70%><p><img decoding=async loading=lazy alt="increase params" src=/assets/images/img8-b2df6748a40d16fc47cc8541222da143.jpg width=944 height=332 class=img_ev3q></figure></div>
<p>為了公平比較，作者增加了 DBNet 的參數量，將骨幹替換為更大的 ResNet，並在 TD500 數據集上進行實驗：</p>
<p>TCM-DBNet 相較於參數量和計算開銷更大的 DBNet，性能更優。該結果表明，TCM 在場景文字檢測任務中具有更高效的性能。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=輔助損失的影響>輔助損失的影響<a href=#輔助損失的影響 class=hash-link aria-label=輔助損失的影響的直接連結 title=輔助損失的影響的直接連結>​</a></h3>
<div align=center><figure style=width:70%><p><img decoding=async loading=lazy alt="aux loss" src=/assets/images/img9-b7662e754f666020197451476ad7a9ae.jpg width=732 height=224 class=img_ev3q></figure></div>
<p>最後作者比較了在 TD500 數據集上使用和不使用輔助損失的結果：</p>
<p>結果顯示使用輔助損失的模型性能更高。輔助損失通過對實例-語言匹配得分圖施加約束，有助於提升模型的訓練效果。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=跨數據集泛化>跨數據集泛化<a href=#跨數據集泛化 class=hash-link aria-label=跨數據集泛化的直接連結 title=跨數據集泛化的直接連結>​</a></h3>
<div align=center><figure style=width:70%><p><img decoding=async loading=lazy alt="cross dataset" src=/assets/images/img12-b262ee59b7f08d6e016958bf3f0f03b1.jpg width=932 height=584 class=img_ev3q></figure></div>
<p>作者測試了 TCM 在不同數據集上的泛化能力，上表是真實數據集之間的遷移實驗結果，顯示 TCM 在不同數據集上的性能均優於基線方法。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id=結論>結論<a href=#結論 class=hash-link aria-label=結論的直接連結 title=結論的直接連結>​</a></h2>
<p>大家都想用 CLIP 來強化自己的模型，這篇論文就是一個很好的例子。</p>
<p>本文提出了 TCM 方法，可在無需預訓練的情況下，直接從 CLIP 模型中挖掘先驗知識並應用於場景文字檢測，可以說是建立了一個新的文字檢測範式。</p>
<p>雖然在現階段的實驗中，TCM 的性能提升並不是很明顯，但是從跨數據集泛化的實驗結果來看，說明預訓練多模態的模型，可以提供更廣泛的知識，有助於提升模型的泛化能力。</p>
<p>整體來看，TCM 為之後的研究提供了一個很好的思路和探索方向。</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col></div><div class="col lastUpdated_JAkA"><span class=theme-last-updated>最後<!-- -->由 <b>zephyr-sh</b> <!-- -->於 <b><time datetime=2024-12-01T01:34:13.000Z itemprop=dateModified>2024年12月1日</time></b> <!-- -->更新</span></div></div></footer><div style=margin-top:3rem> </div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label=文件選項卡><a class="pagination-nav__link pagination-nav__link--prev" href=/papers/text-detection/dbnet_puls_puls/><div class=pagination-nav__sublabel>上一頁</div><div class=pagination-nav__label>[22.02] DBNet++</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/papers/category/text-recognition-20><div class=pagination-nav__sublabel>下一頁</div><div class=pagination-nav__label>Text Recognition (20)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#幾家歡樂幾家愁 class="table-of-contents__link toc-highlight">幾家歡樂幾家愁</a><li><a href=#定義問題 class="table-of-contents__link toc-highlight">定義問題</a><ul><li><a href=#clip class="table-of-contents__link toc-highlight">CLIP</a><li><a href=#多模態神經元 class="table-of-contents__link toc-highlight">多模態神經元</a><li><a href=#所以我們應該要 class="table-of-contents__link toc-highlight">所以我們應該要？</a></ul><li><a href=#解決問題 class="table-of-contents__link toc-highlight">解決問題</a><ul><li><a href=#模型架構 class="table-of-contents__link toc-highlight">模型架構</a><li><a href=#語言提示生成器 class="table-of-contents__link toc-highlight">語言提示生成器</a><li><a href=#文字編碼器 class="table-of-contents__link toc-highlight">文字編碼器</a><li><a href=#視覺提示�生成器 class="table-of-contents__link toc-highlight">視覺提示生成器</a><li><a href=#實例-語言匹配 class="table-of-contents__link toc-highlight">實例-語言匹配</a><li><a href=#訓練策略 class="table-of-contents__link toc-highlight">訓練策略</a></ul><li><a href=#討論 class="table-of-contents__link toc-highlight">討論</a><ul><li><a href=#與現有方法結合 class="table-of-contents__link toc-highlight">與現有方法結合</a><li><a href=#預訓練-clip-backbone class="table-of-contents__link toc-highlight">預訓練 CLIP Backbone</a><li><a href=#模型組件的有效性 class="table-of-contents__link toc-highlight">模型組件的有效性</a><li><a href=#vg-和-lg-對泛化性能的消融實驗 class="table-of-contents__link toc-highlight">VG 和 LG 對泛化性能的消融實驗</a><li><a href=#凍結編碼器實驗 class="table-of-contents__link toc-highlight">凍結編碼器實驗</a><li><a href=#增加訓練數據 class="table-of-contents__link toc-highlight">增加訓練數據</a><li><a href=#增加參數量 class="table-of-contents__link toc-highlight">增加參數量</a><li><a href=#輔助損失的影響 class="table-of-contents__link toc-highlight">輔助損失的影響</a><li><a href=#跨數據集泛化 class="table-of-contents__link toc-highlight">跨數據集泛化</a></ul><li><a href=#結論 class="table-of-contents__link toc-highlight">結論</a></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class=footer__links><a class=footer__link-item href=/docs>開源專案</a><span class=footer__link-separator>·</span><a class=footer__link-item href=/papers/intro>論文筆記</a><span class=footer__link-separator>·</span><a class=footer__link-item href=/blog>部落格</a><span class=footer__link-separator>·</span><a class=footer__link-item href=/terms-of-service>使用條款</a><span class=footer__link-separator>·</span><a class=footer__link-item href=/privacy-policy>隱私政策</a><span class=footer__link-separator>·</span><a class=footer__link-item href=/worklog>工作日誌</a><span class=footer__link-separator>·</span><a href=https://buymeacoffee.com/zephyr_docsaid target=_blank rel="noopener noreferrer" class=footer__link-item>支持我們<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2024 DOCSAID.</div></div></div></footer></div>