---
slug: mount-disk-on-ubuntu
title: Ubuntu での外付けハードディスクのマウント
authors: Zephyr
image: /ja/img/2025/0125.webp
tags: [ubuntu, mount]
description: ハードディスクのマウント手順を記録
---

Ubuntu システムに外付けハードディスクを接続すると、無意識にぼんやりしてしまうことがあります。

そしてようやく思い出すのは、Ubuntu が「手動でマウント」する必要のある OS だということです。

<!-- truncate -->

## まずハードディスクの場所を確認

ハードディスクをマウントする前に、システムがハードディスクを認識しているか確認する必要があります。

1. ターミナルを開き、以下のコマンドを入力します：

   ```bash
   sudo fdisk -l
   ```

   このコマンドは、システム内のすべての利用可能なハードディスクとパーティションを一覧表示します。

   必要なハードディスクデバイスを見つけます。名前は通常 `/dev/sdb` や `/dev/sdc` のようになっており、パーティション名は `/dev/sda1` や `/dev/sdc1` などです。

   :::tip
   `lsblk` コマンドを使用することもできます。こちらは個人の好みによります。
   :::

2. ハードディスクのファイルシステムの種類を確認します：

   仮に見つけたハードディスクが `/dev/sda1` だとすると、以下のコマンドでファイルシステムの種類を確認できます：

   ```bash
   sudo blkid /dev/sda1 | grep TYPE
   ```

   このコマンドは、`ext4`、`ntfs`、`exfat` などのファイルシステムの種類を表示し、適切なマウント方法を決める手助けをしてくれます。

## マウントディレクトリの作成

ハードディスクをマウントする前に、マウントポイントとして使用するディレクトリを作成する必要があります。

ここでは、`/mnt/mydisk` というパスを仮定し、以下のコマンドを実行します：

```bash
sudo mkdir -p /mnt/mydisk
```

:::tip
好きなディレクトリ名を選べますが、ディレクトリが存在し、他のファイルがないことを確認してください。
:::

## ハードディスクのマウント

ハードディスクのファイルシステムの種類に応じて、適切なマウント方法を選択します。

### ext4

以下のコマンドを実行して、ハードディスクを目的のディレクトリにマウントします：

```bash
sudo mount /dev/sda1 /mnt/mydisk
```

マウントが成功したか確認します：

```bash
df -h
```

成功していれば、出力に `/mnt/mydisk` が表示されます。

### NTFS または exFAT

ハードディスクが NTFS または exFAT ファイルシステムを使用している場合、関連ツールをインストールする必要があるかもしれません。

1. 必要なツールをインストール：

   ```bash
   sudo apt update
   sudo apt install ntfs-3g exfat-fuse exfat-utils
   ```

2. NTFS または exFAT パーティションをマウント（ここでは exFAT の例）：

   ```bash
   sudo mount -t exfat /dev/sda1 /mnt/mydisk
   ```

## よくある問題

1. **マウント後に権限が不足する**：

   一部のファイルシステム（NTFS や exFAT など）は、Linux のネイティブな権限変更コマンド（`chmod` や `chown`）をサポートしていません。この問題に直面した場合、マウント時に適切な権限を指定できます。

   まずマウントを解除：

   ```bash
   sudo umount /mnt/mydisk
   ```

   再度マウントして権限を指定：

   ```bash
   sudo mount -t exfat -o uid=1000,gid=1000,fmask=0022,dmask=0022 /dev/sda1 /mnt/mydisk
   ```

   パラメータの意味：

   - `-t exfat`：ファイルシステムの種類を指定。
   - `uid=1000`：ファイル所有者の UID を指定。
   - `gid=1000`：ファイルグループの GID を指定。
   - `fmask=0022` と `dmask=0022`：ファイルとディレクトリのデフォルト権限を設定。

   マウント後の権限が正しいか確認：

   ```bash
   ls -l /mnt/mydisk
   ```

   :::tip
   `0022` は 8 進数で表記され、対応する権限は `755` です。
   :::

---

2. **マウントディレクトリが未作成**：

   マウントディレクトリが存在しない場合、マウントコマンドは失敗します。ディレクトリが作成されていることを確認してください：

   ```bash
   sudo mkdir -p /mnt/mydisk
   ```

---

3. **uid と gid が不明**：

   現在のユーザーの UID と GID を確認するには、以下のコマンドを使用します：

   ```bash
   id
   ```

   出力例：

   ```
   uid=1000(username) gid=1000(username)
   ```

   ここで、`uid` がユーザーの UID、`gid` がユーザーの GID です。

---

4. **ハードディスクの自動マウント**：

   起動時に自動でハードディスクをマウントしたい場合、`/etc/fstab` ファイルを編集して設定を行います。

   テキストエディタで `/etc/fstab` を開きます：

   ```bash
   sudo vim /etc/fstab
   ```

   ファイルの末尾に以下の内容を追加（ハードディスクの実際の情報に基づいて修正）：

   ```bash
   /dev/sda1 /mnt/mydisk ntfs-3g defaults,uid=1000,gid=1000 0 0
   ```

   保存して終了後、以下のコマンドで設定を検証：

   ```bash
   sudo mount -a
   ```

   エラーメッセージがなければ、設定は成功です。

---

5. **ハードディスクのアンマウント**：

   ハードディスクをアンマウントするには、以下のコマンドを実行します：

   ```bash
   sudo umount /mnt/mydisk
   ```

   ハードディスクが使用中の場合、エラーメッセージが表示されることがあります。この場合、`-l` オプションを使用して強制的にアンマウントします：

   ```bash
   sudo umount -l /mnt/mydisk
   ```

   ハードディスクがアンマウントされたか確認するには、以下のコマンドを使用します：

   ```bash
   df -h
   ```

---

6. **ハードディスクが未フォーマット**：

   新しいハードディスクは、使用する前にフォーマットする必要があります。以下の mkfs コマンドを使用します：

   ```bash
   sudo mkfs -t ext4 /dev/sda1
   ```

   このコマンドは `/dev/sda1` を ext4 ファイルシステムでフォーマットします。他のファイルシステムを使用する場合は、`-t` パラメータを変更してください。

   :::warning
   フォーマットするとすべてのデータが削除されるため、大切なデータは必ず事前にバックアップしてください。
   :::

## まとめ

まとめると、Ubuntu システムでのハードディスクのマウント手順はそれほど複雑ではありません。基本的なコマンドと注意点を押さえれば、簡単に実行できます。

以上がハードディスクのマウント手順の記録です。参考になれば幸いです。
