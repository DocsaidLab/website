"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[22219],{50660:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>l});var i=r(74848),s=r(28453);const c={sidebar_position:3},o="\u5feb\u901f\u958b\u59cb",t={id:"mrzscanner/quickstart",title:"\u5feb\u901f\u958b\u59cb",description:"\u6211\u5011\u63d0\u4f9b\u4e86\u4e00\u500b\u7c21\u55ae\u7684\u6a21\u578b\u63a8\u8ad6\u4ecb\u9762\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u524d\u5f8c\u8655\u7406\u7684\u908f\u8f2f\u3002",source:"@site/docs/mrzscanner/quickstart.md",sourceDirName:"mrzscanner",slug:"/mrzscanner/quickstart",permalink:"/docs/mrzscanner/quickstart",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"zephyr-sh",lastUpdatedAt:1729296763e3,sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\u5b89\u88dd",permalink:"/docs/mrzscanner/installation"},next:{title:"\u9032\u968e\u8a2d\u5b9a",permalink:"/docs/mrzscanner/advance"}},d={},l=[{value:"\u6a21\u578b\u63a8\u8ad6",id:"\u6a21\u578b\u63a8\u8ad6",level:2},{value:"\u642d\u914d <code>DocAligner</code> \u4f7f\u7528",id:"\u642d\u914d-docaligner-\u4f7f\u7528",level:2},{value:"\u932f\u8aa4\u8a0a\u606f",id:"\u932f\u8aa4\u8a0a\u606f",level:2},{value:"\u6aa2\u67e5\u78bc",id:"\u6aa2\u67e5\u78bc",level:2}];function a(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"\u5feb\u901f\u958b\u59cb",children:"\u5feb\u901f\u958b\u59cb"})}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u5011\u63d0\u4f9b\u4e86\u4e00\u500b\u7c21\u55ae\u7684\u6a21\u578b\u63a8\u8ad6\u4ecb\u9762\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u524d\u5f8c\u8655\u7406\u7684\u908f\u8f2f\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u9996\u5148\uff0c\u4f60\u9700\u8981\u5c0e\u5165\u6240\u9700\u7684\u76f8\u95dc\u4f9d\u8cf4\u4e26\u5275\u5efa ",(0,i.jsx)(e.code,{children:"MRZScanner"})," \u985e\u5225\u3002"]}),"\n",(0,i.jsx)(e.h2,{id:"\u6a21\u578b\u63a8\u8ad6",children:"\u6a21\u578b\u63a8\u8ad6"}),"\n",(0,i.jsxs)(e.p,{children:["\u4ee5\u4e0b\u662f\u4e00\u500b\u7c21\u55ae\u7684\u7bc4\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"MRZScanner"})," \u9032\u884c\u6a21\u578b\u63a8\u8ad6\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from mrzscanner import MRZScanner\n\nmodel = MRZScanner()\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u555f\u52d5\u6a21\u578b\u4e4b\u5f8c\uff0c\u63a5\u8457\u8981\u6e96\u5099\u4e00\u5f35\u5716\u7247\u9032\u884c\u63a8\u8ad6\uff1a"}),"\n",(0,i.jsxs)(e.admonition,{type:"tip",children:[(0,i.jsxs)(e.p,{children:["\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"MRZScanner"})," \u63d0\u4f9b\u7684\u6e2c\u8a66\u5716\u7247\uff1a"]}),(0,i.jsxs)(e.p,{children:["\u4e0b\u8f09\u9023\u7d50\uff1a",(0,i.jsx)(e.a,{href:"https://github.com/DocsaidLab/MRZScanner/blob/main/docs/test_mrz.jpg",children:(0,i.jsx)(e.strong,{children:"midv2020_test_mrz.jpg"})})]}),(0,i.jsx)("div",{align:"center",children:(0,i.jsx)("figure",{style:{width:"50%"},children:(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"test_mrz",src:r(74912).A+"",width:"2160",height:"3840"})})})})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"import docsaidkit as D\n\nimg = D.imread('path/to/run_test_card.jpg')\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6216\u662f\u4f60\u53ef\u4ee5\u76f4\u63a5\u900f\u904e URL \u9032\u884c\u8b80\u53d6\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"import cv2\nfrom skimage import io\n\nimg = io.imread('https://github.com/DocsaidLab/MRZScanner/blob/main/docs/test_mrz.jpg?raw=true')\nimg = cv2.cvtColor(img, cv2.COLOR_RGB2BGR)\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u9019\u5f35\u5f71\u50cf\u592a\u9577\u4e86\uff0c\u5982\u679c\u76f4\u63a5\u63a8\u8ad6\u7684\u8a71\uff0c\u6703\u9020\u6210\u904e\u591a\u7684\u6587\u5b57\u5f62\u8b8a\uff0c\u56e0\u6b64\u6211\u5011\u8abf\u7528\u6a21\u578b\u7684\u6642\u5019\uff0c\u540c\u6642\u958b\u555f ",(0,i.jsx)(e.code,{children:"do_center_crop"})," \u53c3\u6578\uff1a"]}),"\n",(0,i.jsxs)(e.p,{children:["\u63a5\u8457\uff0c\u6211\u5011\u53ef\u4ee5\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"model"})," \u9032\u884c\u63a8\u8ad6\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"from mrzscanner import MRZScanner\n\nmodel = MRZScanner()\n\nresult, msg = model(img, do_center_crop=True)\nprint(result)\n# >>> ('PCAZEQAOARIN<<FIDAN<<<<<<<<<<<<<<<<<<<<<<<<<',\n#      'C946302620AZE6707297F23031072W12IMJ<<<<<<<40')\nprint(msg)\n# >>> <ErrorCodes.NO_ERROR: 'No error.'>\n"})}),"\n",(0,i.jsx)(e.admonition,{type:"tip",children:(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"MRZScanner"})," \u5df2\u7d93\u7528 ",(0,i.jsx)(e.code,{children:"__call__"})," \u9032\u884c\u4e86\u5c01\u88dd\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u76f4\u63a5\u547c\u53eb\u5be6\u4f8b\u9032\u884c\u63a8\u8ad6\u3002"]})}),"\n",(0,i.jsx)(e.admonition,{type:"info",children:(0,i.jsxs)(e.p,{children:["\u6211\u5011\u6709\u8a2d\u8a08\u4e86\u81ea\u52d5\u4e0b\u8f09\u6a21\u578b\u7684\u529f\u80fd\uff0c\u7576\u4f60\u7b2c\u4e00\u6b21\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"MRZScanner"})," \u6642\uff0c\u6703\u81ea\u52d5\u4e0b\u8f09\u6a21\u578b\u3002"]})}),"\n",(0,i.jsxs)(e.h2,{id:"\u642d\u914d-docaligner-\u4f7f\u7528",children:["\u642d\u914d ",(0,i.jsx)(e.code,{children:"DocAligner"})," \u4f7f\u7528"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4ed4\u7d30\u770b\u770b\u4e0a\u9762\u7684\u8f38\u51fa\u7d50\u679c\uff0c\u767c\u73fe\u5118\u7ba1\u505a\u4e86 ",(0,i.jsx)(e.code,{children:"do_center_crop"})," \uff0c\u4f46\u6709\u5e7e\u500b\u932f\u5b57\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u56e0\u70ba\u6211\u5011\u525b\u624d\u4f7f\u7528\u5168\u5716\u6383\u63cf\uff0c\u6a21\u578b\u5c0d\u65bc\u5716\u7247\u4e2d\u7684\u6587\u5b57\u53ef\u80fd\u6703\u6709\u4e00\u4e9b\u8aa4\u5224\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u70ba\u4e86\u63d0\u9ad8\u6e96\u78ba\u5ea6\uff0c\u6211\u5011\u52a0\u5165 ",(0,i.jsx)(e.code,{children:"DocAligner"})," \u4f86\u5e6b\u52a9\u6211\u5011\u5c0d\u9f4a MRZ \u5340\u584a\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"import cv2\nfrom docaligner import DocAligner # \u5c0e\u5165 DocAligner\nfrom mrzscanner import MRZScanner\nfrom skimage import io\n\nmodel = MRZScanner()\n\ndoc_aligner = DocAligner()\n\nimg = io.imread(\n    'https://github.com/DocsaidLab/MRZScanner/blob/main/docs/test_mrz.jpg?raw=true')\nimg = cv2.cvtColor(img, cv2.COLOR_RGB2BGR)\n\nflat_img = doc_aligner(img).doc_flat_img # \u5c0d\u9f4a MRZ \u5340\u584a\nprint(model(flat_img))\n# >>> ('PCAZEQAQARIN<<FIDAN<<<<<<<<<<<<<<<<<<<<<<<<<',\n#      'C946302620AZE6707297F23031072W12IMJ<<<<<<<40')\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"DocAligner"})," \u4e4b\u5f8c\uff0c\u5c31\u4e0d\u9700\u8981\u518d\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"do_center_crop"})," \u53c3\u6578\u4e86\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\u73fe\u5728\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u8f38\u51fa\u7d50\u679c\u66f4\u52a0\u6e96\u78ba\u4e86\uff0c\u9019\u5f35\u5716\u7247\u7684 MRZ \u5340\u584a\u5df2\u7d93\u6210\u529f\u8fa8\u8b58\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u932f\u8aa4\u8a0a\u606f",children:"\u932f\u8aa4\u8a0a\u606f"}),"\n",(0,i.jsx)(e.p,{children:"\u70ba\u4e86\u8b93\u4f7f\u7528\u8005\u53ef\u4ee5\u89e3\u91cb\u932f\u8aa4\u7684\u539f\u56e0\u662f\u4ec0\u9ebc\uff0c\u6211\u5011\u6709\u56de\u50b3\u932f\u8aa4\u8a0a\u606f\u7684\u6b04\u4f4d\uff0c\u5167\u5bb9\u6db5\u84cb\u7bc4\u570d\u70ba\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"class ErrorCodes(Enum):\n    NO_ERROR = 'No error.'\n    INVALID_INPUT_FORMAT = 'Invalid input format.'\n    POSTPROCESS_FAILED_LINE_COUNT = 'Postprocess failed, number of lines not 2 or 3.'\n    POSTPROCESS_FAILED_TD1_LENGTH = 'Postprocess failed, length of lines not 30 when `doc_type` is TD1.'\n    POSTPROCESS_FAILED_TD2_TD3_LENGTH = 'Postprocess failed, length of lines not 36 or 44 when `doc_type` is TD2 or TD3.'\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e3b\u8981\u70ba\u4e86\u5c0d\u8f38\u51fa\u7d50\u679c\u9032\u884c\u521d\u6b65\u7684\u904e\u6ffe\uff0c\u4e00\u4e9b\u8089\u773c\u53ef\u898b\u7684\u932f\u8aa4\uff0c\u4f8b\u5982\u5b57\u4e32\u9577\u5ea6\u4e0d\u5c0d\uff0c\u6216\u662f\u884c\u6578\u4e0d\u5c0d\u7b49\uff0c\u90fd\u53ef\u4ee5\u5728\u9019\u88e1\u88ab\u6aa2\u67e5\u51fa\u4f86\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u6aa2\u67e5\u78bc",children:"\u6aa2\u67e5\u78bc"}),"\n",(0,i.jsx)(e.p,{children:"\u6aa2\u67e5\u78bc (Check Digit) \u662f MRZ \u4e2d\u7528\u4f86\u78ba\u4fdd\u8cc7\u6599\u6b63\u78ba\u6027\u7684\u95dc\u9375\u90e8\u5206\uff0c\u5b83\u7528\u4f86\u6aa2\u67e5\u6578\u5b57\u7684\u6b63\u78ba\u6027\uff0c\u9632\u6b62\u8cc7\u6599\u8f38\u5165\u932f\u8aa4\u3002"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8a73\u7d30\u64cd\u4f5c\u6d41\u7a0b\u6211\u5011\u5beb\u5728 ",(0,i.jsx)(e.a,{href:"./reference#%E6%AA%A2%E6%9F%A5%E7%A2%BC",children:(0,i.jsx)(e.strong,{children:"\u53c3\u8003\u6587\u737b\uff1a\u6aa2\u67e5\u78bc"})})," \u4e2d\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.p,{children:"\u9019\u88e1\u6211\u5011\u8981\u8aaa\u7684\u662f\uff1a\u6211\u5011\u300c\u6c92\u6709\u63d0\u4f9b\u6aa2\u67e5\u78bc\u300d\u7684\u8a08\u7b97\u529f\u80fd\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u9664\u4e86\u6b63\u898f\u7684\u6aa2\u67e5\u78bc\u8a08\u7b97\u65b9\u6cd5\uff0c\u4e0d\u540c\u5340\u57df\u7684 MRZ \u53ef\u4ee5\u81ea\u5df1\u91cd\u65b0\u5b9a\u7fa9\u6aa2\u67e5\u78bc\u7684\u8a08\u7b97\u65b9\u6cd5\uff0c\u56e0\u6b64\u7d66\u5b9a\u4e00\u500b\u6aa2\u67e5\u78bc\u8a08\u7b97\u65b9\u6cd5\u53ef\u80fd\u6703\u9650\u5236\u4f7f\u7528\u8005\u7684\u5f48\u6027\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u6b64\u5916\uff0c\u6211\u5011\u7684\u76ee\u6a19\u662f\u8a13\u7df4\u4e00\u500b\u5c08\u6ce8\u65bc MRZ \u8fa8\u8b58\u7684\u6a21\u578b\uff0c\u6bcf\u500b\u8f38\u51fa\u7531\u6a21\u578b\u81ea\u52d5\u5224\u5b9a\u683c\u5f0f\uff0c\u5982\u679c\u8981\u5957\u7528\u6aa2\u67e5\u78bc\u7684\u8a71\uff0c\u5fc5\u9808\u9810\u5148\u77e5\u9053\u8fa8\u8b58\u76ee\u6a19\uff0c\u82e5\u4e0d\u7136\uff0c\u5c31\u8981\u4f9d\u5e8f\u628a\u6bcf\u500b\u683c\u5f0f\u7684\u6aa2\u67e5\u78bc\u8a08\u7b97\u65b9\u6cd5\u90fd\u7b97\u904e\u4e00\u6b21\uff0c\u9019\u986f\u7136\u4e0d\u662f\u6211\u5011\u7684\u76ee\u6a19\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u6aa2\u67e5\u78bc\u7684\u8a08\u7b97\u529f\u80fd\u6709\u5f88\u591a\u5176\u4ed6\u7684\u958b\u6e90\u5c08\u6848\u53ef\u4ee5\u4f7f\u7528\uff0c\u5c31\u5982\u6211\u5011\u4e4b\u524d\u5f15\u7528\u7684 ",(0,i.jsx)(e.a,{href:"https://github.com/Arg0s1080/mrz",children:(0,i.jsx)(e.strong,{children:"Arg0s1080/mrz"})})," \u4e2d\u5c31\u6709\u63d0\u4f9b\u6aa2\u67e5\u78bc\u7684\u8a08\u7b97\u65b9\u6cd5\uff0c\u6211\u5011\u5efa\u8b70\u4f7f\u7528\u8005\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u9019\u500b\u5c08\u6848\u3002"]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(a,{...n})}):a(n)}},74912:(n,e,r)=>{r.d(e,{A:()=>i});const i=r.p+"assets/images/test_mrz-677fee313daebc656fb474f194ee59e0.jpg"},28453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>t});var i=r(96540);const s={},c=i.createContext(s);function o(n){const e=i.useContext(c);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),i.createElement(c.Provider,{value:e},n.children)}}}]);