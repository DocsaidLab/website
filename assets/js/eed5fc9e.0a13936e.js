"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([["37094"],{15217:function(n,e,t){t.r(e),t.d(e,{metadata:()=>i,contentTitle:()=>c,default:()=>p,assets:()=>d,toc:()=>a,frontMatter:()=>r});var i=JSON.parse('{"id":"capybara/funcs/onnxengine/onnxengine","title":"ONNXEngine","description":"ONNXEngine(modelpath int = 0, backend Dict[str, Any] = {}, provideroption: Dict[str, Any] = {})","source":"@site/docs/capybara/funcs/onnxengine/onnxengine.md","sourceDirName":"capybara/funcs/onnxengine","slug":"/capybara/funcs/onnxengine/","permalink":"/docs/capybara/funcs/onnxengine/","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"zephyr-sh","lastUpdatedAt":1734622390000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"ONNXEngine","permalink":"/docs/category/onnxengine"},"next":{"title":"get_onnx_metadata","permalink":"/docs/capybara/funcs/onnxengine/get_onnx_metadata"}}'),s=t("85893"),o=t("50065");let r={sidebar_position:1},c="ONNXEngine",d={},a=[];function l(n){let e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"onnxengine",children:"ONNXEngine"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsxs)(e.a,{href:"https://github.com/DocsaidLab/DocsaidKit/blob/main/docsaidkit/onnxengine/engine.py",children:["ONNXEngine(model_path: Union[str, Path], gpu_id: int = 0, backend: Union[str, int, Backend] = Backend.cpu, session_option: Dict[str, Any] = ",", provider_option: Dict[str, Any] = ",")"]})}),"\n"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u8AAA\u660E"}),"\uFF1A\u521D\u59CB\u5316 ONNX \u6A21\u578B\u63A8\u8AD6\u5F15\u64CE\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u53C3\u6578"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"model_path"})," (",(0,s.jsx)(e.code,{children:"Union[str, Path]"}),")\uFF1A\u6A94\u6848\u540D\u7A31\u6216\u5E8F\u5217\u5316\u7684 ONNX \u6216 ORT \u683C\u5F0F\u6A21\u578B\u7684\u4F4D\u5143\u7D44\u5B57\u4E32\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"gpu_id"})," (",(0,s.jsx)(e.code,{children:"int"}),")\uFF1AGPU ID\u3002\u9810\u8A2D\u70BA 0\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"backend"})," (",(0,s.jsx)(e.code,{children:"Union[str, int, Backend]"}),")\uFF1A\u63A8\u8AD6\u5F8C\u7AEF\uFF0C\u53EF\u4EE5\u9078 ",(0,s.jsx)(e.code,{children:"Backend.cpu"})," \u6216 ",(0,s.jsx)(e.code,{children:"Backend.cuda"}),"\u3002\u9810\u8A2D\u70BA ",(0,s.jsx)(e.code,{children:"Backend.cpu"}),"\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"session_option"})," (",(0,s.jsx)(e.code,{children:"Dict[str, Any]"}),")\uFF1A\u9019\u662F onnxruntime.SessionOptions \u7684\u53C3\u6578\uFF0C\u7528\u4F86\u8A2D\u5B9A\u6703\u8A71\u9078\u9805\u3002\u9810\u8A2D\u70BA ",(0,s.jsx)(e.code,{children:"{}"}),"\u3002\u8A73\u7D30\u8A2D\u5B9A\u65B9\u5F0F\u8ACB\u53C3\u8003\uFF1A",(0,s.jsx)(e.a,{href:"https://onnxruntime.ai/docs/api/python/api_summary.html#onnxruntime.SessionOptions",children:"SessionOptions"}),"\u3002"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"provider_option"})," (",(0,s.jsx)(e.code,{children:"Dict[str, Any]"}),")\uFF1A\u9019\u662F onnxruntime.provider_options \u7684\u53C3\u6578\u3002\u9810\u8A2D\u70BA ",(0,s.jsx)(e.code,{children:"{}"}),"\u3002\u8A73\u7D30\u8A2D\u5B9A\u65B9\u5F0F\u8ACB\u53C3\u8003\uFF1A",(0,s.jsx)(e.a,{href:"https://onnxruntime.ai/docs/execution-providers/CUDA-ExecutionProvider.html#configuration-options",children:"CUDAExecutionProvider"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u63A8\u8AD6"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u8F09\u5165\u6A21\u578B\u6642\uFF0C\u8A72\u51FD\u6578\u6703\u8F09\u5165 ONNX \u6A94\u6848\u5167\u7684\u8CC7\u8A0A\uFF0C\u4E26\u70BA\u8F38\u5165\u548C\u8F38\u51FA\u503C\u7D66\u5B9A\u4E00\u500B\u5B57\u5178\uFF0C\u5176\u4E2D\u5305\u542B\u8F38\u5165\u548C\u8F38\u51FA\u7684\u5F62\u72C0\u548C\u6578\u64DA\u985E\u578B\u3002"}),"\n",(0,s.jsxs)(e.p,{children:["\u56E0\u6B64\uFF0C\u7576\u4F60\u547C\u53EB ",(0,s.jsx)(e.code,{children:"ONNXEngine"})," \u5BE6\u4F8B\u6642\uFF0C\u4F60\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u8A72\u5B57\u5178\u4F86\u5F97\u5230\u8F38\u51FA\u7D50\u679C\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7BC4\u4F8B"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"import docsaidkit as D\n\nmodel_path = 'model.onnx'\nengine = D.ONNXEngine(model_path)\nprint(engine)\n\n# Inferencing\n# Assuming the model has two inputs and two outputs and named:\n#   'input1', 'input2', 'output1', 'output2'.\ninput_data = {\n    'input1': np.random.randn(1, 3, 224, 224).astype(np.float32),\n    'input2': np.random.randn(1, 3, 224, 224).astype(np.float32),\n}\n\noutputs = engine(**input_data)\n\noutput_data1 = outputs['output1']\noutput_data2 = outputs['output2']\n"})}),"\n"]}),"\n"]})]})}function p(n={}){let{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(l,{...n})}):l(n)}},50065:function(n,e,t){t.d(e,{Z:function(){return c},a:function(){return r}});var i=t(67294);let s={},o=i.createContext(s);function r(n){let e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),i.createElement(o.Provider,{value:e},n.children)}}}]);