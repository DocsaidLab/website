"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["56541"],{35507:function(n,e,s){s.r(e),s.d(e,{default:()=>h,frontMatter:()=>c,metadata:()=>i,assets:()=>o,toc:()=>t,contentTitle:()=>d});var i=JSON.parse('{"id":"nginx-notes/supplementary/nginx-conf-intro","title":"nginx.conf","description":"Nginx \u4E3B\u914D\u7F6E\u6587\u4EF6","source":"@site/docs/nginx-notes/supplementary/nginx-conf-intro.md","sourceDirName":"nginx-notes/supplementary","slug":"/nginx-notes/supplementary/nginx-conf-intro","permalink":"/docs/nginx-notes/supplementary/nginx-conf-intro","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"zephyr-sh","lastUpdatedAt":1739451273000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Let\'s Encrypt","permalink":"/docs/nginx-notes/supplementary/about-lets-encrypt"},"next":{"title":"sites-available","permalink":"/docs/nginx-notes/supplementary/sites-available-intro"}}'),l=s("85893"),r=s("50065");let c={},d="nginx.conf",o={},t=[{value:"Nginx \u4E3B\u914D\u7F6E\u6587\u4EF6",id:"nginx-\u4E3B\u914D\u7F6E\u6587\u4EF6",level:2},{value:"\u4E3B\u914D\u7F6E\u6A94\u6848\uFF1A\u5168\u57DF\u8A2D\u5B9A",id:"\u4E3B\u914D\u7F6E\u6A94\u6848\u5168\u57DF\u8A2D\u5B9A",level:2},{value:"\u4E3B\u914D\u7F6E\u6A94\u6848\uFF1A\u4E8B\u4EF6\u8655\u7406\u8A2D\u5B9A",id:"\u4E3B\u914D\u7F6E\u6A94\u6848\u4E8B\u4EF6\u8655\u7406\u8A2D\u5B9A",level:2},{value:"\u4E3B\u914D\u7F6E\u6A94\u6848\uFF1AHTTP \u670D\u52D9\u8A2D\u5B9A",id:"\u4E3B\u914D\u7F6E\u6A94\u6848http-\u670D\u52D9\u8A2D\u5B9A",level:2},{value:"\u4E3B\u914D\u7F6E\u6A94\u6848\uFF1A\u90F5\u4EF6\u4EE3\u7406",id:"\u4E3B\u914D\u7F6E\u6A94\u6848\u90F5\u4EF6\u4EE3\u7406",level:2}];function x(n){let e={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"nginxconf",children:"nginx.conf"})}),"\n",(0,l.jsx)(e.h2,{id:"nginx-\u4E3B\u914D\u7F6E\u6587\u4EF6",children:"Nginx \u4E3B\u914D\u7F6E\u6587\u4EF6"}),"\n",(0,l.jsxs)(e.p,{children:["Nginx \u7684\u6240\u6709\u8A2D\u5B9A\u8D77\u9EDE\u90FD\u5728\u9019\u88E1\uFF0C\u6A94\u6848\u8DEF\u5F91\u662F\uFF1A ",(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"/etc/nginx/nginx.conf"})}),"\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u4E2D\u7684\u5C64\u7D1A\u7D50\u69CB\u5982\u4E0B\uFF1A"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u5168\u57DF\u5C64\u7D1A"}),"\uFF1A\u5B9A\u7FA9\u670D\u52D9\u5168\u57DF\u8A2D\u5B9A\uFF0C\u5982\u57F7\u884C\u7528\u6236\u3001\u9032\u7A0B\u6578\u91CF\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4E8B\u4EF6\u5C64\u7D1A"}),"\uFF1A\u8CA0\u8CAC\u9023\u7DDA\u7BA1\u7406\uFF0C\u5982\u6700\u5927\u4F75\u767C\u9023\u7DDA\u6578\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"HTTP \u5C64\u7D1A"}),"\uFF1A\u5B9A\u7FA9 HTTP \u76F8\u95DC\u914D\u7F6E\uFF0C\u5305\u62EC\u65E5\u8A8C\u683C\u5F0F\u3001Gzip \u58D3\u7E2E\u3001\u865B\u64EC\u4E3B\u6A5F\u8A2D\u5B9A\u7B49\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Server \u5C64\u7D1A"}),"\uFF1A\u5B9A\u7FA9\u7279\u5B9A\u7DB2\u7AD9\u7684\u57DF\u540D\u3001\u76E3\u807D\u57E0\u8207 SSL \u8A2D\u5B9A\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Location \u5C64\u7D1A"}),"\uFF1A\u5339\u914D\u7279\u5B9A URL \u8DEF\u5F91\u4E26\u6307\u5B9A\u8ACB\u6C42\u8655\u7406\u65B9\u5F0F\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u4F46\u662F\u9019\u6A23\u770B\u5BE6\u5728\u6C92\u6709\u611F\u89BA\uFF0C\u6240\u4EE5\u6211\u5011\u4ED4\u7D30\u770B\u4E00\u4E0B\u6A94\u6848\u5167\u5BB9\u662F\u4EC0\u9EBC\uFF1A"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",metastring:'title="/etc/nginx/nginx.conf"',children:'user www-data;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n\nevents {\n	worker_connections 768;\n	# multi_accept on;\n}\n\nhttp {\n\n	##\n	# Basic Settings\n	##\n\n	sendfile on;\n	tcp_nopush on;\n	types_hash_max_size 2048;\n	# server_tokens off;\n\n	# server_names_hash_bucket_size 64;\n	# server_name_in_redirect off;\n\n	include /etc/nginx/mime.types;\n	default_type application/octet-stream;\n\n	##\n	# SSL Settings\n	##\n\n	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE\n	ssl_prefer_server_ciphers on;\n\n	##\n	# Logging Settings\n	##\n\n	access_log /var/log/nginx/access.log;\n	error_log /var/log/nginx/error.log;\n\n	##\n	# Gzip Settings\n	##\n\n	gzip on;\n\n	# gzip_vary on;\n	# gzip_proxied any;\n	# gzip_comp_level 6;\n	# gzip_buffers 16 8k;\n	# gzip_http_version 1.1;\n	# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n\n	##\n	# Virtual Host Configs\n	##\n\n	include /etc/nginx/conf.d/*.conf;\n	include /etc/nginx/sites-enabled/*;\n}\n\n\n#mail {\n#	# See sample authentication script at:\n#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript\n#\n#	# auth_http localhost/auth.php;\n#	# pop3_capabilities "TOP" "USER";\n#	# imap_capabilities "IMAP4rev1" "UIDPLUS";\n#\n#	server {\n#		listen     localhost:110;\n#		protocol   pop3;\n#		proxy      on;\n#	}\n#\n#	server {\n#		listen     localhost:143;\n#		protocol   imap;\n#		proxy      on;\n#	}\n#}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u4E3B\u914D\u7F6E\u6A94\u6848\u5168\u57DF\u8A2D\u5B9A",children:"\u4E3B\u914D\u7F6E\u6A94\u6848\uFF1A\u5168\u57DF\u8A2D\u5B9A"}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u90E8\u5206\u5B9A\u7FA9\u4E86\u6574\u9AD4 Nginx \u4F3A\u670D\u5668\u7684\u57FA\u672C\u904B\u884C\u53C3\u6578\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"user www-data;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/*.conf;\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"user www-data;"})}),"\uFF1A","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u8A2D\u5B9A Nginx \u904B\u884C\u7684\u7CFB\u7D71\u7528\u6236\uFF0C\u901A\u5E38\u662F ",(0,l.jsx)(e.code,{children:"www-data"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"worker_processes auto;"})}),"\uFF1A","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u8A2D\u5B9A\u5DE5\u4F5C\u9032\u7A0B\u6578\u91CF\uFF0C",(0,l.jsx)(e.code,{children:"auto"})," \u8868\u793A\u81EA\u52D5\u8ABF\u6574"]}),"\n",(0,l.jsx)(e.li,{children:"\u901A\u5E38\u6703\u6839\u64DA CPU \u6838\u5FC3\u6578\u6C7A\u5B9A\uFF0C\u78BA\u4FDD\u6700\u4F73\u6548\u80FD\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"pid /run/nginx.pid;"})}),"\uFF1A","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6307\u5B9A Nginx \u9032\u7A0B PID \u5132\u5B58\u7684\u6A94\u6848\u4F4D\u7F6E\uFF0C\u65B9\u4FBF\u7CFB\u7D71\u7BA1\u7406\u54E1\u6AA2\u67E5\u8207\u63A7\u5236 Nginx \u9032\u7A0B\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"include /etc/nginx/modules-enabled/*.conf;"})}),"\uFF1A","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u8F09\u5165\u984D\u5916\u7684 Nginx \u6A21\u7D44\uFF0C\u5141\u8A31\u5728 ",(0,l.jsx)(e.code,{children:"modules-enabled/"})," \u76EE\u9304\u5167\u555F\u7528\u4E0D\u540C\u529F\u80FD\u7684\u6A21\u7D44\uFF08\u4F8B\u5982 HTTP/2\u3001stream \u6A21\u7D44\u7B49\uFF09\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u4E3B\u914D\u7F6E\u6A94\u6848\u4E8B\u4EF6\u8655\u7406\u8A2D\u5B9A",children:"\u4E3B\u914D\u7F6E\u6A94\u6848\uFF1A\u4E8B\u4EF6\u8655\u7406\u8A2D\u5B9A"}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u90E8\u5206\u6C7A\u5B9A Nginx \u5982\u4F55\u8655\u7406\u9023\u7DDA\u8207\u8ACB\u6C42\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"events {\n    worker_connections 768;\n    # multi_accept on;\n}\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"worker_connections 768;"})}),"\uFF1A","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u6BCF\u500B ",(0,l.jsx)(e.code,{children:"worker_process"})," \u80FD\u5920\u540C\u6642\u8655\u7406\u7684\u6700\u5927\u9023\u7DDA\u6578\u3002\u82E5 ",(0,l.jsx)(e.code,{children:"worker_processes"})," \u70BA 4\uFF0C\u5247\u6700\u5927\u4F75\u767C\u9023\u7DDA\u6578\u70BA ",(0,l.jsx)(e.code,{children:"4 \xd7 768 = 3072"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"# multi_accept on;"})})," \uFF08\u8A3B\u89E3\uFF09\uFF1A","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5982\u679C\u555F\u7528\uFF0CNginx \u5728\u6536\u5230\u65B0\u9023\u7DDA\u6642\u6703\u540C\u6642\u63A5\u53D7\u591A\u500B\u8ACB\u6C42\uFF0C\u800C\u975E\u9010\u500B\u8655\u7406\uFF0C\u53EF\u63D0\u5347\u9AD8\u6D41\u91CF\u5834\u666F\u7684\u6548\u80FD\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u4E3B\u914D\u7F6E\u6A94\u6848http-\u670D\u52D9\u8A2D\u5B9A",children:"\u4E3B\u914D\u7F6E\u6A94\u6848\uFF1AHTTP \u670D\u52D9\u8A2D\u5B9A"}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u90E8\u5206\u5305\u542B\u591A\u500B HTTP \u76F8\u95DC\u8A2D\u5B9A\uFF0C\u9069\u7528\u65BC\u6240\u6709 HTTP \u670D\u52D9\u7684\u7AD9\u9EDE\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"http {...}\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u88E1\u6709\u9EDE\u7E41\u7463\uFF0C\u6211\u5011\u628A\u6BCF\u500B\u90E8\u5206\u5305\u8D77\u4F86\uFF0C\u6709\u8208\u8DA3\u7684\u8B80\u8005\u518D\u9EDE\u958B\u4F86\u770B\u5C31\u597D\u3002"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"HTTP \u8A2D\u5B9A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"sendfile on;\ntcp_nopush on;\ntypes_hash_max_size 2048;\n# server_tokens off;\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u4E9B\u8A2D\u5B9A\u5F71\u97FF Nginx \u8655\u7406 HTTP \u9023\u7DDA\u7684\u65B9\u5F0F\u3002"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"sendfile on;"})}),"\uFF1A"]}),"\n",(0,l.jsxs)(e.li,{children:["\u555F\u7528 ",(0,l.jsx)(e.code,{children:"sendfile()"})," \u7CFB\u7D71\u8ABF\u7528\uFF0C\u52A0\u901F\u975C\u614B\u6587\u4EF6\u50B3\u8F38\uFF0C\u63D0\u9AD8\u6548\u80FD\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"tcp_nopush on;"})}),"\uFF1A"]}),"\n",(0,l.jsx)(e.li,{children:"\u8B93 Nginx \u76E1\u53EF\u80FD\u4E00\u6B21\u6027\u50B3\u8F38\u5B8C\u6574\u7684 HTTP \u97FF\u61C9\uFF0C\u63D0\u9AD8\u7DB2\u8DEF\u6548\u80FD\u3002"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"types_hash_max_size 2048;"})}),"\uFF1A"]}),"\n",(0,l.jsxs)(e.li,{children:["\u8A2D\u5B9A MIME \u985E\u578B\u54C8\u5E0C\u8868\u7684\u6700\u5927\u5927\u5C0F\uFF0C\u5F71\u97FF ",(0,l.jsx)(e.code,{children:"mime.types"})," \u914D\u7F6E\u7684\u89E3\u6790\u6548\u7387\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"# server_tokens off;"})})," \uFF08\u8A3B\u89E3\uFF09\uFF1A"]}),"\n",(0,l.jsx)(e.li,{children:"\u82E5\u555F\u7528\uFF0CNginx \u4E0D\u6703\u5728\u932F\u8AA4\u9801\u9762\u8207 HTTP \u56DE\u61C9\u6A19\u982D\u4E2D\u986F\u793A\u7248\u672C\u8CC7\u8A0A\uFF0C\u63D0\u5347\u5B89\u5168\u6027\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"MIME \u985E\u578B\u8A2D\u5B9A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"include /etc/nginx/mime.types;\ndefault_type application/octet-stream;\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"include /etc/nginx/mime.types;"})}),"\uFF1A"]}),"\n",(0,l.jsxs)(e.li,{children:["\u8F09\u5165 ",(0,l.jsx)(e.code,{children:"mime.types"})," \u6A94\u6848\uFF0C\u8A2D\u5B9A\u4E0D\u540C\u985E\u578B\u6587\u4EF6\u7684 ",(0,l.jsx)(e.code,{children:"Content-Type"})," \u56DE\u61C9\u6A19\u982D\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"default_type application/octet-stream;"})}),"\uFF1A"]}),"\n",(0,l.jsxs)(e.li,{children:["\u8A2D\u5B9A\u9ED8\u8A8D\u7684 ",(0,l.jsx)(e.code,{children:"Content-Type"}),"\uFF0C\u5982\u679C\u7121\u6CD5\u8B58\u5225\u6A94\u6848\u985E\u578B\u5247\u56DE\u61C9 ",(0,l.jsx)(e.code,{children:"application/octet-stream"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"SSL \u8A2D\u5B9A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE\nssl_prefer_server_ciphers on;\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;"})}),"\uFF1A"]}),"\n",(0,l.jsx)(e.li,{children:"\u5B9A\u7FA9\u652F\u63F4\u7684 SSL/TLS \u7248\u672C\uFF0C\u505C\u7528\u5DF2\u904E\u6642\u7684 SSLv3 \u4EE5\u907F\u514D POODLE \u6F0F\u6D1E\u3002"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"ssl_prefer_server_ciphers on;"})}),"\uFF1A"]}),"\n",(0,l.jsx)(e.li,{children:"\u8B93\u4F3A\u670D\u5668\u512A\u5148\u9078\u64C7\u81EA\u5DF1\u7684\u52A0\u5BC6\u5957\u4EF6\uFF0C\u589E\u5F37\u5B89\u5168\u6027\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u8A18\u9304\u6A94\u8A2D\u5B9A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"access_log /var/log/nginx/access.log;\nerror_log /var/log/nginx/error.log;\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"access_log /var/log/nginx/access.log;"})}),"\uFF1A"]}),"\n",(0,l.jsx)(e.li,{children:"\u8A18\u9304\u6240\u6709 HTTP \u5B58\u53D6\u8ACB\u6C42\uFF0C\u4FBF\u65BC\u76E3\u63A7\u7DB2\u7AD9\u6D41\u91CF\u3002"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"error_log /var/log/nginx/error.log;"})}),"\uFF1A"]}),"\n",(0,l.jsx)(e.li,{children:"\u8A18\u9304 Nginx \u932F\u8AA4\u65E5\u8A8C\uFF0C\u6709\u52A9\u65BC\u5075\u932F\u8207\u8A3A\u65B7\u554F\u984C\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Gzip \u58D3\u7E2E\u8A2D\u5B9A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"gzip on;\n# gzip_vary on;\n# gzip_proxied any;\n# gzip_comp_level 6;\n# gzip_buffers 16 8k;\n# gzip_http_version 1.1;\n# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"gzip on;"})}),"\uFF1A"]}),"\n",(0,l.jsx)(e.li,{children:"\u555F\u7528 Gzip \u58D3\u7E2E\uFF0C\u63D0\u9AD8\u7DB2\u9801\u50B3\u8F38\u6548\u7387\uFF0C\u6E1B\u5C11\u6D41\u91CF\u6D88\u8017\u3002"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\uFF08\u8A3B\u89E3\u90E8\u5206\uFF09"}),"\uFF1A"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"gzip_comp_level 6;"})," \u53EF\u8ABF\u6574\u58D3\u7E2E\u6BD4\u7387\uFF0C\u6578\u503C\u8D8A\u9AD8\u58D3\u7E2E\u6548\u679C\u8D8A\u597D\u4F46 CPU \u958B\u92B7\u589E\u52A0\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"gzip_types ..."})}),"\uFF1A"]}),"\n",(0,l.jsx)(e.li,{children:"\u5B9A\u7FA9\u54EA\u4E9B MIME \u985E\u578B\u7684\u56DE\u61C9\u6703\u88AB Gzip \u58D3\u7E2E\uFF08\u5982 CSS\u3001JS\u3001JSON \u7B49\uFF09\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u865B\u64EC\u4E3B\u6A5F\u8A2D\u5B9A"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"include /etc/nginx/conf.d/*.conf;\ninclude /etc/nginx/sites-enabled/*;\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"include /etc/nginx/conf.d/*.conf;"})}),"\uFF1A"]}),"\n",(0,l.jsxs)(e.li,{children:["\u8F09\u5165 ",(0,l.jsx)(e.code,{children:"conf.d"})," \u76EE\u9304\u5167\u7684\u6240\u6709 ",(0,l.jsx)(e.code,{children:".conf"})," \u6A94\u6848\uFF0C\u901A\u5E38\u7528\u4F86\u5B58\u653E\u5168\u57DF\u6027\u8A2D\u5B9A\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"include /etc/nginx/sites-enabled/*;"})}),"\uFF1A"]}),"\n",(0,l.jsxs)(e.li,{children:["\u8F09\u5165 ",(0,l.jsx)(e.code,{children:"sites-enabled"})," \u5167\u7684\u7DB2\u7AD9\u8A2D\u5B9A\u6A94\uFF0C\u6BCF\u500B\u7AD9\u9EDE\u7684\u8A2D\u5B9A\u6A94\u6848\u901A\u5E38\u4F4D\u65BC ",(0,l.jsx)(e.code,{children:"sites-available"}),"\uFF0C\u900F\u904E\u7B26\u865F\u9023\u7D50\u555F\u7528\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u4E3B\u914D\u7F6E\u6A94\u6848\u90F5\u4EF6\u4EE3\u7406",children:"\u4E3B\u914D\u7F6E\u6A94\u6848\uFF1A\u90F5\u4EF6\u4EE3\u7406"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-nginx",children:"#mail {\n#	server {\n#		listen     localhost:110;\n#		protocol   pop3;\n#		proxy      on;\n#	}\n#	server {\n#		listen     localhost:143;\n#		protocol   imap;\n#		proxy      on;\n#	}\n#}\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u9019\u90E8\u5206\u5B9A\u7FA9\u4E86 Nginx \u7684\u90F5\u4EF6\u4EE3\u7406\u529F\u80FD\uFF08POP3/IMAP\uFF09\uFF0C\u9810\u8A2D\u70BA\u8A3B\u89E3\u72C0\u614B\uFF0C\u672A\u555F\u7528\u3002"}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.p,{children:["\u9810\u8A2D\u7684\u6A94\u6848\u5167\u5BB9\u5C31\u662F\u9019\u6A23\uFF0C\u901A\u5E38\u4E00\u958B\u59CB\u6211\u5011\u4E0D\u592A\u6703\u53BB\u52D5\u9019\u500B\u6A94\u6848\uFF0C\u56E0\u70BA\u9019\u662F Nginx \u7684\u5168\u57DF\u8A2D\u5B9A\uFF0C\u6211\u5011\u6703\u5728 ",(0,l.jsx)(e.code,{children:"sites-available"})," \u8207 ",(0,l.jsx)(e.code,{children:"sites-enabled"})," \u76EE\u9304\u4E2D\u5EFA\u7ACB\u7368\u7ACB\u7684\u7AD9\u9EDE\u914D\u7F6E\u6A94\u6848\uFF0C\u4EE5\u4FBF\u7BA1\u7406\u591A\u500B\u7AD9\u9EDE\u3002"]})]})}function h(n={}){let{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(x,{...n})}):x(n)}},50065:function(n,e,s){s.d(e,{Z:function(){return d},a:function(){return c}});var i=s(67294);let l={},r=i.createContext(l);function c(n){let e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);