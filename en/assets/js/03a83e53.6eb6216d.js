"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["26952"],{29365:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>a,toc:()=>d,default:()=>u,metadata:()=>s,assets:()=>c,contentTitle:()=>o});var s=JSON.parse('{"id":"autotraderx/masterlink/backtesting","title":"Backtesting System","description":"After analyzing the MasterLink\'s backtesting system Python API, we can now develop a customized backtesting system tailored to our needs.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/autotraderx/masterlink/backtesting.md","sourceDirName":"autotraderx/masterlink","slug":"/autotraderx/masterlink/backtesting","permalink":"/en/docs/autotraderx/masterlink/backtesting","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"zephyr-sh","lastUpdatedAt":1719059132000,"sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Order System","permalink":"/en/docs/autotraderx/masterlink/trader"},"next":{"title":"Capybara","permalink":"/en/docs/capybara/"}}'),i=t(74848),r=t(84429);let a={sidebar_position:8},o="Backtesting System",c={},d=[{value:"Account Login",id:"account-login",level:2},{value:"Subscribing to Indicators",id:"subscribing-to-indicators",level:2},{value:"Historical Trades",id:"historical-trades",level:2},{value:"Next Steps",id:"next-steps",level:2}];function l(e){let n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"backtesting-system",children:"Backtesting System"})}),"\n",(0,i.jsx)(n.p,{children:"After analyzing the MasterLink's backtesting system Python API, we can now develop a customized backtesting system tailored to our needs."}),"\n",(0,i.jsx)(n.h2,{id:"account-login",children:"Account Login"}),"\n",(0,i.jsx)(n.p,{children:"You can directly embed your account credentials within the class inputs, or alternatively, follow our approach: using a YAML file to store account information."}),"\n",(0,i.jsx)(n.p,{children:"In the parameter file, ensure to include both the username and password, essential for successful login to your MasterLink account."}),"\n",(0,i.jsxs)(n.p,{children:["Next, import the ",(0,i.jsx)(n.code,{children:"BackTesting"})," class from ",(0,i.jsx)(n.code,{children:"autotraderx"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from autotraderx import load_yaml\nfrom autotraderx.masterlink import BackTesting\n\n# Load account info\ncfg = load_yaml(DIR / "account.yaml")\n\n# Login to account\nhandler = BackTesting(\n    user=cfg["user"],\n    password=cfg["password"],\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"subscribing-to-indicators",children:"Subscribing to Indicators"}),"\n",(0,i.jsx)(n.p,{children:"While testing the provided official example code, we encountered a prolonged period of non-responsiveness when subscribing to indicators."}),"\n",(0,i.jsx)(n.p,{children:"Here's the example code provided by the official documentation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'ta = TechAnalysis(...)\n\nopt = input("1: Indicator\\n2: Historical Trades\\n> ")\nif opt == "1":\n    k_config = option()\n    ta.SubTA(k_config)\n    input("running...\\n")\n    ta.UnSubTA(k_config)\n'})}),"\n",(0,i.jsx)(n.p,{children:'Upon execution, we faced a delay stuck at "running..." for approximately five minutes, leading us to terminate the program due to impatience.'}),"\n",(0,i.jsx)(n.p,{children:"Moreover, since most technical indicators are derived from price-volume data, we find it more efficient to retrieve price-volume data ourselves and compute the indicators."}),"\n",(0,i.jsx)(n.p,{children:"Therefore, we won't be implementing this part of the functionality."}),"\n",(0,i.jsx)(n.h2,{id:"historical-trades",children:"Historical Trades"}),"\n",(0,i.jsxs)(n.p,{children:["Once logged into the account, you can use our encapsulated ",(0,i.jsx)(n.code,{children:"get_data"})," function to retrieve data:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'data = handler.get_data(\n    prod_id="2330",\n    date="20240102",\n)\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Here, ",(0,i.jsx)(n.code,{children:"prod_id"})," represents the stock code, and ",(0,i.jsx)(n.code,{children:"date"})," follows the format ",(0,i.jsx)(n.code,{children:"YYYYMMDD"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Upon executing the above code, it returns a structure in the form of List[Dict]:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n    ...omitting above data...\n    {\n        "\u6210\u4EA4\u50F9\u683C": 590.0,\n        "\u6210\u4EA4\u6642\u9593": 132459.132661,\n        "\u6210\u4EA4\u91CF": 1,\n        "\u80A1\u7968\u4EE3\u865F": "2330",\n        "\u8A66\u6413": False,\n        "\u8CB7\u8CE3": 2\n    },\n    {\n        "\u6210\u4EA4\u50F9\u683C": 593.0,\n        "\u6210\u4EA4\u6642\u9593": 133000.0,\n        "\u6210\u4EA4\u91CF": 3704,\n        "\u80A1\u7968\u4EE3\u865F": "2330",\n        "\u8A66\u6413": False,\n        "\u8CB7\u8CE3": 2\n    }\n]\n'})}),"\n",(0,i.jsx)(n.p,{children:"Based on our observation, we discovered several features in the MasterLink API:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"\u8A66\u6413"})," (Test Rounding)"]}),": Indicates whether the transaction is a test rounding."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"\u8CB7\u8CE3"})," (Buy/Sell)"]}),": Represents whether the transaction occurred in the bid or ask, where ",(0,i.jsx)(n.code,{children:"0"})," signifies a neutral position, ",(0,i.jsx)(n.code,{children:"1"})," represents the bid, and ",(0,i.jsx)(n.code,{children:"2"})," indicates the ask."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"\u6210\u4EA4\u6642\u9593"})," (Transaction Time)"]}),": This field is read as ",(0,i.jsx)(n.code,{children:"HHMMSS.ffffff"}),", where ",(0,i.jsx)(n.code,{children:"HH"})," is hours, ",(0,i.jsx)(n.code,{children:"MM"})," is minutes, ",(0,i.jsx)(n.code,{children:"SS"})," is seconds, and ",(0,i.jsx)(n.code,{children:"ffffff"})," represents microseconds."]}),"\n",(0,i.jsx)(n.li,{children:"We attempted to query historical data and found records available only from mid-April 2022 onwards."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"However, for our modest-scale usage, having data spanning over two years should suffice."}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(n.p,{children:"Our plan is to first retrieve available stock transaction data and establish our own database system."}),"\n",(0,i.jsx)(n.p,{children:"For subsequent tasks such as calculating technical indicators or backtesting trading strategies, we can directly access data from our database, ensuring speed and convenience."}),"\n",(0,i.jsx)(n.p,{children:"As for acquiring data from earlier periods, we'll address those needs as they arise."})]})}function u(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},84429:function(e,n,t){t.d(n,{R:()=>a,x:()=>o});var s=t(96540);let i={},r=s.createContext(i);function a(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);