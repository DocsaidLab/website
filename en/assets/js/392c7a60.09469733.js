"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["57818"],{44773:function(e,n,i){i.r(n),i.d(n,{assets:function(){return a},contentTitle:function(){return o},default:function(){return u},frontMatter:function(){return r},metadata:function(){return t},toc:function(){return c}});var t=i(29178),s=i(85893),l=i(50065);let r={slug:"fixed-pyenv-install-error",title:"Fixing pyenv Build Errors",authors:"Z. Yuan",image:"/en/img/2024/1125.webp",tags:["pyenv","python"],description:"Troubleshooting build errors"},o=void 0,a={authorsImageUrls:[void 0]},c=[{value:"Problem Description",id:"problem-description",level:2},{value:"Fixing the Problem",id:"fixing-the-problem",level:2},{value:"1. Install Dependencies",id:"1-install-dependencies",level:3},{value:"2. Check GCC Version",id:"2-check-gcc-version",level:3},{value:"3. Check the Log File",id:"3-check-the-log-file",level:3},{value:"4. Reinstall Binutils",id:"4-reinstall-binutils",level:3}];function d(e){let n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Installing pyenv itself is fine."}),"\n",(0,s.jsx)(n.p,{children:"However, an error occurs when building the Python version."}),"\n",(0,s.jsx)(n.h2,{id:"problem-description",children:"Problem Description"}),"\n",(0,s.jsx)(n.p,{children:"Using the command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"pyenv install 3.10.15\n"})}),"\n",(0,s.jsx)(n.p,{children:"Shortly after, the system throws a series of error messages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"Downloading Python-3.10.15.tar.xz...\n-> https://www.python.org/ftp/python/3.10.15/Python-3.10.15.tar.xz\nInstalling Python-3.10.15...\n\nBUILD FAILED (Ubuntu 22.04 using python-build 20180424)\n\nInspect or clean up the working tree at /tmp/python-build.20241125102533.16978\nResults logged to /tmp/python-build.20241125102533.16978.log\n\nLast 10 log lines:\n        ./signal/../sysdeps/unix/sysv/linux/x86_64/libc_sigaction.c:0\n0x7be2d6829d8f __libc_start_call_main\n        ../sysdeps/nptl/libc_start_call_main.h:58\n0x7be2d6829e3f __libc_start_main_impl\n        ../csu/libc-start.c:392\nPlease submit a full bug report,\nwith preprocessed source if appropriate.\nPlease include the complete backtrace with any bug report.\nSee <file:///usr/share/doc/gcc-11/README.Bugs> for instructions.\nmake: *** [Makefile:1856: Python/getargs.o] Error 1\n"})}),"\n",(0,s.jsx)(n.p,{children:"Huh? Just another day in the life of a developer!"}),"\n",(0,s.jsx)(n.h2,{id:"fixing-the-problem",children:"Fixing the Problem"}),"\n",(0,s.jsx)(n.p,{children:"Here are a few potential fixes:"}),"\n",(0,s.jsx)(n.h3,{id:"1-install-dependencies",children:"1. Install Dependencies"}),"\n",(0,s.jsx)(n.p,{children:"First, update the system packages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sudo apt update && sudo apt upgrade -y\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then, make sure the necessary packages are installed:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sudo apt install -y build-essential libssl-dev zlib1g-dev libbz2-dev \\\n    libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev \\\n    libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev\n"})}),"\n",(0,s.jsx)(n.p,{children:"The system tells us that all the above packages are already up-to-date."}),"\n",(0,s.jsx)(n.p,{children:"So, it\u2019s not the problem here."}),"\n",(0,s.jsx)(n.h3,{id:"2-check-gcc-version",children:"2. Check GCC Version"}),"\n",(0,s.jsx)(n.p,{children:"Update the GCC version:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sudo apt install --reinstall gcc\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then try again, but the same error persists."}),"\n",(0,s.jsx)(n.p,{children:"Looks like this isn\u2019t the issue either."}),"\n",(0,s.jsx)(n.h3,{id:"3-check-the-log-file",children:"3. Check the Log File"}),"\n",(0,s.jsx)(n.p,{children:"From the error messages, find the location of the log file and take a look:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"less /tmp/python-build.20241125102533.16978.log\n"})}),"\n",(0,s.jsx)(n.p,{children:"Inside, there\u2019s a ton of information. Let\u2019s go straight to the last section:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"gcc -c -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall    -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration -fvisibility=hidden  -I./Include/internal  -I. -I./Include -I/home/user/.pyenv/versions/3.10.15/include -I/home/user/.pyenv/versions/3.10.15/include -fPIC -DPy_BUILD_CORE -o Programs/_testembed.o ./Programs/_testembed.c\nsed -e \"s,@EXENAME@,/home/user/.pyenv/versions/3.10.15/bin/python3.10,\" < ./Misc/python-config.in >python-config.py\nLC_ALL=C sed -e 's,\\$(\\([A-Za-z0-9_]*\\)),\\$\\{\\1\\},g' < Misc/python-config.sh >python-config\n/tmp/ccTVJtRi.s: Assembler messages:\n/tmp/ccTVJtRi.s: Internal error in emit_inc_line_addr at ../../gas/dwarf2dbg.c:1643.\nPlease report this bug.\nmake: *** [Makefile:1856: Objects/typeobject.o] Error 1\nmake: *** Waiting for unfinished jobs....\n"})}),"\n",(0,s.jsx)(n.p,{children:"The error here says:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:'"Internal error in emit_inc_line_addr at ../../gas/dwarf2dbg.c"'})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This points to an issue with the assembler component of binutils, typically indicating a bug or incompatibility in the package."}),"\n",(0,s.jsx)(n.h3,{id:"4-reinstall-binutils",children:"4. Reinstall Binutils"}),"\n",(0,s.jsx)(n.p,{children:"Great, now we know the problem. Let\u2019s update binutils:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"sudo apt update\nsudo apt install --reinstall binutils\n"})}),"\n",(0,s.jsx)(n.p,{children:"After updating, try running:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"pyenv install 3.10.15\n"})}),"\n",(0,s.jsx)(n.p,{children:"This time, it works, and the problem is resolved."})]})}function u(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},50065:function(e,n,i){i.d(n,{Z:function(){return o},a:function(){return r}});var t=i(67294);let s={},l=t.createContext(s);function r(e){let n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(l.Provider,{value:n},e.children)}},29178:function(e){e.exports=JSON.parse('{"permalink":"/en/blog/fixed-pyenv-install-error","source":"@site/i18n/en/docusaurus-plugin-content-blog/2024/11-25-fixed-pyenv-install-error/index.md","title":"Fixing pyenv Build Errors","description":"Troubleshooting build errors","date":"2024-11-25T00:00:00.000Z","tags":[{"inline":true,"label":"pyenv","permalink":"/en/blog/tags/pyenv"},{"inline":true,"label":"python","permalink":"/en/blog/tags/python"}],"readingTime":2.025,"hasTruncateMarker":true,"authors":[{"name":"Z. Yuan","title":"Engineer","url":"https://github.com/Z. Yuan-sh","imageURL":"https://github.com/Z. Yuan-sh.png","key":"Z. Yuan","page":null}],"frontMatter":{"slug":"fixed-pyenv-install-error","title":"Fixing pyenv Build Errors","authors":"Z. Yuan","image":"/en/img/2024/1125.webp","tags":["pyenv","python"],"description":"Troubleshooting build errors"},"unlisted":false,"prevItem":{"title":"A Brief Introduction to Fourier Transform","permalink":"/en/blog/fourier-transform"},"nextItem":{"title":"Update Docusaurus to 3.6.0","permalink":"/en/blog/update-docusaurus-to-3-6-0"}}')}}]);