"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([["522"],{82046:function(e,n,r){r.r(n),r.d(n,{metadata:()=>i,contentTitle:()=>c,default:()=>h,assets:()=>a,toc:()=>l,frontMatter:()=>o});var i=JSON.parse('{"id":"mrzscanner/quickstart","title":"QuickStart","description":"We provide a simple model inference interface that includes preprocessing and postprocessing logic.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/mrzscanner/quickstart.md","sourceDirName":"mrzscanner","slug":"/mrzscanner/quickstart","permalink":"/en/docs/mrzscanner/quickstart","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"zephyr-sh","lastUpdatedAt":1732587943000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/en/docs/mrzscanner/installation"},"next":{"title":"Advanced","permalink":"/en/docs/mrzscanner/advance"}}'),t=r("85893"),s=r("50065");let o={sidebar_position:3},c="QuickStart",a={},l=[{value:"Model Inference",id:"model-inference",level:2},{value:"Using with <code>DocAligner</code>",id:"using-with-docaligner",level:2},{value:"Error Messages",id:"error-messages",level:2},{value:"Check Digits",id:"check-digits",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"quickstart",children:"QuickStart"})}),"\n",(0,t.jsx)(n.p,{children:"We provide a simple model inference interface that includes preprocessing and postprocessing logic."}),"\n",(0,t.jsxs)(n.p,{children:["First, you need to import the necessary dependencies and create an instance of the ",(0,t.jsx)(n.code,{children:"MRZScanner"})," class."]}),"\n",(0,t.jsx)(n.h2,{id:"model-inference",children:"Model Inference"}),"\n",(0,t.jsxs)(n.p,{children:["Below is a simple example demonstrating how to use ",(0,t.jsx)(n.code,{children:"MRZScanner"})," for model inference:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from mrzscanner import MRZScanner\n\nmodel = MRZScanner()\n"})}),"\n",(0,t.jsx)(n.p,{children:"After initializing the model, prepare an image for inference:"}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.p,{children:["You can use the test image provided by ",(0,t.jsx)(n.code,{children:"MRZScanner"}),":"]}),(0,t.jsxs)(n.p,{children:["Download link: ",(0,t.jsx)(n.a,{href:"https://github.com/DocsaidLab/MRZScanner/blob/main/docs/test_mrz.jpg",children:(0,t.jsx)(n.strong,{children:"midv2020_test_mrz.jpg"})})]}),(0,t.jsx)("div",{align:"center",children:(0,t.jsx)("figure",{style:{width:"50%"},children:(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"test_mrz",src:r(4132).Z+"",width:"2160",height:"3840"})})})})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import docsaidkit as D\n\nimg = D.imread('path/to/run_test_card.jpg')\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or you can read it directly from a URL:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import cv2\nfrom skimage import io\n\nimg = io.imread('https://github.com/DocsaidLab/MRZScanner/blob/main/docs/test_mrz.jpg?raw=true')\nimg = cv2.cvtColor(img, cv2.COLOR_RGB2BGR)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This image is quite long, and performing inference directly might cause excessive text deformation. Therefore, when calling the model, enable the ",(0,t.jsx)(n.code,{children:"do_center_crop"})," parameter:"]}),"\n",(0,t.jsxs)(n.p,{children:["Next, you can perform inference using the ",(0,t.jsx)(n.code,{children:"model"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from mrzscanner import MRZScanner\n\nmodel = MRZScanner()\n\nresult, msg = model(img, do_center_crop=True)\nprint(result)\n# >>> ('PCAZEQAOARIN<<FIDAN<<<<<<<<<<<<<<<<<<<<<<<<<',\n#      'C946302620AZE6707297F23031072W12IMJ<<<<<<<40')\nprint(msg)\n# >>> <ErrorCodes.NO_ERROR: 'No error.'>\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"MRZScanner"})," is encapsulated with ",(0,t.jsx)(n.code,{children:"__call__"}),", so you can directly call the instance for inference."]})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["We have implemented an automatic model download feature. When you use ",(0,t.jsx)(n.code,{children:"MRZScanner"})," for the first time, the model will be downloaded automatically."]})}),"\n",(0,t.jsxs)(n.h2,{id:"using-with-docaligner",children:["Using with ",(0,t.jsx)(n.code,{children:"DocAligner"})]}),"\n",(0,t.jsxs)(n.p,{children:["Looking closely at the output results above, you might notice a few typos even after using ",(0,t.jsx)(n.code,{children:"do_center_crop"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Since we performed full-image scanning earlier, the model might misinterpret some text in the image."}),"\n",(0,t.jsxs)(n.p,{children:["To improve accuracy, we can use ",(0,t.jsx)(n.code,{children:"DocAligner"})," to help align the MRZ region:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import cv2\nfrom docaligner import DocAligner  # Import DocAligner\nfrom mrzscanner import MRZScanner\nfrom skimage import io\n\nmodel = MRZScanner()\ndoc_aligner = DocAligner()\n\nimg = io.imread(\n    'https://github.com/DocsaidLab/MRZScanner/blob/main/docs/test_mrz.jpg?raw=true')\nimg = cv2.cvtColor(img, cv2.COLOR_RGB2BGR)\n\nflat_img = doc_aligner(img).doc_flat_img  # Align the MRZ region\nprint(model(flat_img))\n# >>> ('PCAZEQAQARIN<<FIDAN<<<<<<<<<<<<<<<<<<<<<<<<<',\n#      'C946302620AZE6707297F23031072W12IMJ<<<<<<<40')\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After using ",(0,t.jsx)(n.code,{children:"DocAligner"}),", there's no need to use the ",(0,t.jsx)(n.code,{children:"do_center_crop"})," parameter."]}),"\n",(0,t.jsx)(n.p,{children:"Now, you can see that the output results are more accurate\u2014the MRZ region of the image has been successfully recognized."}),"\n",(0,t.jsx)(n.h2,{id:"error-messages",children:"Error Messages"}),"\n",(0,t.jsxs)(n.p,{children:["To help users understand the reasons behind errors, we designed the ",(0,t.jsx)(n.code,{children:"ErrorCodes"})," class."]}),"\n",(0,t.jsx)(n.p,{children:"When the model inference fails, an error message is generated, covering the following scenarios:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"class ErrorCodes(Enum):\n    NO_ERROR = 'No error.'\n    INVALID_INPUT_FORMAT = 'Invalid input format.'\n    POSTPROCESS_FAILED_LINE_COUNT = 'Postprocess failed, number of lines not 2 or 3.'\n    POSTPROCESS_FAILED_TD1_LENGTH = 'Postprocess failed, length of lines not 30 when `doc_type` is TD1.'\n    POSTPROCESS_FAILED_TD2_TD3_LENGTH = 'Postprocess failed, length of lines not 36 or 44 when `doc_type` is TD2 or TD3.'\n"})}),"\n",(0,t.jsx)(n.p,{children:"This filters out basic errors, such as incorrect input formats, incorrect line counts, etc."}),"\n",(0,t.jsx)(n.h2,{id:"check-digits",children:"Check Digits"}),"\n",(0,t.jsx)(n.p,{children:"Check Digits are a key part of MRZ used to ensure data accuracy. They validate numerical correctness to prevent input errors."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Detailed steps are documented in ",(0,t.jsx)(n.a,{href:"./reference#check-digit",children:(0,t.jsx)(n.strong,{children:"Reference: Check Digits"})}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"Here\u2019s what we want to emphasize:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"We do not provide a function to calculate Check Digits!"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This is because the calculation method for MRZ Check Digits is not standardized. Besides the official calculation methods, different regions can define their own Check Digit algorithms for MRZ, so providing a predefined method might limit user flexibility."}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsx)(n.p,{children:"Fun fact:"}),(0,t.jsx)(n.p,{children:"The Check Digits on the back of Taiwan's Resident Certificate (ARC) differ from global standards. Without collaboration with the government, it is impossible to determine their calculation method."})]}),"\n",(0,t.jsxs)(n.p,{children:["Our goal is to train a model that focuses on MRZ recognition. Each output format is automatically determined by the model. Many other open-source projects provide Check Digit calculation features. For example, the ",(0,t.jsx)(n.a,{href:"https://github.com/Arg0s1080/mrz",children:(0,t.jsx)(n.strong,{children:"Arg0s1080/mrz"})})," project includes a Check Digit calculation function, and we recommend users utilize that project directly."]})]})}function h(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},4132:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/test_mrz-677fee313daebc656fb474f194ee59e0.jpg"},50065:function(e,n,r){r.d(n,{Z:function(){return c},a:function(){return o}});var i=r(67294);let t={},s=i.createContext(t);function o(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);