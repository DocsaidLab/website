"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["19930"],{76851:function(e,r,n){n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var i=n(1455),s=n(85893),t=n(50065);let o={slug:"fix-markdown-pdf-mermaid-export-error",title:"Fix Markdown PDF Mermaid Export Error",authors:"Z. Yuan",image:"/en/img/2025/0718.jpg",tags:["Markdown-PDF","Mermaid","Export","Error"],description:"Fix export errors to ensure Mermaid diagrams render correctly."},a=void 0,l={authorsImageUrls:[void 0]},d=[{value:"Markdown PDF",id:"markdown-pdf",level:2},{value:"Mermaid Export Error",id:"mermaid-export-error",level:2},{value:"Solution",id:"solution",level:2},{value:"Are other versions feasible?",id:"are-other-versions-feasible",level:2}];function c(e){let r={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.p,{children:"If you want to convert Markdown files to PDF, you will probably come across a few common tools."}),"\n",(0,s.jsxs)(r.p,{children:["I personally use the ",(0,s.jsx)(r.strong,{children:"Markdown PDF"})," extension in VS Code to export PDFs."]}),"\n",(0,s.jsx)(r.h2,{id:"markdown-pdf",children:"Markdown PDF"}),"\n",(0,s.jsx)(r.p,{children:"This extension looks like this on my system:"}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsx)("figure",{style:{width:"70%"},children:(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Markdown PDF",src:n(95102).Z+"",width:"2809",height:"2099"})})})}),"\n",(0,s.jsx)(r.p,{children:"The advantages of Markdown PDF include:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["Directly call VS Code\u2019s ",(0,s.jsx)(r.strong,{children:"Command Palette \u2192 \u201CMarkdown PDF: Export (pdf)\u201D"})," to generate PDFs, supporting multiple output formats such as HTML / PNG / JPEG."]}),"\n",(0,s.jsxs)(r.li,{children:["Built-in ",(0,s.jsx)(r.em,{children:"puppeteer"}),", which can render HTML \u2192 PDF in headless Chrome, so math formulas (KaTeX), code block highlighting, and CSS themes are all preserved perfectly."]}),"\n",(0,s.jsxs)(r.li,{children:["Allows customizing the ",(0,s.jsx)(r.strong,{children:"Mermaid Server"})," URL, which is the key to fixing the export error below."]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["After installation, several properties appear in ",(0,s.jsx)(r.code,{children:"settings.json"}),". This article focuses on ",(0,s.jsx)(r.code,{children:"markdown-pdf.mermaidServer"}),"."]}),"\n",(0,s.jsx)(r.h2,{id:"mermaid-export-error",children:"Mermaid Export Error"}),"\n",(0,s.jsx)(r.p,{children:"When the Markdown contains the following syntax:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-text",children:"graph TD\n    A --\x3e B\n    A --\x3e C\n    B --\x3e D\n    C --\x3e D\n"})}),"\n",(0,s.jsx)(r.p,{children:"Using this site\u2019s built-in feature to render the above as a Mermaid diagram looks like this:"}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsx)(r.mermaid,{value:"graph TD\n    A --\x3e B\n    A --\x3e C\n    B --\x3e D\n    C --\x3e D"})}),"\n",(0,s.jsxs)(r.p,{children:["Functionally, everything works fine \u2014 the VS Code preview panel shows no errors. However, ",(0,s.jsx)(r.strong,{children:"exporting to PDF"})," may result in two situations:"]}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"No response at all"}),": The original Mermaid block is parsed as plain text in the PDF, without any diagram rendering."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-text",children:"graph TD\n    A --\x3e B\n    A --\x3e C\n    B --\x3e D\n    C --\x3e D\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Bomb icon + blank page"}),": The PDF shows only a \u201C\uD83D\uDCA3\u201D icon or a blank page, with the Mermaid text appearing as-is."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["After researching, the main cause seems to be a ",(0,s.jsx)(r.strong,{children:"compatibility conflict"})," between Markdown PDF and the latest Mermaid version."]}),"\n",(0,s.jsxs)(r.p,{children:["Since Mermaid 10.4.0, the official release uses ",(0,s.jsx)(r.strong,{children:"ES Module"}),", and the old puppeteer ",(0,s.jsx)(r.code,{children:"evaluate()"})," script injection fails to run properly, causing \u201Csyntax error in text\u201D and empty rendering."]}),"\n",(0,s.jsx)(r.h2,{id:"solution",children:"Solution"}),"\n",(0,s.jsx)(r.p,{children:"Here is the conclusion first:"}),"\n",(0,s.jsxs)(r.p,{children:["Go to the settings page, find ",(0,s.jsx)(r.code,{children:"markdown-pdf.mermaidServer"}),", and point it to ",(0,s.jsx)(r.strong,{children:"Mermaid 10.3.1"})," version, as shown below:"]}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsx)("figure",{style:{width:"90%"},children:(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Markdown PDF Mermaid Server",src:n(23694).Z+"",width:"1224",height:"292"})})})}),"\n",(0,s.jsx)(r.p,{children:"Replace the original default URL:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-text",children:"https://unpkg.com/mermaid/dist/mermaid.min.js\n"})}),"\n",(0,s.jsx)(r.p,{children:"with:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-text",children:"https://unpkg.com/mermaid@10.3.1/dist/mermaid.js\n"})}),"\n",(0,s.jsx)(r.h2,{id:"are-other-versions-feasible",children:"Are other versions feasible?"}),"\n",(0,s.jsx)(r.p,{children:"I searched GitHub for a while and found some related issues, such as:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/yzane/vscode-markdown-pdf/issues/312",children:(0,s.jsx)(r.strong,{children:"Markdown-pdf: Mermaid Server VSCode URL no longer resolves #312"})})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://github.com/yzane/vscode-markdown-pdf/issues/342",children:(0,s.jsx)(r.strong,{children:"[BUG] Mermaid Diagrams Not Rendered in Exported PDF #342"})})}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"Below are two commonly recommended solutions:"}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsx)("figure",{style:{width:"90%"},children:(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"Markdown PDF Mermaid Server Issues",src:n(3241).Z+"",width:"1224",height:"508"})})})}),"\n",(0,s.jsxs)(r.p,{children:["But from my own tests, only version ",(0,s.jsx)(r.strong,{children:"10.3.1"})," can correctly convert all my diagrams, including Graph, sequenceDiagram, and gantt. As for other diagram types like classDiagram, stateDiagram, etc., you may need to try them yourself."]}),"\n",(0,s.jsx)(r.p,{children:"Finally, if you have any good methods or successful experiences with other versions, feel free to share them in the comments."})]})}function h(e={}){let{wrapper:r}={...(0,t.a)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},95102:function(e,r,n){n.d(r,{Z:()=>i});let i=n.p+"assets/images/img1-b6bd505f8b4d4c4dc28be0a62ba50545.jpg"},23694:function(e,r,n){n.d(r,{Z:()=>i});let i=n.p+"assets/images/img2-156483b430e42b5c6ce437725a421137.jpg"},3241:function(e,r,n){n.d(r,{Z:()=>i});let i=n.p+"assets/images/img3-eeb60cc52fcba78d54f74fe0a38b22c2.jpg"},50065:function(e,r,n){n.d(r,{Z:()=>a,a:()=>o});var i=n(67294);let s={},t=i.createContext(s);function o(e){let r=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:r},e.children)}},1455:function(e){e.exports=JSON.parse('{"permalink":"/en/blog/fix-markdown-pdf-mermaid-export-error","source":"@site/i18n/en/docusaurus-plugin-content-blog/2025/07-18-fix-markdown-pdf-mermaid-export-error/index.md","title":"Fix Markdown PDF Mermaid Export Error","description":"Fix export errors to ensure Mermaid diagrams render correctly.","date":"2025-07-18T00:00:00.000Z","tags":[{"inline":true,"label":"Markdown-PDF","permalink":"/en/blog/tags/markdown-pdf"},{"inline":true,"label":"Mermaid","permalink":"/en/blog/tags/mermaid"},{"inline":true,"label":"Export","permalink":"/en/blog/tags/export"},{"inline":true,"label":"Error","permalink":"/en/blog/tags/error"}],"readingTime":2.52,"hasTruncateMarker":true,"authors":[{"name":"Z. Yuan","title":"Dosaid maintainer, Full-Stack AI Engineer","url":"https://github.com/zephyr-sh","socials":{"github":"https://github.com/zephyr-sh","linkedin":"https://www.linkedin.com/in/ze-yuan-sh7/"},"imageURL":"https://github.com/zephyr-sh.png","key":"Z. Yuan","page":null}],"frontMatter":{"slug":"fix-markdown-pdf-mermaid-export-error","title":"Fix Markdown PDF Mermaid Export Error","authors":"Z. Yuan","image":"/en/img/2025/0718.jpg","tags":["Markdown-PDF","Mermaid","Export","Error"],"description":"Fix export errors to ensure Mermaid diagrams render correctly."},"unlisted":false,"nextItem":{"title":"Reading Papers, No Need to Try Too Hard","permalink":"/en/blog/read-papers-lightly"}}')}}]);