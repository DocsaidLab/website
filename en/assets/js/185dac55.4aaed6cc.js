"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["63494"],{65283:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return a},default:function(){return u},frontMatter:function(){return r},metadata:function(){return i},toc:function(){return l}});var i=t(15055),o=t(85893),s=t(50065);let r={slug:"customized-docusaurus-404-page",title:"Customizing the Docusaurus 404 Page",authors:"Z. Yuan",image:"/en/img/2024/0910.webp",tags:["Docusaurus","404NotFound"],description:"The default 404 page needs a revamp!"},a=void 0,c={authorsImageUrls:[void 0]},l=[{value:"References",id:"references",level:2},{value:"Exporting the 404 Page Configuration",id:"exporting-the-404-page-configuration",level:2},{value:"Start Modifying",id:"start-modifying",level:2},{value:"Countdown Timer",id:"countdown-timer",level:3},{value:"Adding an Icon",id:"adding-an-icon",level:3},{value:"Custom Text",id:"custom-text",level:3},{value:"Final Result",id:"final-result",level:3},{value:"Full Code",id:"full-code",level:3}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Docusaurus is a static site generator developed by Meta, designed for building open-source documentation websites."}),"\n",(0,o.jsx)(n.p,{children:"It provides a simple way to create and maintain websites, supporting custom themes and plugins."}),"\n",(0,o.jsxs)(n.p,{children:["If you're unfamiliar with Docusaurus, you can check it out here: ",(0,o.jsx)(n.a,{href:"https://docusaurus.io/",children:(0,o.jsx)(n.strong,{children:"Docusaurus Official Website"})})]}),"\n",(0,o.jsx)(n.p,{children:"Our site is also built using Docusaurus, but after launching, we noticed that the default 404 page was quite basic."}),"\n",(0,o.jsx)(n.p,{children:"To enhance user experience, we decided to create a custom 404 page."}),"\n",(0,o.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,o.jsx)(n.p,{children:"To solve this issue, we first found a discussion page within the Docusaurus project:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/discussions/6030",children:(0,o.jsx)(n.strong,{children:"How can I customize the 404 page?"})})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Based on this discussion, we implemented the solution."}),"\n",(0,o.jsx)(n.p,{children:"Here's our step-by-step process."}),"\n",(0,o.jsx)(n.h2,{id:"exporting-the-404-page-configuration",children:"Exporting the 404 Page Configuration"}),"\n",(0,o.jsxs)(n.admonition,{type:"warning",children:[(0,o.jsx)(n.p,{children:"Starting from this step, we\u2019ll be modifying Docusaurus' source code."}),(0,o.jsx)(n.p,{children:"If there are destructive version updates in the future, these modifications may cause the website to malfunction. Please make sure you have the ability to maintain the website before proceeding."})]}),"\n",(0,o.jsxs)(n.p,{children:["In Docusaurus, when a 404 error occurs, it redirects to the ",(0,o.jsx)(n.code,{children:"NotFound"})," page of the ",(0,o.jsx)(n.code,{children:"@docusaurus/theme-classic"})," theme."]}),"\n",(0,o.jsx)(n.p,{children:"We need to export this page\u2019s configuration by running the following command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm run swizzle @docusaurus/theme-classic NotFound\n"})}),"\n",(0,o.jsxs)(n.p,{children:["During the process, select ",(0,o.jsx)(n.code,{children:"JavaScript"}),", and then choose ",(0,o.jsx)(n.code,{children:"--eject"}),". This will generate a ",(0,o.jsx)(n.code,{children:"NotFound"})," directory under the ",(0,o.jsx)(n.code,{children:"src/theme"})," folder."]}),"\n",(0,o.jsx)(n.p,{children:"If you're curious about the original code, you can find it here:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/facebook/docusaurus/tree/e8c6787ec20adc975dd6cd292a731d01206afe92/packages/docusaurus-theme-classic/src/theme/NotFound",children:(0,o.jsx)(n.strong,{children:"docusaurus-theme-classic/src/theme/NotFound"})})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Inside the folder, you'll find an ",(0,o.jsx)(n.code,{children:"index.js"})," file. Initially, we don\u2019t need to worry about this file. Instead, look inside the ",(0,o.jsx)(n.code,{children:"Content"})," subfolder, where you'll find another ",(0,o.jsx)(n.code,{children:"index.js"})," file. This is the one we\u2019ll be modifying."]}),"\n",(0,o.jsx)(n.p,{children:"Here\u2019s the original code:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:'/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from "react";\nimport clsx from "clsx";\nimport Translate from "@docusaurus/Translate";\nimport type { Props } from "@theme/NotFound/Content";\nimport Heading from "@theme/Heading";\n\nexport default function NotFoundContent({ className }: Props): JSX.Element {\n  return (\n    <main className={clsx("container margin-vert--xl", className)}>\n      <div className="row">\n        <div className="col col--6 col--offset-3">\n          <Heading as="h1" className="hero__title">\n            <Translate\n              id="theme.NotFound.title"\n              description="The title of the 404 page"\n            >\n              Page Not Found\n            </Translate>\n          </Heading>\n          <p>\n            <Translate\n              id="theme.NotFound.p1"\n              description="The first paragraph of the 404 page"\n            >\n              We could not find what you were looking for.\n            </Translate>\n          </p>\n          <p>\n            <Translate\n              id="theme.NotFound.p2"\n              description="The 2nd paragraph of the 404 page"\n            >\n              Please contact the owner of the site that linked you to the\n              original URL and let them know their link is broken.\n            </Translate>\n          </p>\n        </div>\n      </div>\n    </main>\n  );\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"start-modifying",children:"Start Modifying"}),"\n",(0,o.jsx)(n.p,{children:"We want to add a few features:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"A cute icon."}),"\n",(0,o.jsx)(n.li,{children:"A countdown timer that automatically redirects to the homepage."}),"\n",(0,o.jsx)(n.li,{children:"Custom text to provide more information to the reader."}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"countdown-timer",children:"Countdown Timer"}),"\n",(0,o.jsxs)(n.p,{children:["First, we\u2019ll add a countdown timer using ",(0,o.jsx)(n.code,{children:"useEffect"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:'import React, { useEffect, useState } from "react";\n\nconst [countdown, setCountdown] = useState(15);\n\nuseEffect(() => {\n  const timer = setInterval(() => {\n    setCountdown((prevCountdown) =>\n      prevCountdown > 0 ? prevCountdown - 1 : 0\n    );\n  }, 1000);\n\n  if (countdown === 0) {\n    window.location.href = "/";\n  }\n\n  return () => clearInterval(timer);\n}, [countdown]);\n'})}),"\n",(0,o.jsx)(n.p,{children:"This will automatically redirect to the homepage once the countdown reaches zero."}),"\n",(0,o.jsx)(n.h3,{id:"adding-an-icon",children:"Adding an Icon"}),"\n",(0,o.jsx)(n.p,{children:"We found a cute icon on a free icon website:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://www.freepik.com/icons/error",children:(0,o.jsx)(n.strong,{children:"Freepik"})})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["After downloading it, we placed it in the ",(0,o.jsx)(n.code,{children:"static/img"})," directory and referenced it in ",(0,o.jsx)(n.code,{children:"index.js"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:'<img\n  src="/img/error-icon.png"\n  alt="Error icon"\n  style={{\n    width: "150px",\n    height: "150px",\n    marginBottom: "20px",\n    animation: "bounce 1s infinite",\n  }}\n/>\n\n<style>{`\n    @keyframes bounce {\n    0%, 100% {\n        transform: translateY(0);\n    }\n    50% {\n        transform: translateY(-10px);\n    }\n    }\n`}</style>\n'})}),"\n",(0,o.jsxs)(n.p,{children:["This ",(0,o.jsx)(n.code,{children:"<img>"})," tag displays an error icon, with some additional styling to make it bounce:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:'src="/img/error-icon.png"'}),": The image source, pointing to a local file."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:'alt="Error icon"'}),": Alternative text, displayed if the image can\u2019t load."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"style"})," attribute defines the icon's size and adds a bounce animation."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"custom-text",children:"Custom Text"}),"\n",(0,o.jsx)(n.p,{children:"The default 404 page looks something like this:"}),"\n",(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("iframe",{src:"https://docusaurus.io/non-exist",width:"80%",height:"500px",center:"true"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"We updated it with the following text:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"<p style={{ fontSize: '1.2rem', marginBottom: '20px' }}>\nSorry, we couldn't find the page you were looking for.\n</p>\n<p style={{ fontSize: '1.2rem', marginBottom: '20px' }}>\nIt\u2019s possible that the site structure has changed, and you might have clicked an outdated link.\n</p>\n<p style={{ fontSize: '1.2rem', marginBottom: '20px' }}>\nPlease use the navigation bar above to find the information you're looking for.\n</p>\n"})}),"\n",(0,o.jsx)(n.p,{children:"Since we frequently update our site, some paths may be outdated in Google\u2019s index, causing users to land on the wrong page."}),"\n",(0,o.jsx)(n.p,{children:"We use this opportunity to inform users that:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"The page they\u2019re looking for likely still exists, but has been moved!"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"We hope that with this message, users can navigate the site and find what they need."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"Feel free to customize this section to suit your needs."}),"\n",(0,o.jsx)(n.h3,{id:"final-result",children:"Final Result"}),"\n",(0,o.jsx)(n.p,{children:"Here\u2019s what our final 404 page looks like:"}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsxs)("div",{className:"row",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",textAlign:"center",animation:"fadeIn 0.5s ease-in-out"},children:[(0,o.jsx)("img",{src:"/img/error-icon.png",alt:"Error icon",style:{width:"150px",height:"150px",marginBottom:"20px",animation:"bounce 1s infinite"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:(0,o.jsx)(n.p,{children:"\u5F88\u62B1\u6B49\uFF0C\u6211\u5011\u7121\u6CD5\u627E\u5230\u60A8\u8981\u7684\u9801\u9762\u3002"})}),(0,o.jsx)("p",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:(0,o.jsx)(n.p,{children:"\u7DB2\u9801\u7D50\u69CB\u5DF2\u7D93\u4FEE\u6539\u4E86\uFF0C\u800C\u60A8\u53EF\u80FD\u9078\u5230\u904E\u6642\u7684\u9023\u7D50\u3002"})}),(0,o.jsx)("p",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:(0,o.jsx)(n.p,{children:"\u8ACB\u9EDE\u64CA\u4E0A\u65B9\u5C0E\u822A\u6B04\uFF0C\u6216\u8A31\u53EF\u4EE5\u627E\u5230\u60A8\u8981\u7684\u8CC7\u8A0A\u3002"})})]}),(0,o.jsx)("style",{children:`
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }
`})]}),"\n",(0,o.jsx)(n.h3,{id:"full-code",children:"Full Code"}),"\n",(0,o.jsx)(n.p,{children:"Finally, here is the complete code:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",metastring:"title='src/theme/NotFound/Content/index.js'",children:'import Translate from "@docusaurus/Translate";\nimport Heading from "@theme/Heading";\nimport clsx from "clsx";\nimport React, { useEffect, useState } from "react";\n\nexport default function NotFoundContent({ className }) {\n  const [countdown, setCountdown] = useState(15);\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCountdown((prevCountdown) =>\n        prevCountdown > 0 ? prevCountdown - 1 : 0\n      );\n    }, 1000);\n\n    if (countdown === 0) {\n      window.location.href = "/";\n    }\n\n    return () => clearInterval(timer);\n  }, [countdown]);\n\n  return (\n    <main className={clsx("container margin-vert--xl", className)}>\n      <div\n        className="row"\n        style={{\n          display: "flex",\n          justifyContent: "center",\n          alignItems: "center",\n          flexDirection: "column",\n          textAlign: "center",\n          animation: "fadeIn 0.5s ease-in-out",\n        }}\n      >\n        <img\n          src="/img/error-icon.png"\n          alt="Error icon"\n          style={{\n            width: "150px",\n            height: "150px",\n            marginBottom: "20px",\n            animation: "bounce 1s infinite",\n          }}\n        />\n\n        <div>\n          <Heading as="h1" className="hero__title">\n            <Translate\n              id="theme.NotFound.title"\n              description="The title of the 404 page"\n            >\n              Page Not Found\n            </Translate>\n          </Heading>\n          <p style={{ fontSize: "1.2rem", marginBottom: "20px" }}>\n            Sorry, we couldn\'t find the page you were looking for.\n          </p>\n          <p style={{ fontSize: "1.2rem", marginBottom: "20px" }}>\n            It\u2019s possible that the site structure has changed, and you might\n            have clicked an outdated link.\n          </p>\n          <p style={{ fontSize: "1.2rem", marginBottom: "20px" }}>\n            Please use the navigation bar above to find the information you\'re\n            looking for.\n          </p>\n          <p aria-live="polite" style={{ fontSize: "1rem", color: "#555" }}>\n            {countdown > 0\n              ? `Redirecting to the homepage in ${countdown} seconds...`\n              : "Redirecting..."}\n          </p>\n        </div>\n\n        <style>{`\n          @keyframes fadeIn {\n            from { opacity: 0; }\n            to { opacity: 1; }\n          }\n          @keyframes bounce {\n            0%, 100% {\n              transform: translateY(0);\n            }\n            50% {\n              transform: translateY(-10px);\n            }\n          }\n        `}</style>\n      </div>\n    </main>\n  );\n}\n'})})]})}function u(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},50065:function(e,n,t){t.d(n,{Z:function(){return a},a:function(){return r}});var i=t(67294);let o={},s=i.createContext(o);function r(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}},15055:function(e){e.exports=JSON.parse('{"permalink":"/en/blog/customized-docusaurus-404-page","source":"@site/i18n/en/docusaurus-plugin-content-blog/2024/09-10-customized-docusaurus-404-page/index.md","title":"Customizing the Docusaurus 404 Page","description":"The default 404 page needs a revamp!","date":"2024-09-10T00:00:00.000Z","tags":[{"inline":true,"label":"Docusaurus","permalink":"/en/blog/tags/docusaurus"},{"inline":true,"label":"404NotFound","permalink":"/en/blog/tags/404-not-found"}],"readingTime":6.235,"hasTruncateMarker":true,"authors":[{"name":"Z. Yuan","title":"Dosaid maintainer, Full-Stack AI Engineer","url":"https://github.com/zephyr-sh","socials":{"github":"https://github.com/zephyr-sh","linkedin":"https://www.linkedin.com/in/ze-yuan-sh7/"},"imageURL":"https://github.com/zephyr-sh.png","key":"Z. Yuan","page":null}],"frontMatter":{"slug":"customized-docusaurus-404-page","title":"Customizing the Docusaurus 404 Page","authors":"Z. Yuan","image":"/en/img/2024/0910.webp","tags":["Docusaurus","404NotFound"],"description":"The default 404 page needs a revamp!"},"unlisted":false,"prevItem":{"title":"Automatically Count Articles in Docusaurus Sidebar","permalink":"/en/blog/customized-docusaurus-sidebars-auto-count"},"nextItem":{"title":"Discrepancy in LayerNorm Calculations?","permalink":"/en/blog/torch-layernorm-mismatch"}}')}}]);