"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["16251"],{74636:function(e,s,r){r.r(s),r.d(s,{default:()=>p});var o=r(85893),t=r(6813),a=r(67294),n=r(2933),d=r(92071),i=r(11992),l=r(33357),w=r(5121),c=r(66360),h=r(9795);let{Text:u}=d.Z,m={"zh-hant":{newPasswordLabel:"\u65B0\u5BC6\u78BC",newPasswordRequired:"\u8ACB\u8F38\u5165\u65B0\u5BC6\u78BC",confirmPasswordLabel:"\u78BA\u8A8D\u65B0\u5BC6\u78BC",confirmPasswordRequired:"\u8ACB\u518D\u6B21\u8F38\u5165\u65B0\u5BC6\u78BC",passwordMismatch:"\u5169\u6B21\u8F38\u5165\u7684\u5BC6\u78BC\u4E0D\u4E00\u81F4",passwordTooShort:"\u5BC6\u78BC\u9577\u5EA6\u9700\u81F3\u5C11 8 \u78BC",resetBtn:"\u91CD\u8A2D\u5BC6\u78BC",successMsg:"\u5BC6\u78BC\u91CD\u8A2D\u6210\u529F\uFF01",errorMsg:"\u5BC6\u78BC\u91CD\u8A2D\u5931\u6557\uFF0C\u8ACB\u7A0D\u5F8C\u518D\u8A66",missingToken:"\u7121\u6548\u6216\u7F3A\u5C11\u91CD\u8A2D\u5BC6\u78BC token",errorModalTitle:"\u5BC6\u78BC\u91CD\u8A2D\u5931\u6557",errorModalOk:"\u78BA\u5B9A",passwordStrengthLabel:"\u5BC6\u78BC\u5F37\u5EA6\uFF1A",strengthTexts:["\u975E\u5E38\u5F31","\u5F31","\u4E2D\u7B49","\u5F37","\u975E\u5E38\u5F37"]},en:{newPasswordLabel:"New Password",newPasswordRequired:"Please enter your new password",confirmPasswordLabel:"Confirm New Password",confirmPasswordRequired:"Please confirm your new password",passwordMismatch:"The two passwords do not match",passwordTooShort:"Password must be at least 8 characters",resetBtn:"Reset Password",successMsg:"Password reset successfully!",errorMsg:"Failed to reset password, please try again later",missingToken:"Missing or invalid reset token",errorModalTitle:"Reset Password Failed",errorModalOk:"OK",passwordStrengthLabel:"Password Strength: ",strengthTexts:["Very Weak","Weak","Medium","Strong","Very Strong"]},ja:{newPasswordLabel:"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9",newPasswordRequired:"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",confirmPasswordLabel:"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u78BA\u8A8D",confirmPasswordRequired:"\u3082\u3046\u4E00\u5EA6\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",passwordMismatch:"\u5165\u529B\u3055\u308C\u305F\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u4E00\u81F4\u3057\u307E\u305B\u3093",passwordTooShort:"\u30D1\u30B9\u30EF\u30FC\u30C9\u306F8\u6587\u5B57\u4EE5\u4E0A\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059",resetBtn:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8",successMsg:"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u30EA\u30BB\u30C3\u30C8\u306B\u6210\u529F\u3057\u307E\u3057\u305F\uFF01",errorMsg:"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u30EA\u30BB\u30C3\u30C8\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\u5F8C\u3067\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044",missingToken:"\u30EA\u30BB\u30C3\u30C8\u30C8\u30FC\u30AF\u30F3\u304C\u7121\u52B9\u304B\u4E0D\u8DB3\u3057\u3066\u3044\u307E\u3059",errorModalTitle:"\u30D1\u30B9\u30EF\u30FC\u30C9\u30EA\u30BB\u30C3\u30C8\u5931\u6557",errorModalOk:"\u78BA\u5B9A",passwordStrengthLabel:"Password Strength: ",strengthTexts:["Very Weak","Weak","Medium","Strong","Very Strong"]}};function g(e){let{onSuccess:s}=e,{i18n:{currentLocale:r}}=(0,n.Z)(),t=m[r]||m.en,[d]=i.Z.useForm(),[g,p]=(0,a.useState)(!1),[P,y]=(0,a.useState)(""),[f,j]=(0,a.useState)(!1),[k,b]=(0,a.useState)(""),[M,S]=(0,a.useState)(null),[x,T]=(0,a.useState)(0);(0,a.useEffect)(()=>{S(new URLSearchParams(window.location.search).get("token"))},[]);let L=[{required:!0,message:t.newPasswordRequired},{validator:async(e,s)=>s&&s.length<8?Promise.reject(Error(t.passwordTooShort)):Promise.resolve()}],R=async e=>{if(y(""),b(""),!M){b(t.missingToken),j(!0);return}p(!0);try{let o=await fetch("https://api.docsaid.org/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":r},body:JSON.stringify({token:M,new_password:e.newPassword})});if(!o.ok){let e=await o.json();console.log("Error response:",e);let s=e.error||(e.detail&&"object"==typeof e.detail?e.detail.error:e.detail)||t.errorMsg;throw Error(s)}await o.json(),y(t.successMsg),d.resetFields(),s&&s();let a="/";"en"===r?a="/en":"ja"===r&&(a="/ja"),setTimeout(()=>{window.location.href=a},1500)}catch(e){console.error("Reset password error:",e),b(e.message||t.errorMsg),j(!0)}finally{p(!1)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.Z,{form:d,onFinish:R,layout:"vertical",style:{maxWidth:400,margin:"0 auto"},children:[P&&(0,o.jsx)(l.Z,{style:{marginBottom:10},message:P,type:"success",showIcon:!0}),(0,o.jsx)(i.Z.Item,{label:t.newPasswordLabel,name:"newPassword",rules:L,children:(0,o.jsx)(h.Z,{onChange:e=>{let s=e.target.value;s?s.length<6?T(1):s.length<10?T(2):s.length<14?T(3):T(4):T(0)}})}),x>0&&(0,o.jsxs)(u,{type:"secondary",style:{marginBottom:16,display:"block"},children:[t.passwordStrengthLabel,t.strengthTexts[x]]}),(0,o.jsx)(i.Z.Item,{label:t.confirmPasswordLabel,name:"confirmPassword",dependencies:["newPassword"],rules:[{required:!0,message:t.confirmPasswordRequired},e=>{let{getFieldValue:s}=e;return{validator:(e,r)=>r&&s("newPassword")!==r?Promise.reject(Error(t.passwordMismatch)):Promise.resolve()}}],children:(0,o.jsx)(h.Z,{hideStrength:!0})}),(0,o.jsx)(i.Z.Item,{children:(0,o.jsx)(w.ZP,{type:"primary",htmlType:"submit",block:!0,loading:g,children:t.resetBtn})})]}),(0,o.jsx)(c.Z,{open:f,title:t.errorModalTitle,onCancel:()=>j(!1),footer:[(0,o.jsx)(w.ZP,{type:"primary",onClick:()=>j(!1),children:t.errorModalOk},"ok")],children:(0,o.jsx)("p",{children:k})})]})}function p(){return(0,o.jsx)(t.Z,{title:"Reset Password",description:"Reset your account password",children:(0,o.jsx)("div",{style:{padding:"2rem"},children:(0,o.jsx)(g,{})})})}}}]);