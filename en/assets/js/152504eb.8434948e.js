"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["8517"],{26768:function(e,n,i){i.r(n),i.d(n,{assets:function(){return d},contentTitle:function(){return o},default:function(){return h},frontMatter:function(){return t},metadata:function(){return s},toc:function(){return c}});var s=i(96230),l=i(85893),r=i(50065);let t={slug:"pyenv-installation",title:"Managing Python Versions with pyenv",authors:"Z. Yuan",tags:["pyenv","virtualenv"],image:"/en/img/2023/1010.webp",description:"A record of installing and using pyenv."},o=void 0,d={authorsImageUrls:[void 0]},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Common Issues and Solutions",id:"common-issues-and-solutions",level:2},{value:"Cross-platform Considerations",id:"cross-platform-considerations",level:2},{value:"Installing <code>pyenv</code>",id:"installing-pyenv",level:2},{value:"Using <code>pyenv</code>",id:"using-pyenv",level:2},{value:"Virtual Environments",id:"virtual-environments",level:2},{value:"Installation",id:"installation",level:3},{value:"Usage",id:"usage",level:3},{value:"Deleting",id:"deleting",level:3},{value:"Updating <code>pyenv</code>",id:"updating-pyenv",level:2},{value:"Removing <code>pyenv</code>",id:"removing-pyenv",level:2},{value:"Conclusion",id:"conclusion",level:2}];function a(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"In the past, when using Python, I mostly relied on Conda for management. Nowadays, pyenv has become the go-to tool."}),"\n",(0,l.jsx)(n.p,{children:"In this article, I briefly document how to install and use pyenv and provide necessary supplemental information for different operating systems."}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsxs)(n.p,{children:["Before installing ",(0,l.jsx)(n.code,{children:"pyenv"}),", you need to have ",(0,l.jsx)(n.code,{children:"Git"})," installed on your system."]}),"\n",(0,l.jsxs)(n.admonition,{type:"info",children:[(0,l.jsxs)(n.p,{children:["The pyenv package provides a ",(0,l.jsx)(n.a,{href:"https://github.com/pyenv/pyenv/wiki/Common-build-problems",children:(0,l.jsx)(n.strong,{children:"troubleshooting guide"})}),"."]}),(0,l.jsx)(n.p,{children:"If you encounter issues during the installation, you can refer to this page."})]}),"\n",(0,l.jsx)(n.h2,{id:"common-issues-and-solutions",children:"Common Issues and Solutions"}),"\n",(0,l.jsx)(n.p,{children:"Here are a few important cases and their solutions:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Missing dependencies"}),"\nPlease first install all necessary packages and build tools according to the ",(0,l.jsx)(n.a,{href:"https://github.com/pyenv/pyenv/wiki#suggested-build-environment",children:(0,l.jsx)(n.strong,{children:"official pyenv dependency guide"})}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"zlib extension compilation failure"})}),"\n",(0,l.jsx)(n.p,{children:"The common error message is:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ERROR: The Python zlib extension was not compiled. Missing the zlib?"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Solution:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["On Ubuntu/Debian systems, install ",(0,l.jsx)(n.code,{children:"zlib1g"})," and ",(0,l.jsx)(n.code,{children:"zlib1g-dev"}),":","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"sudo apt install zlib1g zlib1g-dev\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["On macOS, if you installed zlib with Homebrew, set the environment variable:","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'CPPFLAGS="-I$(brew --prefix zlib)/include" pyenv install -v <python-version>\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"OpenSSL extension compilation failure"})}),"\n",(0,l.jsx)(n.p,{children:"If you see:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ERROR: The Python ssl extension was not compiled. Missing the OpenSSL lib?"})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Solution:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Make sure the OpenSSL development packages are installed (e.g., on Ubuntu use ",(0,l.jsx)(n.code,{children:"sudo apt install libssl-dev"}),", on Fedora use ",(0,l.jsx)(n.code,{children:"sudo dnf install openssl-devel"}),")."]}),"\n",(0,l.jsxs)(n.li,{children:["If OpenSSL is installed in a non-standard location, set the following:","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'CPPFLAGS="-I<openssl-install-path>/include" \\\nLDFLAGS="-L<openssl-install-path>/lib" \\\npyenv install -v <python-version>\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"System resources are insufficient"})}),"\n",(0,l.jsx)(n.p,{children:'If you encounter the "resource temporarily unavailable" error, try reducing the make parallelism:'}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"MAKE_OPTS='-j 1' pyenv install <python-version>\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"python-build definition not found"})}),"\n",(0,l.jsxs)(n.p,{children:["If you encounter the ",(0,l.jsx)(n.code,{children:"python-build: definition not found"})," error, update the python-build definitions:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/.pyenv/plugins/python-build && git pull\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"macOS architecture-related errors"})}),"\n",(0,l.jsxs)(n.p,{children:["If you see errors like ",(0,l.jsx)(n.code,{children:"ld: symbol(s) not found for architecture x86_64"})," or ",(0,l.jsx)(n.code,{children:"ld: symbol(s) not found for architecture arm64"}),", ensure that the Homebrew packages match the correct architecture and check if additional environment variables (such as CPPFLAGS, LDFLAGS, and CONFIGURE_OPTS) need to be set."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["For more detailed information, refer to ",(0,l.jsx)(n.a,{href:"https://github.com/pyenv/pyenv/wiki/Common-build-problems",children:(0,l.jsx)(n.strong,{children:"Common build problems"})}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"cross-platform-considerations",children:"Cross-platform Considerations"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Linux/macOS:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The installation method is generally the same, and you can directly use the commands in the next section."}),"\n",(0,l.jsxs)(n.li,{children:["Install the necessary compilation dependencies based on your operating system (e.g., on Ubuntu, you may need to install ",(0,l.jsx)(n.code,{children:"build-essential"}),", ",(0,l.jsx)(n.code,{children:"libssl-dev"}),", ",(0,l.jsx)(n.code,{children:"zlib1g-dev"}),", etc.)."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Windows users:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["pyenv is natively designed for Unix-like environments, so it\u2019s recommended to use the ",(0,l.jsx)(n.a,{href:"https://github.com/pyenv-win/pyenv-win",children:(0,l.jsx)(n.strong,{children:"pyenv-win"})})," version."]}),"\n",(0,l.jsx)(n.li,{children:"Alternatively, you can use WSL, Git Bash, or similar tools on Windows to get a Unix-like environment."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Other Shell Users:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"If you use a shell other than bash or zsh (such as fish), refer to the corresponding shell configuration files for adjustments."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.h2,{id:"installing-pyenv",children:["Installing ",(0,l.jsx)(n.code,{children:"pyenv"})]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Run the installation command:"})}),"\n",(0,l.jsxs)(n.p,{children:["You can quickly install ",(0,l.jsx)(n.code,{children:"pyenv"})," with the following command:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl https://pyenv.run | bash\n"})}),"\n",(0,l.jsxs)(n.p,{children:["This command will fetch and execute the installation script from the ",(0,l.jsx)(n.code,{children:"pyenv-installer"})," repository on GitHub."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Configure your shell environment:"})}),"\n",(0,l.jsxs)(n.p,{children:["After installation, follow the ",(0,l.jsx)(n.a,{href:"https://github.com/pyenv/pyenv#set-up-your-shell-environment-for-pyenv",children:(0,l.jsx)(n.strong,{children:"setup guide"})})," to configure your shell environment to ensure ",(0,l.jsx)(n.code,{children:"pyenv"})," works properly."]}),"\n",(0,l.jsxs)(n.p,{children:["For bash, add the following lines to your ",(0,l.jsx)(n.code,{children:".bashrc"})," file:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'export PATH="$HOME/.pyenv/bin:$PATH"\neval "$(pyenv init --path)"\neval "$(pyenv virtualenv-init -)"\n'})}),"\n",(0,l.jsxs)(n.p,{children:["For zsh, add the same lines to your ",(0,l.jsx)(n.code,{children:".zshrc"})," file; for other shells, refer to their respective configuration files."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Restart your shell:"})}),"\n",(0,l.jsx)(n.p,{children:"After completing the above steps, reload the configuration:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"exec $SHELL\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.h2,{id:"using-pyenv",children:["Using ",(0,l.jsx)(n.code,{children:"pyenv"})]}),"\n",(0,l.jsxs)(n.p,{children:["Once installed and configured, you can use ",(0,l.jsx)(n.code,{children:"pyenv"})," to manage multiple Python versions:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Install a new Python version:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pyenv install 3.10.14\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Switch the global Python version:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pyenv global 3.10.14\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use a specific version in a particular directory:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pyenv local 3.8.5\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"virtual-environments",children:"Virtual Environments"}),"\n",(0,l.jsx)(n.p,{children:"Virtual environments are crucial in Python development as they help you use independent Python versions and dependencies in different projects, avoiding conflicts."}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsx)(n.p,{children:"I personally recommend using virtual environments in every Python project, even if the environment is accidentally damaged, it can be easily deleted and recreated."})}),"\n",(0,l.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"pyenv"})," provides the ",(0,l.jsx)(n.code,{children:"pyenv-virtualenv"})," plugin, making virtual environment management more convenient."]}),"\n",(0,l.jsxs)(n.p,{children:["This functionality is now integrated into ",(0,l.jsx)(n.code,{children:"pyenv"})," and can be used directly:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pyenv virtualenv 3.10.14 your-env-name\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Here, ",(0,l.jsx)(n.code,{children:"3.10.14"})," is the Python version you want to use (make sure it's installed), and ",(0,l.jsx)(n.code,{children:"your-env-name"})," is the name of the virtual environment."]}),"\n",(0,l.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,l.jsx)(n.p,{children:"Activate the virtual environment:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pyenv activate your-env-name\n"})}),"\n",(0,l.jsx)(n.h3,{id:"deleting",children:"Deleting"}),"\n",(0,l.jsx)(n.p,{children:"When you no longer need the virtual environment, you can delete it with:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pyenv virtualenv-delete your-env-name\n"})}),"\n",(0,l.jsxs)(n.h2,{id:"updating-pyenv",children:["Updating ",(0,l.jsx)(n.code,{children:"pyenv"})]}),"\n",(0,l.jsxs)(n.p,{children:["If you need to update ",(0,l.jsx)(n.code,{children:"pyenv"})," to the latest version, you can follow these methods:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Using the update plugin:"})," If you\u2019ve installed the ",(0,l.jsx)(n.a,{href:"https://github.com/pyenv/pyenv-update",children:(0,l.jsx)(n.strong,{children:"pyenv-update"})})," plugin, you can directly execute:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pyenv update\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Manual update:"}),"\nGo to the ",(0,l.jsx)(n.code,{children:"~/.pyenv"})," directory and update using Git:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/.pyenv\ngit pull\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.h2,{id:"removing-pyenv",children:["Removing ",(0,l.jsx)(n.code,{children:"pyenv"})]}),"\n",(0,l.jsxs)(n.p,{children:["If you decide to stop using ",(0,l.jsx)(n.code,{children:"pyenv"}),", follow these steps to remove it:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["Remove the ",(0,l.jsx)(n.code,{children:"pyenv"})," installation directory:"]})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"rm -fr ~/.pyenv\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Clean up shell configurations:"})}),"\n",(0,l.jsxs)(n.p,{children:["Remove or comment out the lines related to ",(0,l.jsx)(n.code,{children:"pyenv"})," in ",(0,l.jsx)(n.code,{children:".bashrc"}),", ",(0,l.jsx)(n.code,{children:".zshrc"})," (or other shell configuration files), then restart the shell:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"exec $SHELL\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,l.jsx)(n.p,{children:"These are the commonly used commands. I hope you have a great Python environment!"})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},50065:function(e,n,i){i.d(n,{Z:function(){return o},a:function(){return t}});var s=i(67294);let l={},r=s.createContext(l);function t(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},96230:function(e){e.exports=JSON.parse('{"permalink":"/en/blog/pyenv-installation","source":"@site/i18n/en/docusaurus-plugin-content-blog/2023/10-10-pyenv-installation/index.md","title":"Managing Python Versions with pyenv","description":"A record of installing and using pyenv.","date":"2023-10-10T00:00:00.000Z","tags":[{"inline":true,"label":"pyenv","permalink":"/en/blog/tags/pyenv"},{"inline":true,"label":"virtualenv","permalink":"/en/blog/tags/virtualenv"}],"readingTime":4.46,"hasTruncateMarker":true,"authors":[{"name":"Z. Yuan","title":"Dosaid maintainer, Full-Stack AI Engineer","url":"https://github.com/zephyr-sh","socials":{"github":"https://github.com/zephyr-sh","linkedin":"https://www.linkedin.com/in/ze-yuan-sh7/"},"imageURL":"https://github.com/zephyr-sh.png","key":"Z. Yuan","page":null}],"frontMatter":{"slug":"pyenv-installation","title":"Managing Python Versions with pyenv","authors":"Z. Yuan","tags":["pyenv","virtualenv"],"image":"/en/img/2023/1010.webp","description":"A record of installing and using pyenv."},"unlisted":false,"prevItem":{"title":"Building a New Computer","permalink":"/en/blog/buy-a-new-computer"},"nextItem":{"title":"Recording and Troubleshooting Model Training Environment Issues","permalink":"/en/blog/python-env-info-collector"}}')}}]);