"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["2575"],{91931:function(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>t,toc:()=>u});var t=s(82737),i=s(74848),r=s(84429);let o={slug:"update-docusaurus-to-3-6-0",title:"Update Docusaurus to 3.6.0",authors:"Z. Yuan",image:"/en/img/2024/1109.webp",tags:["Docusaurus","Update"],description:"Troubleshooting issues during the update process"},a,l={authorsImageUrls:[void 0]},u=[{value:"Update Details",id:"update-details",level:2},{value:"Issue Description",id:"issue-description",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Additional Issues",id:"additional-issues",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"2024-11-20 Update",id:"2024-11-20-update",level:2},{value:"2024-11-24 Update",id:"2024-11-24-update",level:2}];function c(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Docusaurus has released version 3.6.0, which includes updates to the bundling tool, significantly speeding up build times."}),"\n",(0,i.jsx)(n.p,{children:"However, we ran into some issues during the update!"}),"\n",(0,i.jsx)(n.h2,{id:"update-details",children:"Update Details"}),"\n",(0,i.jsx)(n.p,{children:"If you're not familiar with the recent release, you can check out the latest blog post from the Docusaurus team:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docusaurus.io/blog/releases/3.6",children:(0,i.jsx)(n.strong,{children:"Docusaurus 3.6"})})}),"\n",(0,i.jsx)("iframe",{src:"https://docusaurus.io/blog/releases/3.6",width:"80%",height:"300px",center:"true"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"issue-description",children:"Issue Description"}),"\n",(0,i.jsx)(n.p,{children:"The update itself proceeded without issues, but Docusaurus introduced a new feature in this version that allows adding a config setting:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus.config.js"',children:"const config = {\n  future: {\n    experimental_faster: true,\n  },\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:["When we added this setting to our ",(0,i.jsx)(n.code,{children:"docusaurus.config.js"})," file, we encountered the following error:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"yarn run v1.22.22\n$ docusaurus start\n[INFO] Starting the development server...\n[SUCCESS] Docusaurus website is running at: http://localhost:3000/\n\u25CF Client \u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0\u25A0 (83%) sealing chunk ids\nSegmentation fault (core dumped)\nerror Command failed with exit code 139.\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"When we saw this error, it was frustrating."}),"\n",(0,i.jsxs)(n.p,{children:["A simple ",(0,i.jsx)(n.code,{children:"Segmentation fault"}),"? That\u2019s all? Really?"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.p,{children:"Since we couldn't find any solutions in the official issue tracker, we had to troubleshoot this manually."}),"\n",(0,i.jsxs)(n.p,{children:["After some investigation, we discovered that the issue stems from using certain Chinese characters in ",(0,i.jsx)(n.code,{children:"_category_.json"})," files."]}),"\n",(0,i.jsx)(n.p,{children:"Or, more accurately, specific Chinese characters cause the issue, though we\u2019re unsure exactly which ones."}),"\n",(0,i.jsx)(n.p,{children:"For example, one of our files originally looked like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="_category_.json"',children:'{\n  "label": "\u5143\u5BCC\u8B49\u5238",\n  "position": 1,\n  "link": {\n    "type": "generated-index"\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Changing ",(0,i.jsx)(n.code,{children:"\u5143\u5BCC\u8B49\u5238"})," to ",(0,i.jsx)(n.code,{children:"\u4E2D\u6587"})," allowed the project to run successfully!"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"Both labels are in Chinese. Why does one work while the other doesn\u2019t?"})}),"\n",(0,i.jsxs)(n.p,{children:["Replacing ",(0,i.jsx)(n.code,{children:"\u4E2D\u6587"})," with an English label also worked:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="_category_.json"',children:'{\n  "label": "English Label",\n  "position": 1,\n  "link": {\n    "type": "generated-index"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"additional-issues",children:"Additional Issues"}),"\n",(0,i.jsx)(n.p,{children:"We also discovered another issue: the new setting doesn\u2019t support special characters in file names."}),"\n",(0,i.jsxs)(n.p,{children:["For instance, one of our files was named ",(0,i.jsx)(n.code,{children:"B\xe9zier"}),", which caused an error due to the accented character."]}),"\n",(0,i.jsx)(n.p,{children:"After removing the accent, everything ran smoothly."}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(n.p,{children:"In the end, we decided not to enable this new feature."}),"\n",(0,i.jsx)(n.p,{children:"Since our website is relatively small, build speed isn\u2019t a major bottleneck, but this feature would require us to change multiple files."}),"\n",(0,i.jsx)(n.p,{children:"Maybe we\u2019ll revisit it later!"}),"\n",(0,i.jsx)(n.h2,{id:"2024-11-20-update",children:"2024-11-20 Update"}),"\n",(0,i.jsxs)(n.p,{children:["The official update notification has been received, and this time the version has been updated to ",(0,i.jsx)(n.strong,{children:"v3.6.2"}),", which resolves the issues mentioned in the previous update."]}),"\n",(0,i.jsxs)(n.p,{children:["In this version, we can now successfully use the ",(0,i.jsx)(n.code,{children:"experimental_faster"})," setting:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="docusaurus.config.js"',children:"const config = {\n  future: {\n    experimental_faster: true,\n  },\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Testing shows that the ",(0,i.jsx)(n.strong,{children:"Segmentation fault"})," issue no longer occurs."]}),"\n",(0,i.jsx)(n.p,{children:"However..."}),"\n",(0,i.jsx)(n.p,{children:"After starting the development environment, modifying files triggers the following error:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"Panic occurred at runtime. Please file an issue on GitHub with the backtrace below: https://github.com/web-infra-dev/rspack/issues\nMessage:  Chunk(ChunkUkey(Ukey(606), PhantomData<rspack_core::chunk::Chunk>)) not found in ChunkByUkey\nLocation: crates/rspack_core/src/lib.rs:328\n\nRun with COLORBT_SHOW_HIDDEN=1 environment variable to disable frame filtering.\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 BACKTRACE \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n 1: start_thread\n    at ./nptl/pthread_create.c:447\n 2: clone3\n    at ./misc/../sysdeps/unix/sysv/linux/x86_64/clone3.S:78\nAborted (core dumped)\nerror Command failed with exit code 134.\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\n"})}),"\n",(0,i.jsx)(n.p,{children:"It seems to be an issue with Rspack. We quickly found a related issue on GitHub:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/web-infra-dev/rspack/issues/8480",children:(0,i.jsx)(n.strong,{children:"web-infra-dev/rspack: [Bug]: using docusaurus edit mdx or md file, process crash. #8480"})})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"It looks like we're not alone in this! We'll have to wait for a further fix."}),"\n",(0,i.jsx)(n.h2,{id:"2024-11-24-update",children:"2024-11-24 Update"}),"\n",(0,i.jsx)(n.p,{children:"Continuing from the previous issue, this time we updated to v3.6.3."}),"\n",(0,i.jsx)(n.p,{children:"The Rspack issue has been fixed, and we can now happily use it as normal!"})]})}function d(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},84429:function(e,n,s){s.d(n,{R:()=>o,x:()=>a});var t=s(96540);let i={},r=t.createContext(i);function o(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:n},e.children)}},82737:function(e){e.exports=JSON.parse('{"permalink":"/en/blog/update-docusaurus-to-3-6-0","source":"@site/i18n/en/docusaurus-plugin-content-blog/2024/11-09-update-docusaurus-to-360/index.md","title":"Update Docusaurus to 3.6.0","description":"Troubleshooting issues during the update process","date":"2024-11-09T00:00:00.000Z","tags":[{"inline":true,"label":"Docusaurus","permalink":"/en/blog/tags/docusaurus"},{"inline":true,"label":"Update","permalink":"/en/blog/tags/update"}],"readingTime":3.16,"hasTruncateMarker":true,"authors":[{"name":"Z. Yuan","title":"Dosaid maintainer, Full-Stack AI Engineer","url":"https://github.com/zephyr-sh","socials":{"github":"https://github.com/zephyr-sh","linkedin":"https://www.linkedin.com/in/ze-yuan-sh7/"},"imageURL":"https://github.com/zephyr-sh.png","key":"Z. Yuan","page":null}],"frontMatter":{"slug":"update-docusaurus-to-3-6-0","title":"Update Docusaurus to 3.6.0","authors":"Z. Yuan","image":"/en/img/2024/1109.webp","tags":["Docusaurus","Update"],"description":"Troubleshooting issues during the update process"},"unlisted":false,"prevItem":{"title":"Fixing pyenv Build Errors","permalink":"/en/blog/fixed-pyenv-install-error"},"nextItem":{"title":"Python Implementation of a Web File Downloader","permalink":"/en/blog/file-crawler-python-implementation"}}')}}]);