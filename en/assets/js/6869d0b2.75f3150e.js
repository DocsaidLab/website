"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["25758"],{24298:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>r,default:()=>h,toc:()=>o,metadata:()=>a,assets:()=>c,contentTitle:()=>l});var a=JSON.parse('{"id":"mrzscanner/benchmark","title":"Evaluation","description":"We use two evaluation metrics to assess the performance of the model:","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/mrzscanner/benchmark.md","sourceDirName":"mrzscanner","slug":"/mrzscanner/benchmark","permalink":"/en/docs/mrzscanner/benchmark","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"zephyr-sh","lastUpdatedAt":1740280801000,"sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Model Design","permalink":"/en/docs/mrzscanner/model_arch"},"next":{"title":"Dataset","permalink":"/en/docs/mrzscanner/dataset"}}'),t=n(85893),i=n(50065);let r={sidebar_position:6},l="Evaluation",c={},o=[{value:"Average Normalized Levenshtein Similarity (ANLS)",id:"average-normalized-levenshtein-similarity-anls",level:2},{value:"Accuracy",id:"accuracy",level:2},{value:"Evaluation Dataset",id:"evaluation-dataset",level:2}];function d(e){let s={admonition:"admonition",annotation:"annotation",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",mtext:"mtext",ol:"ol",p:"p",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"evaluation",children:"Evaluation"})}),"\n",(0,t.jsx)(s.p,{children:"We use two evaluation metrics to assess the performance of the model:"}),"\n",(0,t.jsx)(s.h2,{id:"average-normalized-levenshtein-similarity-anls",children:"Average Normalized Levenshtein Similarity (ANLS)"}),"\n",(0,t.jsx)(s.p,{children:"This metric measures the similarity between the predicted text and the true text."}),"\n",(0,t.jsx)(s.p,{children:"It is based on the Levenshtein edit distance, which calculates the minimum number of editing operations (insertion, deletion, replacement) required to transform the predicted result into the true value. The distance is then normalized to a value between 0 and 1, where a higher value indicates that the prediction is closer to the true value."}),"\n",(0,t.jsx)(s.p,{children:"For example:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["True text: ",(0,t.jsx)(s.code,{children:"hello"})]}),"\n",(0,t.jsxs)(s.li,{children:["Predicted text: ",(0,t.jsx)(s.code,{children:"helo"})]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Levenshtein distance = 1 (missing one ",(0,t.jsx)(s.code,{children:"l"}),"), calculated as:"]}),"\n",(0,t.jsx)(s.span,{className:"katex-display",children:(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsxs)(s.mrow,{children:[(0,t.jsx)(s.mtext,{children:"ANLS"}),(0,t.jsx)(s.mo,{children:"="}),(0,t.jsx)(s.mn,{children:"1"}),(0,t.jsx)(s.mo,{children:"\u2212"}),(0,t.jsxs)(s.mfrac,{children:[(0,t.jsx)(s.mtext,{children:"Levenshtein\xa0Distance"}),(0,t.jsxs)(s.mrow,{children:[(0,t.jsx)(s.mi,{children:"max"}),(0,t.jsx)(s.mo,{children:"\u2061"}),(0,t.jsx)(s.mo,{stretchy:"false",children:"("}),(0,t.jsx)(s.mtext,{children:"len"}),(0,t.jsx)(s.mo,{stretchy:"false",children:"("}),(0,t.jsxs)(s.msub,{children:[(0,t.jsx)(s.mi,{children:"y"}),(0,t.jsx)(s.mtext,{children:"true"})]}),(0,t.jsx)(s.mo,{stretchy:"false",children:")"}),(0,t.jsx)(s.mo,{separator:"true",children:","}),(0,t.jsx)(s.mtext,{children:"len"}),(0,t.jsx)(s.mo,{stretchy:"false",children:"("}),(0,t.jsxs)(s.msub,{children:[(0,t.jsx)(s.mi,{children:"y"}),(0,t.jsx)(s.mtext,{children:"pred"})]}),(0,t.jsx)(s.mo,{stretchy:"false",children:")"}),(0,t.jsx)(s.mo,{stretchy:"false",children:")"})]})]})]}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\text{ANLS} = 1 - \\frac{\\text{Levenshtein Distance}}{\\max(\\text{len}(y_{\\text{true}}), \\text{len}(y_{\\text{pred}}))}"})]})})}),(0,t.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(s.span,{className:"mord text",children:(0,t.jsx)(s.span,{className:"mord",children:"ANLS"})}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"="}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,t.jsx)(s.span,{className:"mord",children:"1"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"2.3435em",verticalAlign:"-0.9721em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,t.jsx)(s.span,{className:"mfrac",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsxs)(s.span,{className:"vlist",style:{height:"1.3714em"},children:[(0,t.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mop",children:"max"}),(0,t.jsx)(s.span,{className:"mopen",children:"("}),(0,t.jsx)(s.span,{className:"mord text",children:(0,t.jsx)(s.span,{className:"mord",children:"len"})}),(0,t.jsx)(s.span,{className:"mopen",children:"("}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.2806em"},children:(0,t.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:(0,t.jsx)(s.span,{className:"mord text mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:"true"})})})})]})}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200B"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(s.span,{})})})]})})]}),(0,t.jsx)(s.span,{className:"mclose",children:")"}),(0,t.jsx)(s.span,{className:"mpunct",children:","}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord text",children:(0,t.jsx)(s.span,{className:"mord",children:"len"})}),(0,t.jsx)(s.span,{className:"mopen",children:"("}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,t.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:(0,t.jsx)(s.span,{className:"mord text mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:"pred"})})})})]})}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200B"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,t.jsx)(s.span,{})})})]})})]}),(0,t.jsx)(s.span,{className:"mclose",children:"))"})]})]}),(0,t.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,t.jsxs)(s.span,{style:{top:"-3.677em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord",children:(0,t.jsx)(s.span,{className:"mord text",children:(0,t.jsx)(s.span,{className:"mord",children:"Levenshtein\xa0Distance"})})})]})]}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200B"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.9721em"},children:(0,t.jsx)(s.span,{})})})]})}),(0,t.jsx)(s.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"The normalized similarity is calculated as 0.8, indicating a high similarity between the prediction and the true value."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"This metric is especially useful in OCR scenarios, where partial errors are acceptable, and it serves as a good standard for evaluation."}),"\n",(0,t.jsx)(s.h2,{id:"accuracy",children:"Accuracy"}),"\n",(0,t.jsx)(s.p,{children:'This is the commonly seen metric for determining the overall recognition accuracy of the model on an image. If all the text in the model\'s prediction is correct, the image is considered "correctly recognized"; otherwise, it is considered "incorrect."'}),"\n",(0,t.jsx)(s.p,{children:"Accuracy is expressed as a percentage, calculated by dividing the number of correctly recognized images by the total number of test images."}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Example"}),":"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Number of test images: 100"}),"\n",(0,t.jsx)(s.li,{children:"Number of correctly predicted images: 85"}),"\n",(0,t.jsx)(s.li,{children:"Accuracy = (85 / 100) \xd7 100% = 85%"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"This metric is suitable for applications requiring high precision, such as form processing or identity recognition, as any incorrect character could affect the usability of the result."}),"\n",(0,t.jsxs)(s.admonition,{type:"tip",children:[(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:'Why not use "Character Accuracy"?'})}),(0,t.jsxs)(s.p,{children:["Another common evaluation method is ",(0,t.jsx)(s.strong,{children:"Character Accuracy"})," or ",(0,t.jsx)(s.strong,{children:"Word Accuracy"}),", which measures the accuracy of individual characters or words in the predicted text compared to the true text. However, Character Accuracy may not be ideal in some application scenarios:"]}),(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Small errors lead to a very low score"}),":"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["True text: ",(0,t.jsx)(s.code,{children:"hello world"})]}),"\n",(0,t.jsxs)(s.li,{children:["Predicted text: ",(0,t.jsx)(s.code,{children:"helo world"})]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Since ",(0,t.jsx)(s.code,{children:"hello"})," is misrecognized as ",(0,t.jsx)(s.code,{children:"helo"}),", even if only one letter is incorrect, the word is still considered wrong, resulting in a dramatic drop in character accuracy."]}),"\n",(0,t.jsx)(s.hr,{}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Word misalignment causes significant impact"}),":"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["True text: ",(0,t.jsx)(s.code,{children:"hello world"})]}),"\n",(0,t.jsxs)(s.li,{children:["Predicted text: ",(0,t.jsx)(s.code,{children:"ello horld"})]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"In this case, the misalignment of the words causes both words to be considered incorrect, even if most of the letters are still correct, leading to a lower score."}),"\n",(0,t.jsx)(s.hr,{}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Cannot quantify partially correct predictions"}),":"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["True text: ",(0,t.jsx)(s.code,{children:"123456"})]}),"\n",(0,t.jsxs)(s.li,{children:["Predicted text: ",(0,t.jsx)(s.code,{children:"12345"})]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:'In some scenarios, we care more about whether the model\'s output is "close" to the correct answer rather than being identical.'}),"\n",(0,t.jsxs)(s.p,{children:["If we use Character Accuracy, the word ",(0,t.jsx)(s.code,{children:"123456"})," would be considered incorrect, leading to a very low score. However, in many cases, this output is still acceptable."]}),"\n",(0,t.jsx)(s.hr,{}),"\n"]}),"\n"]}),(0,t.jsx)(s.p,{children:"Therefore, in our project, we choose not to use Character Accuracy and instead use Accuracy along with ANLS as evaluation metrics."})]}),"\n",(0,t.jsx)(s.h2,{id:"evaluation-dataset",children:"Evaluation Dataset"}),"\n",(0,t.jsx)(s.p,{children:"Evaluating the model in this project faces significant challenges."}),"\n",(0,t.jsx)(s.p,{children:"First, there is no standard dataset available because it involves personal private data, and no one can openly provide such a dataset. As a result, we had to collect data ourselves and annotate it, but the dataset we collected lacks credibility and cannot be considered an authoritative standard:"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"Would you trust someone who claims their model achieves 100% accuracy by collecting their own data?"}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Additionally, a well-known dataset in this field is ",(0,t.jsx)(s.strong,{children:"MIDV"})," (Mobile Identity Document Video dataset), which contains various machine-readable documents like passports and residence permits. However, it has its limitations:"]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Insufficient data"}),": The ",(0,t.jsx)(s.strong,{children:"MIDV"})," dataset is small, and most of it is based on synthetic samples, which does not represent real-world application scenarios."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Not focused on MRZ recognition"}),": ",(0,t.jsx)(s.strong,{children:"MIDV"})," includes various documents mainly for document localization, but it does not provide text localization and recognition annotations for MRZ."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Although MRZ text annotations are available in the ",(0,t.jsx)(s.strong,{children:"MIDV-2020"})," version, it still lacks localization area information and cannot be used as a complete evaluation dataset."]}),"\n",(0,t.jsx)(s.p,{children:"Currently, we have a small private test set, mostly from friends, containing about 300 passport and residence permit images. This test set is used for internal testing to help evaluate the model's performance. However, as mentioned earlier, due to privacy concerns, we cannot publicly release the full test data."}),"\n",(0,t.jsx)(s.p,{children:"If you're interested, you can collect your own data and test it using our model."})]})}function h(e={}){let{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},50065:function(e,s,n){n.d(s,{Z:()=>l,a:()=>r});var a=n(67294);let t={},i=a.createContext(t);function r(e){let s=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(i.Provider,{value:s},e.children)}}}]);