"use strict";(self.webpackChunkdocsaid_website=self.webpackChunkdocsaid_website||[]).push([["522"],{82046:function(e,n,r){r.r(n),r.d(n,{metadata:()=>i,contentTitle:()=>c,default:()=>h,assets:()=>a,toc:()=>d,frontMatter:()=>s});var i=JSON.parse('{"id":"mrzscanner/quickstart","title":"Quick Start","description":"We provide a simple model inference interface, which includes the logic for preprocessing and postprocessing.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/mrzscanner/quickstart.md","sourceDirName":"mrzscanner","slug":"/mrzscanner/quickstart","permalink":"/en/docs/mrzscanner/quickstart","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"zephyr-sh","lastUpdatedAt":1735796928000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/en/docs/mrzscanner/installation"},"next":{"title":"Advanced","permalink":"/en/docs/mrzscanner/advance"}}'),t=r("85893"),o=r("50065");let s={sidebar_position:3},c="Quick Start",a={},d=[{value:"Model Inference",id:"model-inference",level:2},{value:"Using the <code>do_center_crop</code> Parameter",id:"using-the-do_center_crop-parameter",level:2},{value:"Using with <code>DocAligner</code>",id:"using-with-docaligner",level:2},{value:"Error Messages",id:"error-messages",level:2},{value:"Check Digit",id:"check-digit",level:2}];function l(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"quick-start",children:"Quick Start"})}),"\n",(0,t.jsx)(n.p,{children:"We provide a simple model inference interface, which includes the logic for preprocessing and postprocessing."}),"\n",(0,t.jsxs)(n.p,{children:["First, you need to import the necessary dependencies and create an instance of the ",(0,t.jsx)(n.code,{children:"MRZScanner"})," class."]}),"\n",(0,t.jsx)(n.h2,{id:"model-inference",children:"Model Inference"}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"We have designed an automatic model download feature. When the program detects that you are missing a model, it will automatically connect to our server to download it."})}),"\n",(0,t.jsx)(n.p,{children:"Here is a simple example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import cv2\nfrom skimage import io\nfrom mrzscanner import MRZScanner\n\n# Build model\nmodel = MRZScanner()\n\n# Read image\nimg = io.imread('https://github.com/DocsaidLab/MRZScanner/blob/main/docs/test_mrz.jpg?raw=true')\nimg = cv2.cvtColor(img, cv2.COLOR_RGB2BGR)\n\n# Inference\nresult_mrz, error_msg = model(img)\n\n# Output MRZ block with two lines of text and error message\nprint(result_mrz)\n# >>> ('PCAZEQAQARIN<<FIDAN<<<<<<<<<<<<<<<<<<<<<<<<<',\n#     'C946302620AZE6707297F23031072W12IMJ<<<<<<<40')\nprint(error_msg)\n# >>> <ErrorCodes.NO_ERROR: 'No error.'>\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.p,{children:["In the above example, the image download link can be found here: ",(0,t.jsx)(n.a,{href:"https://github.com/DocsaidLab/MRZScanner/blob/main/docs/test_mrz.jpg",children:(0,t.jsx)(n.strong,{children:"midv2020_test_mrz.jpg"})})]}),(0,t.jsx)("div",{align:"center",children:(0,t.jsx)("figure",{style:{width:"30%"},children:(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"test_mrz",src:r(4132).Z+"",width:"2160",height:"3840"})})})})]}),"\n",(0,t.jsxs)(n.h2,{id:"using-the-do_center_crop-parameter",children:["Using the ",(0,t.jsx)(n.code,{children:"do_center_crop"})," Parameter"]}),"\n",(0,t.jsxs)(n.p,{children:["This image was likely taken with a mobile device and has an elongated shape. If we directly use the model for inference, it may cause excessive text distortion. Therefore, when calling the model, we enable the ",(0,t.jsx)(n.code,{children:"do_center_crop"})," parameter as shown below:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from mrzscanner import MRZScanner\n\nmodel = MRZScanner()\n\nresult, msg = model(img, do_center_crop=True)\nprint(result)\n# >>> ('PCAZEQAOARIN<<FIDAN<<<<<<<<<<<<<<<<<<<<<<<<<',\n#      'C946302620AZE6707297F23031072W12IMJ<<<<<<<40')\nprint(msg)\n# >>> <ErrorCodes.NO_ERROR: 'No error.'>\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"MRZScanner"})," is wrapped with ",(0,t.jsx)(n.code,{children:"__call__"}),", so you can directly invoke the instance for inference."]})}),"\n",(0,t.jsxs)(n.h2,{id:"using-with-docaligner",children:["Using with ",(0,t.jsx)(n.code,{children:"DocAligner"})]}),"\n",(0,t.jsxs)(n.p,{children:["Looking at the output above, we notice that although we applied ",(0,t.jsx)(n.code,{children:"do_center_crop"}),", there are still some typos."]}),"\n",(0,t.jsx)(n.p,{children:"This is because we used full image scanning, and the model may have misinterpreted some text in the image."}),"\n",(0,t.jsxs)(n.p,{children:["To improve accuracy, we integrate ",(0,t.jsx)(n.code,{children:"DocAligner"})," to help us align the MRZ block:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import cv2\nfrom docaligner import DocAligner  # Import DocAligner\nfrom mrzscanner import MRZScanner\nfrom capybara import imwarp_quadrangle\nfrom skimage import io\n\nmodel = MRZScanner()\n\ndoc_aligner = DocAligner()\n\nimg = io.imread('https://github.com/DocsaidLab/MRZScanner/blob/main/docs/test_mrz.jpg?raw=true')\nimg = cv2.cvtColor(img, cv2.COLOR_RGB2BGR)\n\npolygon = doc_aligner(img)\nflat_img = imwarp_quadrangle(img, polygon, dst_size=(800, 480))\n\nprint(model(flat_img))\n# >>> ('PCAZEQAQARIN<<FIDAN<<<<<<<<<<<<<<<<<<<<<<<<<',\n#      'C946302620AZE6707297F23031072W12IMJ<<<<<<<40')\n"})}),"\n",(0,t.jsxs)(n.p,{children:["After using ",(0,t.jsx)(n.code,{children:"DocAligner"}),", there's no need to use the ",(0,t.jsx)(n.code,{children:"do_center_crop"})," parameter anymore."]}),"\n",(0,t.jsx)(n.p,{children:"Now, you'll see that the output is more accurate, and the MRZ block from the image has been successfully recognized."}),"\n",(0,t.jsx)(n.h2,{id:"error-messages",children:"Error Messages"}),"\n",(0,t.jsxs)(n.p,{children:["To help users understand what went wrong, we designed the ",(0,t.jsx)(n.code,{children:"ErrorCodes"})," class."]}),"\n",(0,t.jsx)(n.p,{children:"When the model encounters an error during inference, an error message will be returned, covering the following range:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"class ErrorCodes(Enum):\n    NO_ERROR = 'No error.'\n    INVALID_INPUT_FORMAT = 'Invalid input format.'\n    POSTPROCESS_FAILED_LINE_COUNT = 'Postprocess failed, number of lines not 2 or 3.'\n    POSTPROCESS_FAILED_TD1_LENGTH = 'Postprocess failed, length of lines not 30 when `doc_type` is TD1.'\n    POSTPROCESS_FAILED_TD2_TD3_LENGTH = 'Postprocess failed, length of lines not 36 or 44 when `doc_type` is TD2 or TD3.'\n"})}),"\n",(0,t.jsx)(n.p,{children:"This will filter basic errors, such as invalid input format or incorrect line counts."}),"\n",(0,t.jsx)(n.h2,{id:"check-digit",children:"Check Digit"}),"\n",(0,t.jsx)(n.p,{children:"Check digits in MRZ are crucial for ensuring data accuracy, used to validate numerical values and prevent data entry errors."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["For a detailed process, we have written about it in the ",(0,t.jsx)(n.a,{href:"./reference#%E6%AA%A2%E6%9F%A5%E7%A2%BC",children:(0,t.jsx)(n.strong,{children:"Reference: Check Digit"})}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"In this section, we want to clarify:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"We do not provide check digit calculation functionality!"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This is because the calculation methods for MRZ check digits are not standardized. Besides the regular check digit calculation methods, MRZ in different regions may define their own check digit calculation methods, so providing a specific check digit calculation method may limit users' flexibility."}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"Fun fact:\nThe check digit for foreign residence permits in Taiwan differs from the global standard. Without collaboration with the government to develop the method, it\u2019s not possible to determine how the check digit is calculated."})}),"\n",(0,t.jsxs)(n.p,{children:["Our goal is to train a model focused on MRZ recognition, where each output is automatically determined by the model's format. There are many other open-source projects for check digit calculation, such as the one provided in ",(0,t.jsx)(n.a,{href:"https://github.com/Arg0s1080/mrz",children:(0,t.jsx)(n.strong,{children:"Arg0s1080/mrz"})}),", and we recommend that users directly use this project."]})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},4132:function(e,n,r){r.d(n,{Z:function(){return i}});let i=r.p+"assets/images/test_mrz-677fee313daebc656fb474f194ee59e0.jpg"},50065:function(e,n,r){r.d(n,{Z:function(){return c},a:function(){return s}});var i=r(67294);let t={},o=i.createContext(t);function s(e){let n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);